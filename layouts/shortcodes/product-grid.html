{{/* The product grid order */}}
{{/* Names reflect data/*.yaml files */}}
{{- $order := slice
  "api"
  "api-shield"
  "analytics"
  "apps"
  "email-security"
  "argo-smart-routing"
  "automatic-platform-optimization"
  "bots"
  "byoip"
  "cache"
  "china-network"
  "cloudflare-one"
  "fundamentals"
  "cloudflare-for-platforms"
  "images"
  "data-localization"
  "dns"
  "1.1.1.1"
  "ddos-protection"
  "email-routing"
  "firewall"
  "health-checks"
  "load-balancing"
  "logs"
  "magic-transit"
  "magic-firewall"
  "magic-network-monitoring"
  "magic-wan"
  "network-error-logging"
  "network-interconnect"
  "pages"
  "page-shield"
  "pub-sub"
  "queues"
  "r2"
  "radar"
  "railgun"
  "randomness-beacon"
  "reference-architecture"
  "registrar"
  "rules"
  "ruleset-engine"
  "security-center"
  "spectrum"
  "ssl"
  "stream"
  "support"
  "tenant"
  "terraform"
  "time-services"
  "turnstile"
  "version-management"
  "waf"
  "waiting-room"
  "warp-client"
  "web3"
  "workers"
  "zaraz"
-}}


<style>
  .ProductGrid--content {
    --n: 1;
    display: grid;
    flex-direction: column;
    grid-template-columns: repeat(var(--n), 1fr);
  }

  @media screen and (min-width: 600px) {
    .ProductGrid--content {
      --n: 2;
    }
  }

  @media screen and (min-width: 978px) {
    .ProductGrid--content {
      --n: 3;
    }
  }

  @media screen and (min-width: 1200px) {
    .ProductGrid--content {
      --n: 4;
    }
  }
</style>

<div class="ProductGrid">
  <input
    type="text"
    id="search"
    onkeyup="filterList()"
    placeholder="Search products..."
  />
  <div class="ProductGrid--content" id="ProductGrid--range">
    {{- range $key := $order -}}
      {{- $data := (index $.Site.Data $key) -}}
      {{- $product := (index $data "product") -}}
      {{- $wrap := default false $product.wrap -}}
      <a
        class="ProductGrid--link"
        data-wrap-title="{{ $wrap }}"
        href="{{ $product.url }}"
      >
        <div>{{ safeHTML $data.logo }}</div>
        <span>{{ $product.title }}</span>
      </a>
    {{- end -}}
  </div>
</div>

<script>
  function filterList() {
    // Search input and items
    var input = document.getElementById("search");
    var grid = document.getElementById("ProductGrid--range");

    var query = input.value.toUpperCase();
    var items = grid.getElementsByTagName("a");

    // Iterate through products
    for (var i = 0; i < items.length; i++) {
      var item = items[i];
      var text = item.innerText.toUpperCase();
      if (text.indexOf(query) > -1) {
        item.style.display = "";
      } else {
        item.style.display = "none";
      }
    }
  }
</script>
