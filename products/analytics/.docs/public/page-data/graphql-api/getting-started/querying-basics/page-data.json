{"componentChunkName":"component---src-components-mdx-custom-renderer-js","path":"/graphql-api/getting-started/querying-basics","result":{"data":{"mdx":{"id":"5999765d-b6fe-578c-bc36-f8a569f750be","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 20,\n  \"pcx-content-type\": \"reference\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"querying-basics\"\n  }, \"Querying basics\"), mdx(\"h2\", {\n    \"id\": \"structure-of-a-graphql-query\"\n  }, \"Structure of a GraphQL query\"), mdx(\"p\", null, \"GraphQL structures data as a graph. GraphQL uses a schema to define the objects and their hierarchy in your data graph. You can explore the edges of the graph by using queries to get the data you need. These queries must respect the structure of the schema.\"), mdx(\"p\", null, \"At the core of a GraphQL query is a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"node\"), \", followed by its \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fields\"), \". The node is an object of a certain \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"type\"), \"; the type specifies the fields that make up the object.\"), mdx(\"p\", null, \"A field can be another node, in which case the appropriate query would contain nested elements. Some nodes look like functions that can take on arguments to limit the scope of what they can act on. You can apply filters at each node.\"), mdx(\"h2\", {\n    \"id\": \"query-against-the-cloudflare-graphql-schema\"\n  }, \"Query against the Cloudflare GraphQL schema\"), mdx(\"p\", null, \"A typical query against the Cloudflare GraphQL schema is made up of five components:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"query\"), \" - The root node.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"viewer\"), \" - A nested node indicating to GraphQL that you want to view the results. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"viewer\"), \" component represents the initial node of the user running the query.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"zones\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"account\"), \" - A nested node indicating the domain area or account you want to query against. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"viewer\"), \" can access one or more zones or accounts. Each zone or account contains a collection of data sets.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Leaf node\"), \" - This specifies the data set you want to query against in a zone or account. \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"firewallEventsAdaptive\"), \" is an example of a leaf node that represents a data set for firewall events in a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"zone\"), \" node.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Field\"), \" - The fields in a query specify the set of metrics that you want to fetch. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"firewallEventsAdaptive\"), \" leaf node includes the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"clientIP\"), \" field. If your leaf node queries requests, possible fields would include response bytes or the time at which requests were received.\")), mdx(\"p\", null, \"The following example shows the format for a firewall query:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-code\"\n  }, \"\\nquery{\\n  viewer {\\n      zones(filter: {...}) {\\n         firewallEventsAdaptive( limit: 10, orderBy: [...], filter: {...} ) {\\n           datetime, clientCountryName, action, ...\\n         }\\n      }\\n  }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"example-query\"\n  }, \"Example Query\"), mdx(\"p\", null, \"The following query searches data from a zone for firewall events that occurred during a time interval. It sorts the results, limits the amount of results returned, and displays a set of fields for each firewall event.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Query Firewall events for a specific time interval\\n---\\nquery\\n{\\n  viewer\\n  {\\n    zones(filter: { zoneTag: \\\"11111111\\\"})\\n    {\\n      firewallEventsAdaptive(\\n          filter: {\\n            datetime_gt: \\\"2020-08-03T02:07:05Z\\\",\\n            datetime_lt: \\\"2020-08-03T17:07:05Z\\\" \\n          },\\n          limit: 2,\\n          orderBy: [datetime_DESC, rayName_DESC])\\n      {\\n        action\\n        datetime\\n        rayName\\n        clientRequestHTTPHost\\n        userAgent\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"zones(filter: { zoneTag: \\\"11111111\\\"})\"), \" confines the query to search to one zone.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"firewallEventsAdaptive\"), \" is the large data set that you want to query against. The set of data returned is defined by the following:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"filter:{}\"), \" limits the scope to firewall events between two times: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime_gt\"), \" (greater than) and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime_lt\"), \" (less than).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"limit: 2\"), \" limits the results to 2 (the maximum value is 10,000).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"orderBy\"), \" sorts the results, first by \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime_DESC\"), \", the datetime field , in descending order, and then by the rayname, also in descending order.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The list of fields: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"action\"), \" (Allow, Block, Challenge), \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rayName\"), \" (the RayID), \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"clientRequestHTTPHost\"), \" (the host the client requested), and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"userAgent\"), \".\")))), mdx(\"p\", null, \"You can send the query with an API call or by clicking \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Play\"), \" in the GraphiQL client. The format of the response is in JSON:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Query response from firewallEventsAdaptive\\n---\\n{\\n  \\\"data\\\": {\\n    \\\"viewer\\\": {\\n      \\\"zones\\\": [\\n        {\\n          \\\"firewallEventsAdaptive\\\": [\\n            {\\n              \\\"action\\\": \\\"log\\\",\\n              \\\"clientRequestHTTPHost\\\": \\\"cloudflare.guru\\\",\\n              \\\"datetime\\\": \\\"2020-08-03T17:07:03Z\\\",\\n              \\\"rayName\\\": \\\"5bd1a1fc584357ed\\\",\\n              \\\"userAgent\\\": \\\"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 08c774cde2f3c385)\\\"\\n            },\\n            {\\n              \\\"action\\\": \\\"log\\\",\\n              \\\"clientRequestHTTPHost\\\": \\\"cloudflare.guru\\\",\\n              \\\"datetime\\\": \\\"2020-08-03T17:07:01Z\\\",\\n              \\\"rayName\\\": \\\"5bd1a1ef3bb5d296\\\",\\n              \\\"userAgent\\\": \\\"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 764497f790f6a070)\\\"\\n            }\\n          ]\\n        }\\n      ]\\n    }\\n  },\\n  \\\"errors\\\": null\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"query-two-data-sets-in-a-single-api-call\"\n  }, \"Query two data sets in a single API call\"), mdx(\"p\", null, \"This example query employs a broad range of GraphQL functionality. The example queries two data sets for the specified zone simultaneously, applies filters and aggregations, and sets a limit on the number of records returned. (Note that you must include the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"limit\"), \" argument, which can be equal or up to 10,000.)\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Query two data sets simultaneously\\n---\\nquery {\\n  viewer {\\n    zones(filter: {zoneTag: \\\"<your zone ID>\\\"}) {\\n      httpRequests1mGroups(limit: 5, filter: { datetime_gt: \\\"2019-02-01T04:00:00Z\\\", datetime_lt: \\\"2019-02-01T06:00:00Z\\\"}) {\\n        sum {\\n          countryMap {\\n            bytes\\n            clientCountryName\\n          }\\n        }\\n        dimensions {\\n          date\\n          datetime\\n        }\\n      }\\n      firewallEventsAdaptiveGroups(limit: 10, filter: { datetime_gt: \\\"2019-02-01T04:00:00Z\\\", datetime_lt: \\\"2019-02-01T06:00:00Z\\\"}) {\\n        count\\n        dimensions {\\n          clientCountryName\\n          clientAsn\\n          datetimeHour\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"This is only an example. You must specify the \", mdx(\"code\", null, \"zoneTag\"), \" for your domain. Your Cloudflare dashboard lists your Zone ID (\", mdx(\"code\", null, \"zoneTag\"), \") on the \", mdx(\"em\", null, \"Overview\"), \" page.\")), mdx(\"h2\", {\n    \"id\": \"introspection\"\n  }, \"Introspection\"), mdx(\"p\", null, \"The GraphQL API offers \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://graphql.org/learn/introspection/\"\n  }, \"introspection\"), \", which allows you to explore the graph (by making API calls) to see the available data sets, fields, and operations you can perform.\"), mdx(\"p\", null, \"For an introduction to browsing the Analytics GraphQL API, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/getting-started/explore-graphql-schema\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Explore the Analytics schema with GraphiQL\")), \".\"), mdx(\"h2\", {\n    \"id\": \"helpful-resources\"\n  }, \"Helpful Resources\"), mdx(\"p\", null, \"Here are some helpful articles about working with the Cloudflare Analytics API and GraphQL.\"), mdx(\"h3\", {\n    \"id\": \"cloudflare-specific\"\n  }, \"Cloudflare specific\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://support.cloudflare.com/hc/en-us/articles/205075117-Understanding-the-Cloudflare-dashboard\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Understanding the Cloudflare Dashboard\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://api.cloudflare.com/#getting-started-resource-ids\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"How to find your zoneTag using the API\")))), mdx(\"h3\", {\n    \"id\": \"general-info-on-the-graphql-framework\"\n  }, \"General info on the GraphQL framework\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.howtographql.com/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"How to use GraphQL (tutorials)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://graphql.org/learn/thinking-in-graphs/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Thinking in Graphs\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://graphql.org/learn/schema/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"What data can you can query in the GraphQL type system (schemas)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://medium.com/graphql-mastery/graphql-quick-tip-how-to-pass-variables-into-a-mutation-in-graphiql-23ecff4add57\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"How to pass variables in GraphiQL (Medium article with quick tips)\")))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"5999765d-b6fe-578c-bc36-f8a569f750be","fields":{"slug":"/graphql-api/getting-started/querying-basics"},"frontmatter":{"title":"","type":null,"order":20,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Querying basics","depth":1}],"tableOfContents":{"items":[{"url":"#querying-basics","title":"Querying basics","items":[{"url":"#structure-of-a-graphql-query","title":"Structure of a GraphQL query"},{"url":"#query-against-the-cloudflare-graphql-schema","title":"Query against the Cloudflare GraphQL schema","items":[{"url":"#example-query","title":"Example Query"}]},{"url":"#query-two-data-sets-in-a-single-api-call","title":"Query two data sets in a single API call"},{"url":"#introspection","title":"Introspection"},{"url":"#helpful-resources","title":"Helpful Resources","items":[{"url":"#cloudflare-specific","title":"Cloudflare specific"},{"url":"#general-info-on-the-graphql-framework","title":"General info on the GraphQL framework"}]}]}]},"parent":{"modifiedTime":"2021-10-26","relativePath":"graphql-api/getting-started/querying-basics.md"}}},"staticQueryHashes":["1052658729","2814688963","32046230","338033027","811020565"]}