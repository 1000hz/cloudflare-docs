{"componentChunkName":"component---src-components-mdx-custom-renderer-js","path":"/graphql-api/migration-guides/zone-analytics","result":{"data":{"mdx":{"id":"36216e01-7bd0-5fa0-ab06-f2fb7cbb3406","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 11,\n  \"pcx-content-type\": \"reference\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"zone-analytics-to-graphql-analytics\"\n  }, \"Zone Analytics to GraphQL Analytics\"), mdx(\"p\", null, \"The \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://api.cloudflare.com/#zone-analytics-properties\"\n  }, \"Zone Analytics API\"), \" allows you to get request data by zone. It offers optional \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"since\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"until\"), \" parameters to specify the request time period and a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"continuous\"), \" parameter to indicate whether the time period should be moved backward to find a period with completely aggregated data.\"), mdx(\"p\", null, \"For example, here is a sample curl call to get data for a two minute period:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -H \\\"X-Auth-Email: <REDACTED>\\\" -H \\\"X-Auth-Key: <REDACTED>\\\" -X GET \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/analytics/dashboard?since=2019-09-08T20:00:00Z&until=2019-09-08T20:02:00Z&continuous=false\\\" | jq .\\n\")), mdx(\"details\", null, mdx(\"summary\", null, \"Response\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"success\\\": true,\\n  \\\"query\\\": {\\n    \\\"since\\\": \\\"2019-09-08T20:00:00Z\\\",\\n    \\\"until\\\": \\\"2019-09-08T20:02:00Z\\\",\\n    \\\"time_delta\\\": 1\\n  },\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"timeseries\\\": [\\n      {\\n        \\\"since\\\": \\\"2019-09-08T20:00:00Z\\\",\\n        \\\"until\\\": \\\"2019-09-08T20:01:00Z\\\",\\n        \\\"requests\\\": {\\n          \\\"all\\\": 15,\\n          \\\"cached\\\": 12,\\n          \\\"uncached\\\": 3,\\n          \\\"ssl\\\": {\\n            \\\"encrypted\\\": 13,\\n            \\\"unencrypted\\\": 2\\n          },\\n          \\\"http_status\\\": {\\n            \\\"200\\\": 4,\\n            \\\"403\\\": 11\\n          },\\n          \\\"content_type\\\": {\\n            \\\"html\\\": 12,\\n            \\\"png\\\": 3\\n          },\\n          \\\"country\\\": {\\n            \\\"CN\\\": 6,\\n            \\\"IE\\\": 1,\\n            \\\"US\\\": 3,\\n            \\\"VN\\\": 5\\n          },\\n          \\\"ip_class\\\": {\\n            \\\"monitoringService\\\": 4,\\n            \\\"noRecord\\\": 11\\n          },\\n          \\\"ssl_protocol\\\": {\\n            \\\"TLSv1.2\\\": 13,\\n            \\\"none\\\": 2\\n          }\\n        },\\n        \\\"bandwidth\\\": {\\n          \\\"all\\\": 312740,\\n          \\\"cached\\\": 309930,\\n          \\\"uncached\\\": 2810,\\n          \\\"ssl\\\": {\\n            \\\"encrypted\\\": 309276,\\n            \\\"unencrypted\\\": 3464\\n          },\\n          \\\"ssl_protocol\\\": {\\n            \\\"TLSv1.2\\\": 13,\\n            \\\"none\\\": 2\\n          },\\n          \\\"content_type\\\": {\\n            \\\"html\\\": 32150,\\n            \\\"png\\\": 280590\\n          },\\n          \\\"country\\\": {\\n            \\\"CN\\\": 10797,\\n            \\\"IE\\\": 98224,\\n            \\\"US\\\": 185176,\\n            \\\"VN\\\": 18543\\n          }\\n        },\\n        \\\"threats\\\": {\\n          \\\"all\\\": 6,\\n          \\\"type\\\": {\\n            \\\"user.ban.ctry\\\": 6\\n          },\\n          \\\"country\\\": {\\n            \\\"CN\\\": 6\\n          }\\n        },\\n        \\\"pageviews\\\": {\\n          \\\"all\\\": 1,\\n          \\\"search_engine\\\": {\\n            \\\"pingdom\\\": 1\\n          }\\n        },\\n        \\\"uniques\\\": {\\n          \\\"all\\\": 11\\n        }\\n      },\\n      {\\n        \\\"since\\\": \\\"2019-09-08T20:01:00Z\\\",\\n        \\\"until\\\": \\\"2019-09-08T20:02:00Z\\\",\\n        \\\"requests\\\": {\\n          \\\"all\\\": 4,\\n          \\\"cached\\\": 1,\\n          \\\"uncached\\\": 3,\\n          \\\"ssl\\\": {\\n            \\\"encrypted\\\": 4,\\n            \\\"unencrypted\\\": 0\\n          },\\n          \\\"http_status\\\": {\\n            \\\"200\\\": 4\\n          },\\n          \\\"content_type\\\": {\\n            \\\"html\\\": 1,\\n            \\\"png\\\": 3\\n          },\\n          \\\"country\\\": {\\n            \\\"CA\\\": 2,\\n            \\\"US\\\": 2\\n          },\\n          \\\"ip_class\\\": {\\n            \\\"monitoringService\\\": 4\\n          },\\n          \\\"ssl_protocol\\\": {\\n            \\\"TLSv1.2\\\": 4\\n          }\\n        },\\n        \\\"bandwidth\\\": {\\n          \\\"all\\\": 283399,\\n          \\\"cached\\\": 280590,\\n          \\\"uncached\\\": 2809,\\n          \\\"ssl\\\": {\\n            \\\"encrypted\\\": 283399,\\n            \\\"unencrypted\\\": 0\\n          },\\n          \\\"ssl_protocol\\\": {\\n            \\\"TLSv1.2\\\": 4\\n          },\\n          \\\"content_type\\\": {\\n            \\\"html\\\": 2809,\\n            \\\"png\\\": 280590\\n          },\\n          \\\"country\\\": {\\n            \\\"CA\\\": 101033,\\n            \\\"US\\\": 182366\\n          }\\n        },\\n        \\\"threats\\\": {\\n          \\\"all\\\": 0,\\n          \\\"type\\\": {},\\n          \\\"country\\\": {}\\n        },\\n        \\\"pageviews\\\": {\\n          \\\"all\\\": 1,\\n          \\\"search_engine\\\": {\\n            \\\"pingdom\\\": 1\\n          }\\n        },\\n        \\\"uniques\\\": {\\n          \\\"all\\\": 4\\n        }\\n      }\\n    ],\\n    \\\"totals\\\": {\\n      \\\"since\\\": \\\"2019-09-08T20:00:00Z\\\",\\n      \\\"until\\\": \\\"2019-09-08T20:02:00Z\\\",\\n      \\\"requests\\\": {\\n        \\\"all\\\": 19,\\n        \\\"cached\\\": 13,\\n        \\\"uncached\\\": 6,\\n        \\\"ssl\\\": {\\n          \\\"encrypted\\\": 17,\\n          \\\"unencrypted\\\": 2\\n        },\\n        \\\"http_status\\\": {\\n          \\\"200\\\": 8,\\n          \\\"403\\\": 11\\n        },\\n        \\\"content_type\\\": {\\n          \\\"html\\\": 13,\\n          \\\"png\\\": 6\\n        },\\n        \\\"country\\\": {\\n          \\\"CA\\\": 2,\\n          \\\"CN\\\": 6,\\n          \\\"IE\\\": 1,\\n          \\\"US\\\": 5,\\n          \\\"VN\\\": 5\\n        },\\n        \\\"ip_class\\\": {\\n          \\\"monitoringService\\\": 8,\\n          \\\"noRecord\\\": 11\\n        },\\n        \\\"ssl_protocol\\\": {\\n          \\\"TLSv1.2\\\": 17,\\n          \\\"none\\\": 2\\n        }\\n      },\\n      \\\"bandwidth\\\": {\\n        \\\"all\\\": 596139,\\n        \\\"cached\\\": 590520,\\n        \\\"uncached\\\": 5619,\\n        \\\"ssl\\\": {\\n          \\\"encrypted\\\": 592675,\\n          \\\"unencrypted\\\": 3464\\n        },\\n        \\\"ssl_protocol\\\": {\\n          \\\"TLSv1.2\\\": 17,\\n          \\\"none\\\": 2\\n        },\\n        \\\"content_type\\\": {\\n          \\\"html\\\": 34959,\\n          \\\"png\\\": 561180\\n        },\\n        \\\"country\\\": {\\n          \\\"CA\\\": 101033,\\n          \\\"CN\\\": 10797,\\n          \\\"IE\\\": 98224,\\n          \\\"US\\\": 367542,\\n          \\\"VN\\\": 18543\\n        }\\n      },\\n      \\\"threats\\\": {\\n        \\\"all\\\": 6,\\n        \\\"type\\\": {\\n          \\\"user.ban.ctry\\\": 6\\n        },\\n        \\\"country\\\": {\\n          \\\"CN\\\": 6\\n        }\\n      },\\n      \\\"pageviews\\\": {\\n        \\\"all\\\": 2,\\n        \\\"search_engine\\\": {\\n          \\\"pingdom\\\": 2\\n        }\\n      },\\n      \\\"uniques\\\": {\\n        \\\"all\\\": 15\\n      }\\n    }\\n  }\\n}\\n\")))), mdx(\"p\", null, \"As you can see from the response, Zone Analytics returns metrics along many dimensions and doesn't give you the option to control what you receive. With GraphQL Analytics, you can ask for only the data that you need. However, if you wanted to get exactly the same metrics and dimensions as you would from Zone Analytics, here is the query you would make:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"{\\n  viewer {\\n    zones(filter: {zoneTag: <ZONE_ID>}) {\\n      httpRequests1mGroups(orderBy: [datetimeMinute_ASC], limit: 100, filter: {datetime_geq: \\\"2019-09-08T20:00:00Z\\\", datetime_lt: \\\"2019-09-08T20:02:00Z\\\"}) {\\n        dimensions {\\n          datetimeMinute\\n        }\\n        sum {\\n          browserMap {\\n            pageViews\\n            uaBrowserFamily\\n          }\\n          bytes\\n          cachedBytes\\n          cachedRequests\\n          contentTypeMap {\\n            bytes\\n            requests\\n            edgeResponseContentTypeName\\n          }\\n          clientSSLMap {\\n            requests\\n            clientSSLProtocol\\n          }\\n          countryMap {\\n            bytes\\n            requests\\n            threats\\n            clientCountryName\\n          }\\n          encryptedBytes\\n          encryptedRequests\\n          ipClassMap {\\n            requests\\n            ipType\\n          }\\n          pageViews\\n          requests\\n          responseStatusMap {\\n            requests\\n            edgeResponseStatus\\n          }\\n          threats\\n          threatPathingMap {\\n            requests\\n            threatPathingName\\n          }\\n        }\\n        uniq {\\n          uniques\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"details\", null, mdx(\"summary\", null, \"Response\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"data\\\": {\\n    \\\"viewer\\\": {\\n      \\\"zones\\\": [\\n        {\\n          \\\"httpRequests1mGroups\\\": [\\n            {\\n              \\\"dimensions\\\": {\\n                \\\"datetimeMinute\\\": \\\"2019-09-08T20:00:00Z\\\"\\n              },\\n              \\\"sum\\\": {\\n                \\\"browserMap\\\": [\\n                  {\\n                    \\\"pageViews\\\": 1,\\n                    \\\"uaBrowserFamily\\\": \\\"PingdomBot\\\"\\n                  }\\n                ],\\n                \\\"bytes\\\": 312740,\\n                \\\"cachedBytes\\\": 309930,\\n                \\\"cachedRequests\\\": 12,\\n                \\\"clientSSLMap\\\": [\\n                  {\\n                    \\\"clientSSLProtocol\\\": \\\"none\\\",\\n                    \\\"requests\\\": 2\\n                  },\\n                  {\\n                    \\\"clientSSLProtocol\\\": \\\"TLSv1.2\\\",\\n                    \\\"requests\\\": 13\\n                  }\\n                ],\\n                \\\"contentTypeMap\\\": [\\n                  {\\n                    \\\"bytes\\\": 280590,\\n                    \\\"edgeResponseContentTypeName\\\": \\\"png\\\",\\n                    \\\"requests\\\": 3\\n                  },\\n                  {\\n                    \\\"bytes\\\": 32150,\\n                    \\\"edgeResponseContentTypeName\\\": \\\"html\\\",\\n                    \\\"requests\\\": 12\\n                  }\\n                ],\\n                \\\"countryMap\\\": [\\n                  {\\n                    \\\"bytes\\\": 10797,\\n                    \\\"clientCountryName\\\": \\\"CN\\\",\\n                    \\\"requests\\\": 6,\\n                    \\\"threats\\\": 6\\n                  },\\n                  {\\n                    \\\"bytes\\\": 98224,\\n                    \\\"clientCountryName\\\": \\\"IE\\\",\\n                    \\\"requests\\\": 1,\\n                    \\\"threats\\\": 0\\n                  },\\n                  {\\n                    \\\"bytes\\\": 185176,\\n                    \\\"clientCountryName\\\": \\\"US\\\",\\n                    \\\"requests\\\": 3,\\n                    \\\"threats\\\": 0\\n                  },\\n                  {\\n                    \\\"bytes\\\": 18543,\\n                    \\\"clientCountryName\\\": \\\"VN\\\",\\n                    \\\"requests\\\": 5,\\n                    \\\"threats\\\": 0\\n                  }\\n                ],\\n                \\\"encryptedBytes\\\": 309276,\\n                \\\"encryptedRequests\\\": 13,\\n                \\\"ipClassMap\\\": [\\n                  {\\n                    \\\"ipType\\\": \\\"monitoringService\\\",\\n                    \\\"requests\\\": 4\\n                  },\\n                  {\\n                    \\\"ipType\\\": \\\"noRecord\\\",\\n                    \\\"requests\\\": 11\\n                  }\\n                ],\\n                \\\"pageViews\\\": 1,\\n                \\\"requests\\\": 15,\\n                \\\"responseStatusMap\\\": [\\n                  {\\n                    \\\"edgeResponseStatus\\\": 200,\\n                    \\\"requests\\\": 4\\n                  },\\n                  {\\n                    \\\"edgeResponseStatus\\\": 403,\\n                    \\\"requests\\\": 11\\n                  }\\n                ],\\n                \\\"threatPathingMap\\\": [\\n                  {\\n                    \\\"requests\\\": 6,\\n                    \\\"threatPathingName\\\": \\\"user.ban.ctry\\\"\\n                  }\\n                ],\\n                \\\"threats\\\": 6\\n              },\\n              \\\"uniq\\\": {\\n                \\\"uniques\\\": 11\\n              }\\n            },\\n            {\\n              \\\"dimensions\\\": {\\n                \\\"datetimeMinute\\\": \\\"2019-09-08T20:01:00Z\\\"\\n              },\\n              \\\"sum\\\": {\\n                \\\"browserMap\\\": [\\n                  {\\n                    \\\"pageViews\\\": 1,\\n                    \\\"uaBrowserFamily\\\": \\\"PingdomBot\\\"\\n                  }\\n                ],\\n                \\\"bytes\\\": 283399,\\n                \\\"cachedBytes\\\": 280590,\\n                \\\"cachedRequests\\\": 1,\\n                \\\"clientSSLMap\\\": [\\n                  {\\n                    \\\"clientSSLProtocol\\\": \\\"TLSv1.2\\\",\\n                    \\\"requests\\\": 4\\n                  }\\n                ],\\n                \\\"contentTypeMap\\\": [\\n                  {\\n                    \\\"bytes\\\": 280590,\\n                    \\\"edgeResponseContentTypeName\\\": \\\"png\\\",\\n                    \\\"requests\\\": 3\\n                  },\\n                  {\\n                    \\\"bytes\\\": 2809,\\n                    \\\"edgeResponseContentTypeName\\\": \\\"html\\\",\\n                    \\\"requests\\\": 1\\n                  }\\n                ],\\n                \\\"countryMap\\\": [\\n                  {\\n                    \\\"bytes\\\": 101033,\\n                    \\\"clientCountryName\\\": \\\"CA\\\",\\n                    \\\"requests\\\": 2,\\n                    \\\"threats\\\": 0\\n                  },\\n                  {\\n                    \\\"bytes\\\": 182366,\\n                    \\\"clientCountryName\\\": \\\"US\\\",\\n                    \\\"requests\\\": 2,\\n                    \\\"threats\\\": 0\\n                  }\\n                ],\\n                \\\"encryptedBytes\\\": 283399,\\n                \\\"encryptedRequests\\\": 4,\\n                \\\"ipClassMap\\\": [\\n                  {\\n                    \\\"ipType\\\": \\\"monitoringService\\\",\\n                    \\\"requests\\\": 4\\n                  }\\n                ],\\n                \\\"pageViews\\\": 1,\\n                \\\"requests\\\": 4,\\n                \\\"responseStatusMap\\\": [\\n                  {\\n                    \\\"edgeResponseStatus\\\": 200,\\n                    \\\"requests\\\": 4\\n                  }\\n                ],\\n                \\\"threatPathingMap\\\": [],\\n                \\\"threats\\\": 0\\n              },\\n              \\\"uniq\\\": {\\n                \\\"uniques\\\": 4\\n              }\\n            }\\n          ]\\n        }\\n      ]\\n    }\\n  },\\n  \\\"errors\\\": null\\n}\\n\")))), mdx(\"p\", null, \"Notice that you can specify the request time period using a data set filter (see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/features/filtering/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Filtering\")), \"). The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"continuous\"), \" parameter is no longer needed because GraphQL Analytics is designed to provide data as soon as it is available.\"), mdx(\"p\", null, \"Also, if you want to get the totals for a particular period, rather than a breakdown by time period, simply remove the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"datetimeMinute\"), \" field under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dimensions\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"36216e01-7bd0-5fa0-ab06-f2fb7cbb3406","fields":{"slug":"/graphql-api/migration-guides/zone-analytics"},"frontmatter":{"title":"","type":null,"order":11,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Zone Analytics to GraphQL Analytics","depth":1}],"tableOfContents":{"items":[{"url":"#zone-analytics-to-graphql-analytics","title":"Zone Analytics to GraphQL Analytics"}]},"parent":{"modifiedTime":"2021-10-26","relativePath":"graphql-api/migration-guides/zone-analytics/index.md"}}},"staticQueryHashes":["1052658729","2814688963","32046230","338033027","811020565"]}