{"componentChunkName":"component---src-components-mdx-custom-renderer-js","path":"/graphql-api/migration-guides/network-analytics-v2","result":{"data":{"mdx":{"id":"855cb84a-41b1-5d92-b489-2960862209c6","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 13,\n  \"type\": \"overview\",\n  \"pcx-content-type\": \"reference\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar TableWrap = makeShortcode(\"TableWrap\");\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"network-analytics-v1-to-network-analytics-v2\"\n  }, \"Network Analytics v1 to Network Analytics v2\"), mdx(\"p\", null, \"In early 2020, Cloudflare released the first version of the Network Analytics dashboard and its corresponding API. The second version was made available on September 13, 2021. Users should only use the newer version, Network Analytics v2 (NAv2). Network Analytics v1 (NAv1) is planned to be deprecated on March 31, 2022.\"), mdx(\"h2\", {\n    \"id\": \"before-you-start\"\n  }, \"Before you start\"), mdx(\"p\", null, \"Learn more about the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2/about\"\n  }, \"concepts introduced in Network Analytics v2\"), \".\"), mdx(\"h2\", {\n    \"id\": \"feature-comparison\"\n  }, \"Feature comparison\"), mdx(\"p\", null, \"The following table compares the features of NAv1 and NAv2:\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Feature\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"NAv1\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"NAv2\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Sampling rate\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"1/8,192 packets\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Varies between 1/100 and 1/10,000 packets,\", mdx(\"br\", null), \" depending on the mitigation service\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Sampling method\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Core Sample Enrichment\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2/about#edge-sample-enrichment\"\n  }, \"Edge Sample Enrichment\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Historical data retention method\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Aggregated roll-ups\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2/about#adaptive-bitrate-sampling\"\n  }, \"Adaptive Bitrate\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Retention period\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"1-min roll-ups: 30 days\", mdx(\"br\", null), \"1-hour roll-ups: 6 months\", mdx(\"br\", null), \"1-day roll-ups: 1 year\", mdx(\"br\", null), \"Attack roll-ups: 1 year\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"All nodes: 90 days\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Attack mitigation systems\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"dosd and gatebot\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"dosd, gatebot, flowtrackd\", \"*\", \", and Magic Firewall\", \"*\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Examples of new fields\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"n/a\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Rule ID\", mdx(\"br\", null), \"GRE tunnel ID\", mdx(\"br\", null), \"Packet size\"))))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"* Applicable only for Magic Transit customers.\")), mdx(Aside, {\n    type: \"note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"attackId\"), \" field value may be different between NAv1 and NAv2 for the same attack.\")), mdx(\"h2\", {\n    \"id\": \"node-comparison\"\n  }, \"Node comparison\"), mdx(\"p\", null, \"NAv2 uses the same API endpoint but makes use of new nodes. While NAv1 has three nodes for aggregated roll-ups for all traffic and attacks, and one node for attacks, NAv2 has one node for all traffic and attacks, and four separate nodes for attacks that vary based on the mitigation system.\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Node type\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"NAv1\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"NAv2 for Magic Transit\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"NAv2 for Spectrum\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Main node(s)\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1mGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1hGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1dGroups\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicTransitNetworkAnalyticsAdaptiveGroups\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"spectrumNetworkAnalyticsAdaptiveGroups\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Attack node(s)\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1mAttacksGroups\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdAttackAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"flowtrackdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicFirewallNetworkAnalyticsAdaptiveGroups\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdAttackAnalyticsAdaptiveGroups\")))))), mdx(\"p\", null, \"Each row represents one packet sample. The data is sampled at Cloudflare\\u2019s edge at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2/node-reference\"\n  }, \"various rates\"), \". You can also query the sample rate from the nodes using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sample_interval\"), \" field.\"), mdx(\"p\", null, \"For reference information on NAv2 nodes, refer to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2/node-reference\"\n  }, \"NAv2 node reference\"), \".\"), mdx(\"h2\", {\n    \"id\": \"schema-comparison\"\n  }, \"Schema comparison\"), mdx(\"p\", null, \"Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2/schema-map\"\n  }, \"NAv1 to NAv2 schema map\"), \" for a mapping of schema fields from NAv1 nodes to NAv2 nodes. Follow this recommended mapping when migrating to NAv2.\"), mdx(\"h2\", {\n    \"id\": \"example\"\n  }, \"Example\"), mdx(\"p\", null, \"The following example queries the top 20 logs of traffic dropped by Magic Firewall within a given time range, ordered by destination IP address.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-graphql\"\n  }, \"{\\n  viewer\\n  {\\n    accounts(filter: {accountTag: \\\"<REDACTED>\\\"})\\n    {\\n      magicTransitNetworkAnalyticsAdaptiveGroups(\\n        filter: {\\n          datetime_gt: \\\"2021-10-01T00:00:00Z\\\",\\n          datetime_lt: \\\"2021-10-05T00:00:00Z\\\",\\n          outcome_like: \\\"drop\\\",\\n          mitigationSystem_neq: \\\"magic-firewall\\\"\\n        },\\n        limit: 20,\\n        orderBy: [ipDestinationAddress_ASC])\\n      {\\n        dimensions {\\n          outcome\\n          mitigationSystem\\n          ipSourceAddress\\n          ipDestinationAddress\\n          ipProtocol\\n          destinationPort\\n        }\\n      }\\n    }\\n  }\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":"overview","updated":null}}},"pageContext":{"id":"855cb84a-41b1-5d92-b489-2960862209c6","fields":{"slug":"/graphql-api/migration-guides/network-analytics-v2"},"frontmatter":{"title":"","type":"overview","order":13,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Network Analytics v1 to Network Analytics v2","depth":1}],"tableOfContents":{"items":[{"url":"#network-analytics-v1-to-network-analytics-v2","title":"Network Analytics v1 to Network Analytics v2","items":[{"url":"#before-you-start","title":"Before you start"},{"url":"#feature-comparison","title":"Feature comparison"},{"url":"#node-comparison","title":"Node comparison"},{"url":"#schema-comparison","title":"Schema comparison"},{"url":"#example","title":"Example"}]}]},"parent":{"modifiedTime":"2021-10-26","relativePath":"graphql-api/migration-guides/network-analytics-v2/index.md"}}},"staticQueryHashes":["1052658729","2814688963","32046230","338033027","811020565"]}