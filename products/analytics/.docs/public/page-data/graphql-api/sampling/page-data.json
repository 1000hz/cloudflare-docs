{"componentChunkName":"component---src-components-mdx-custom-renderer-js","path":"/graphql-api/sampling","result":{"data":{"mdx":{"id":"0a7308b5-5cf0-596d-8cfd-1a7520787bc9","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 40,\n  \"pcx-content-type\": \"reference\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar TableWrap = makeShortcode(\"TableWrap\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"sampling\"\n  }, \"Sampling\"), mdx(\"h2\", {\n    \"id\": \"overview\"\n  }, \"Overview\"), mdx(\"p\", null, \"In a small number of cases, the analytics provided on the Cloudflare dashboard and GraphQL Analytics API are based on a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"sample\"), \"\\u2014a subset of the data set. In these cases, Cloudflare Analytics returns an estimate derived from the sampled value. For example, suppose that during an attack the sampling rate is 10% and 5,000 events are sampled. Cloudflare will estimate 50,000 total events (5,000 \\xD7 10) and report this value in Analytics.\"), mdx(\"h2\", {\n    \"id\": \"sampled-data-sets\"\n  }, \"Sampled data sets\"), mdx(\"p\", null, \"Cloudflare Analytics builds the following data sets from sampled data:\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Data set\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Nodes\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Firewall Activity Log\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"firewallEventsAdaptive\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"firewallEventsAdaptiveByTimeGroups\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Firewall Analytics\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"firewallEventsAdaptiveGroups\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Firewall Rule Preview\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"firewallRulePreviewGroups\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Network Analytics\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1mGroups\"), \"*\", mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1hGroups\"), \"*\", mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1dGroups\"), \"*\", mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1mAttacksGroups\"), \"*\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Network Analytics v2\", mdx(\"br\", null), \" for Magic Transit customers\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicTransitNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdAttackAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"flowtrackdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicFirewallNetworkAnalyticsAdaptiveGroups\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Network Analytics v2\", mdx(\"br\", null), \" for Spectrum customers\", mdx(\"br\", null), \" (Enterprise plans only)\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"spectrumNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), \" \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdAttackAnalyticsAdaptiveGroups\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Workers Metrics\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"workersInvocationsAdaptive\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Magic Firewall Analytics\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicFirewallSamplesAdaptiveGroups\")))))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"* These nodes are deprecated. Refer to \", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"/graphql-api/features/data-sets#deprecated-data-nodes\"\n  }, \"Data Sets\"), \" for more information.\")), mdx(\"p\", null, \"The presence of sampled data is called out in the Cloudflare dashboard and in the description of the data set in the API.\"), mdx(\"h2\", {\n    \"id\": \"why-sampling-is-applied\"\n  }, \"Why sampling is applied\"), mdx(\"p\", null, \"Analytics is designed to provide requested data, at the appropriate level of detail, as quickly as possible. Sampling allows Cloudflare to deliver analytics within seconds, even when data sets scale quickly and unpredictably, such as a burst of Firewall events generated during an attack. And because the volume of underlying data is large, the value estimated from the sample should still be statistically significant\\u2013meaning you can rely on sampled data with a high degree of confidence. Without sampling, it might take several minutes or longer to answer a query\\u2014a long time to wait when validating mitigation efforts.\"), mdx(\"h2\", {\n    \"id\": \"types-of-sampling\"\n  }, \"Types of sampling\"), mdx(\"h3\", {\n    \"id\": \"adaptive-sampling\"\n  }, \"Adaptive sampling\"), mdx(\"p\", null, \"Cloudflare almost always uses \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"adaptive sampling\"), \", which means the sample rate fluctuates depending on the volume of data ingested or queried. If the number of records is relatively small, sampling is not used. However, as the volume of records grows larger, progressively lower sample rates are applied. Firewall Analytics and the Firewall Event Log follow this model. Data nodes that use adaptive sampling are easy to identify by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Adaptive\"), \" suffix in the node name, as in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"firewallEventsAdaptive\"), \".\"), mdx(\"h3\", {\n    \"id\": \"fixed-sampling\"\n  }, \"Fixed sampling\"), mdx(\"p\", null, \"The following data nodes are based on fixed sampling, where the sample rate does not vary:\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Data set\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"right\"\n  }, \"Rate\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Notes\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Firewall Rules Preview\", mdx(\"br\", null), mdx(\"p\", null, mdx(\"b\", null, \"Nodes:\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"firewallRulePreviewGroups\"))), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"right\"\n  }, \"1%\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Use with caution. A 1% sample rate does not provide accurate estimates for data sets smaller than a certain threshold, a scenario the Cloudflare Dashboard calls out explicitly but the API does not.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Network Analytics\", mdx(\"br\", null), mdx(\"p\", null, mdx(\"b\", null, \"Nodes:\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1mGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1hGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1dGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ipFlows1mAttacksGroups\"))), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"right\"\n  }, \"0.012%\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Sampling rate is in terms of packet count (1 of every 8,192 packets).\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Network Analytics v2\", mdx(\"br\", null), mdx(\"p\", null, mdx(\"b\", null, \"Nodes:\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dosdAttackAnalyticsAdaptiveGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"flowtrackdNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicFirewallNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"magicTransitNetworkAnalyticsAdaptiveGroups\"), mdx(\"br\", null), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"spectrumNetworkAnalyticsAdaptiveGroups\"))), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"right\"\n  }, \"Depends on the node\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Sample rate is 1/100 for Magic Firewall, 1/10,000 for dosd, and dynamic for flowtrackd. Refer to the \", mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"/graphql-api/migration-guides/network-analytics-v2#node-comparison\"\n  }, \"NAv2 migration guide\"), \" for details.\"))))), mdx(\"h2\", {\n    \"id\": \"access-to-raw-data\"\n  }, \"Access to raw data\"), mdx(\"p\", null, \"Because sampling is primarily adaptive and automatically adjusts to provide an accurate estimate, the sampling rate cannot be directly controlled. Enterprise customers have access to raw data via Cloudflare Logs.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"0a7308b5-5cf0-596d-8cfd-1a7520787bc9","fields":{"slug":"/graphql-api/sampling"},"frontmatter":{"title":"","type":null,"order":40,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Sampling","depth":1}],"tableOfContents":{"items":[{"url":"#sampling","title":"Sampling","items":[{"url":"#overview","title":"Overview"},{"url":"#sampled-data-sets","title":"Sampled data sets"},{"url":"#why-sampling-is-applied","title":"Why sampling is applied"},{"url":"#types-of-sampling","title":"Types of sampling","items":[{"url":"#adaptive-sampling","title":"Adaptive sampling"},{"url":"#fixed-sampling","title":"Fixed sampling"}]},{"url":"#access-to-raw-data","title":"Access to raw data"}]}]},"parent":{"modifiedTime":"2021-10-26","relativePath":"graphql-api/sampling/index.md"}}},"staticQueryHashes":["1052658729","2814688963","32046230","338033027","811020565"]}