{"expireTime":9007200889996144000,"key":"gatsby-plugin-mdx-entire-payload-68b020697a159623e37ab6450fbc38cc-","val":{"mdast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Querying basics","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":18,"offset":18},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":18,"offset":18},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Structure of a GraphQL query","position":{"start":{"line":4,"column":4,"offset":23},"end":{"line":4,"column":32,"offset":51},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":20},"end":{"line":4,"column":32,"offset":51},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"GraphQL structures data as a graph. GraphQL uses a schema to define the objects and their hierarchy in your data graph. You can explore the edges of the graph by using queries to get the data you need. These queries must respect the structure of the schema.","position":{"start":{"line":6,"column":1,"offset":53},"end":{"line":6,"column":258,"offset":310},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":53},"end":{"line":6,"column":258,"offset":310},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"At the core of a GraphQL query is a ","position":{"start":{"line":8,"column":1,"offset":312},"end":{"line":8,"column":37,"offset":348},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"node","position":{"start":{"line":8,"column":38,"offset":349},"end":{"line":8,"column":42,"offset":353},"indent":[]}}],"position":{"start":{"line":8,"column":37,"offset":348},"end":{"line":8,"column":43,"offset":354},"indent":[]}},{"type":"text","value":", followed by its ","position":{"start":{"line":8,"column":43,"offset":354},"end":{"line":8,"column":61,"offset":372},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"fields","position":{"start":{"line":8,"column":62,"offset":373},"end":{"line":8,"column":68,"offset":379},"indent":[]}}],"position":{"start":{"line":8,"column":61,"offset":372},"end":{"line":8,"column":69,"offset":380},"indent":[]}},{"type":"text","value":". The node is an object of a certain ","position":{"start":{"line":8,"column":69,"offset":380},"end":{"line":8,"column":106,"offset":417},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"type","position":{"start":{"line":8,"column":107,"offset":418},"end":{"line":8,"column":111,"offset":422},"indent":[]}}],"position":{"start":{"line":8,"column":106,"offset":417},"end":{"line":8,"column":112,"offset":423},"indent":[]}},{"type":"text","value":"; the type specifies the fields that make up the object.","position":{"start":{"line":8,"column":112,"offset":423},"end":{"line":8,"column":168,"offset":479},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":312},"end":{"line":8,"column":168,"offset":479},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A field can be another node, in which case the appropriate query would contain nested elements. Some nodes look like functions that can take on arguments to limit the scope of what they can act on. You can apply filters at each node.","position":{"start":{"line":10,"column":1,"offset":481},"end":{"line":10,"column":234,"offset":714},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":481},"end":{"line":10,"column":234,"offset":714},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Query against the Cloudflare GraphQL schema","position":{"start":{"line":12,"column":4,"offset":719},"end":{"line":12,"column":47,"offset":762},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":716},"end":{"line":12,"column":47,"offset":762},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A typical query against the Cloudflare GraphQL schema is made up of five components:","position":{"start":{"line":14,"column":1,"offset":764},"end":{"line":14,"column":85,"offset":848},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":764},"end":{"line":14,"column":85,"offset":848},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"query","position":{"start":{"line":16,"column":3,"offset":852},"end":{"line":16,"column":10,"offset":859},"indent":[]}},{"type":"text","value":" - The root node.","position":{"start":{"line":16,"column":10,"offset":859},"end":{"line":16,"column":27,"offset":876},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":852},"end":{"line":16,"column":27,"offset":876},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":850},"end":{"line":16,"column":27,"offset":876},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"viewer","position":{"start":{"line":17,"column":3,"offset":879},"end":{"line":17,"column":11,"offset":887},"indent":[]}},{"type":"text","value":" - A nested node indicating to GraphQL that you want to view the results. The ","position":{"start":{"line":17,"column":11,"offset":887},"end":{"line":17,"column":89,"offset":965},"indent":[]}},{"type":"inlineCode","value":"viewer","position":{"start":{"line":17,"column":89,"offset":965},"end":{"line":17,"column":97,"offset":973},"indent":[]}},{"type":"text","value":" component represents the initial node of the user running the query.","position":{"start":{"line":17,"column":97,"offset":973},"end":{"line":17,"column":166,"offset":1042},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":879},"end":{"line":17,"column":166,"offset":1042},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":877},"end":{"line":17,"column":166,"offset":1042},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"zones","position":{"start":{"line":18,"column":3,"offset":1045},"end":{"line":18,"column":10,"offset":1052},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":18,"column":10,"offset":1052},"end":{"line":18,"column":14,"offset":1056},"indent":[]}},{"type":"inlineCode","value":"account","position":{"start":{"line":18,"column":14,"offset":1056},"end":{"line":18,"column":23,"offset":1065},"indent":[]}},{"type":"text","value":" - A nested node indicating the domain area or account you want to query against. The ","position":{"start":{"line":18,"column":23,"offset":1065},"end":{"line":18,"column":109,"offset":1151},"indent":[]}},{"type":"inlineCode","value":"viewer","position":{"start":{"line":18,"column":109,"offset":1151},"end":{"line":18,"column":117,"offset":1159},"indent":[]}},{"type":"text","value":" can access one or more zones or accounts. Each zone or account contains a collection of data sets.","position":{"start":{"line":18,"column":117,"offset":1159},"end":{"line":18,"column":216,"offset":1258},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1045},"end":{"line":18,"column":216,"offset":1258},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1043},"end":{"line":18,"column":216,"offset":1258},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Leaf node","position":{"start":{"line":19,"column":5,"offset":1263},"end":{"line":19,"column":14,"offset":1272},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1261},"end":{"line":19,"column":16,"offset":1274},"indent":[]}},{"type":"text","value":" - This specifies the data set you want to query against in a zone or account. ","position":{"start":{"line":19,"column":16,"offset":1274},"end":{"line":19,"column":95,"offset":1353},"indent":[]}},{"type":"inlineCode","value":"firewallEventsAdaptive","position":{"start":{"line":19,"column":95,"offset":1353},"end":{"line":19,"column":119,"offset":1377},"indent":[]}},{"type":"text","value":" is an example of a leaf node that represents a data set for firewall events in a ","position":{"start":{"line":19,"column":119,"offset":1377},"end":{"line":19,"column":201,"offset":1459},"indent":[]}},{"type":"inlineCode","value":"zone","position":{"start":{"line":19,"column":201,"offset":1459},"end":{"line":19,"column":207,"offset":1465},"indent":[]}},{"type":"text","value":" node.","position":{"start":{"line":19,"column":207,"offset":1465},"end":{"line":19,"column":213,"offset":1471},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1261},"end":{"line":19,"column":213,"offset":1471},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1259},"end":{"line":19,"column":213,"offset":1471},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Field","position":{"start":{"line":20,"column":5,"offset":1476},"end":{"line":20,"column":10,"offset":1481},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1474},"end":{"line":20,"column":12,"offset":1483},"indent":[]}},{"type":"text","value":" - The fields in a query specify the set of metrics that you want to fetch. The ","position":{"start":{"line":20,"column":12,"offset":1483},"end":{"line":20,"column":92,"offset":1563},"indent":[]}},{"type":"inlineCode","value":"firewallEventsAdaptive","position":{"start":{"line":20,"column":92,"offset":1563},"end":{"line":20,"column":116,"offset":1587},"indent":[]}},{"type":"text","value":" leaf node includes the ","position":{"start":{"line":20,"column":116,"offset":1587},"end":{"line":20,"column":140,"offset":1611},"indent":[]}},{"type":"inlineCode","value":"clientIP","position":{"start":{"line":20,"column":140,"offset":1611},"end":{"line":20,"column":150,"offset":1621},"indent":[]}},{"type":"text","value":" field. If your leaf node queries requests, possible fields would include response bytes or the time at which requests were received.","position":{"start":{"line":20,"column":150,"offset":1621},"end":{"line":20,"column":283,"offset":1754},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1474},"end":{"line":20,"column":283,"offset":1754},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1472},"end":{"line":20,"column":283,"offset":1754},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":850},"end":{"line":20,"column":283,"offset":1754},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The following example shows the format for a firewall query:","position":{"start":{"line":22,"column":1,"offset":1756},"end":{"line":22,"column":61,"offset":1816},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1756},"end":{"line":22,"column":61,"offset":1816},"indent":[]}},{"type":"code","lang":"code","meta":null,"value":"\nquery{\n  viewer {\n      zones(filter: {...}) {\n         firewallEventsAdaptive( limit: 10, orderBy: [...], filter: {...} ) {\n           datetime, clientCountryName, action, ...\n         }\n      }\n  }\n}","position":{"start":{"line":24,"column":1,"offset":1818},"end":{"line":35,"column":4,"offset":2032},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Example Query","position":{"start":{"line":37,"column":5,"offset":2038},"end":{"line":37,"column":18,"offset":2051},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2034},"end":{"line":37,"column":18,"offset":2051},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following query searches data from a zone for firewall events that occurred during a time interval. It sorts the results, limits the amount of results returned, and displays a set of fields for each firewall event.","position":{"start":{"line":39,"column":1,"offset":2053},"end":{"line":39,"column":219,"offset":2271},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2053},"end":{"line":39,"column":219,"offset":2271},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Query Firewall events for a specific time interval\n---\nquery\n{\n  viewer\n  {\n    zones(filter: { zoneTag: \"11111111\"})\n    {\n      firewallEventsAdaptive(\n          filter: {\n            datetime_gt: \"2020-08-03T02:07:05Z\",\n            datetime_lt: \"2020-08-03T17:07:05Z\" \n          },\n          limit: 2,\n          orderBy: [datetime_DESC, rayName_DESC])\n      {\n        action\n        datetime\n        rayName\n        clientRequestHTTPHost\n        userAgent\n      }\n    }\n  }\n}","position":{"start":{"line":41,"column":1,"offset":2273},"end":{"line":68,"column":4,"offset":2775},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"zones(filter: { zoneTag: \"11111111\"})","position":{"start":{"line":70,"column":3,"offset":2779},"end":{"line":70,"column":42,"offset":2818},"indent":[]}},{"type":"text","value":" confines the query to search to one zone.","position":{"start":{"line":70,"column":42,"offset":2818},"end":{"line":70,"column":84,"offset":2860},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":2779},"end":{"line":70,"column":84,"offset":2860},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2777},"end":{"line":70,"column":84,"offset":2860},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"firewallEventsAdaptive","position":{"start":{"line":71,"column":3,"offset":2863},"end":{"line":71,"column":27,"offset":2887},"indent":[]}},{"type":"text","value":" is the large data set that you want to query against. The set of data returned is defined by the following:","position":{"start":{"line":71,"column":27,"offset":2887},"end":{"line":71,"column":135,"offset":2995},"indent":[]}}],"position":{"start":{"line":71,"column":3,"offset":2863},"end":{"line":71,"column":135,"offset":2995},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"filter:{}","position":{"start":{"line":72,"column":7,"offset":3002},"end":{"line":72,"column":18,"offset":3013},"indent":[]}},{"type":"text","value":" limits the scope to firewall events between two times: ","position":{"start":{"line":72,"column":18,"offset":3013},"end":{"line":72,"column":74,"offset":3069},"indent":[]}},{"type":"inlineCode","value":"datetime_gt","position":{"start":{"line":72,"column":74,"offset":3069},"end":{"line":72,"column":87,"offset":3082},"indent":[]}},{"type":"text","value":" (greater than) and ","position":{"start":{"line":72,"column":87,"offset":3082},"end":{"line":72,"column":107,"offset":3102},"indent":[]}},{"type":"inlineCode","value":"datetime_lt","position":{"start":{"line":72,"column":107,"offset":3102},"end":{"line":72,"column":120,"offset":3115},"indent":[]}},{"type":"text","value":" (less than).","position":{"start":{"line":72,"column":120,"offset":3115},"end":{"line":72,"column":133,"offset":3128},"indent":[]}}],"position":{"start":{"line":72,"column":7,"offset":3002},"end":{"line":72,"column":133,"offset":3128},"indent":[]}}],"position":{"start":{"line":72,"column":3,"offset":2998},"end":{"line":72,"column":133,"offset":3128},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"limit: 2","position":{"start":{"line":73,"column":7,"offset":3135},"end":{"line":73,"column":17,"offset":3145},"indent":[]}},{"type":"text","value":" limits the results to 2 (the maximum value is 10,000).","position":{"start":{"line":73,"column":17,"offset":3145},"end":{"line":73,"column":72,"offset":3200},"indent":[]}}],"position":{"start":{"line":73,"column":7,"offset":3135},"end":{"line":73,"column":72,"offset":3200},"indent":[]}}],"position":{"start":{"line":73,"column":3,"offset":3131},"end":{"line":73,"column":72,"offset":3200},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"orderBy","position":{"start":{"line":74,"column":7,"offset":3207},"end":{"line":74,"column":16,"offset":3216},"indent":[]}},{"type":"text","value":" sorts the results, first by ","position":{"start":{"line":74,"column":16,"offset":3216},"end":{"line":74,"column":45,"offset":3245},"indent":[]}},{"type":"inlineCode","value":"datetime_DESC","position":{"start":{"line":74,"column":45,"offset":3245},"end":{"line":74,"column":60,"offset":3260},"indent":[]}},{"type":"text","value":", the datetime field , in descending order, and then by the rayname, also in descending order.","position":{"start":{"line":74,"column":60,"offset":3260},"end":{"line":74,"column":154,"offset":3354},"indent":[]}}],"position":{"start":{"line":74,"column":7,"offset":3207},"end":{"line":74,"column":154,"offset":3354},"indent":[]}}],"position":{"start":{"line":74,"column":3,"offset":3203},"end":{"line":74,"column":154,"offset":3354},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The list of fields: ","position":{"start":{"line":75,"column":7,"offset":3361},"end":{"line":75,"column":27,"offset":3381},"indent":[]}},{"type":"inlineCode","value":"action","position":{"start":{"line":75,"column":27,"offset":3381},"end":{"line":75,"column":35,"offset":3389},"indent":[]}},{"type":"text","value":" (Allow, Block, Challenge), ","position":{"start":{"line":75,"column":35,"offset":3389},"end":{"line":75,"column":63,"offset":3417},"indent":[]}},{"type":"inlineCode","value":"datetime","position":{"start":{"line":75,"column":63,"offset":3417},"end":{"line":75,"column":73,"offset":3427},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":75,"column":73,"offset":3427},"end":{"line":75,"column":75,"offset":3429},"indent":[]}},{"type":"inlineCode","value":"rayName","position":{"start":{"line":75,"column":75,"offset":3429},"end":{"line":75,"column":84,"offset":3438},"indent":[]}},{"type":"text","value":" (the RayID), ","position":{"start":{"line":75,"column":84,"offset":3438},"end":{"line":75,"column":98,"offset":3452},"indent":[]}},{"type":"inlineCode","value":"clientRequestHTTPHost","position":{"start":{"line":75,"column":98,"offset":3452},"end":{"line":75,"column":121,"offset":3475},"indent":[]}},{"type":"text","value":" (the host the client requested), and ","position":{"start":{"line":75,"column":121,"offset":3475},"end":{"line":75,"column":159,"offset":3513},"indent":[]}},{"type":"inlineCode","value":"userAgent","position":{"start":{"line":75,"column":159,"offset":3513},"end":{"line":75,"column":170,"offset":3524},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":75,"column":170,"offset":3524},"end":{"line":75,"column":171,"offset":3525},"indent":[]}}],"position":{"start":{"line":75,"column":7,"offset":3361},"end":{"line":75,"column":171,"offset":3525},"indent":[]}}],"position":{"start":{"line":75,"column":3,"offset":3357},"end":{"line":75,"column":171,"offset":3525},"indent":[]}}],"position":{"start":{"line":72,"column":3,"offset":2998},"end":{"line":75,"column":171,"offset":3525},"indent":[3,3,3]}}],"position":{"start":{"line":71,"column":1,"offset":2861},"end":{"line":75,"column":171,"offset":3525},"indent":[1,1,1,1]}}],"position":{"start":{"line":70,"column":1,"offset":2777},"end":{"line":75,"column":171,"offset":3525},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can send the query with an API call or by clicking ","position":{"start":{"line":77,"column":1,"offset":3527},"end":{"line":77,"column":56,"offset":3582},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Play","position":{"start":{"line":77,"column":58,"offset":3584},"end":{"line":77,"column":62,"offset":3588},"indent":[]}}],"position":{"start":{"line":77,"column":56,"offset":3582},"end":{"line":77,"column":64,"offset":3590},"indent":[]}},{"type":"text","value":" in the GraphiQL client. The format of the response is in JSON:","position":{"start":{"line":77,"column":64,"offset":3590},"end":{"line":77,"column":127,"offset":3653},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":3527},"end":{"line":77,"column":127,"offset":3653},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Query response from firewallEventsAdaptive\n---\n{\n  \"data\": {\n    \"viewer\": {\n      \"zones\": [\n        {\n          \"firewallEventsAdaptive\": [\n            {\n              \"action\": \"log\",\n              \"clientRequestHTTPHost\": \"cloudflare.guru\",\n              \"datetime\": \"2020-08-03T17:07:03Z\",\n              \"rayName\": \"5bd1a1fc584357ed\",\n              \"userAgent\": \"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 08c774cde2f3c385)\"\n            },\n            {\n              \"action\": \"log\",\n              \"clientRequestHTTPHost\": \"cloudflare.guru\",\n              \"datetime\": \"2020-08-03T17:07:01Z\",\n              \"rayName\": \"5bd1a1ef3bb5d296\",\n              \"userAgent\": \"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 764497f790f6a070)\"\n            }\n          ]\n        }\n      ]\n    }\n  },\n  \"errors\": null\n}","position":{"start":{"line":79,"column":1,"offset":3655},"end":{"line":110,"column":4,"offset":4595},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Query two data sets in a single API call","position":{"start":{"line":112,"column":4,"offset":4600},"end":{"line":112,"column":44,"offset":4640},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":4597},"end":{"line":112,"column":44,"offset":4640},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This example query employs a broad range of GraphQL functionality. The example queries two data sets for the specified zone simultaneously, applies filters and aggregations, and sets a limit on the number of records returned. (Note that you must include the ","position":{"start":{"line":114,"column":1,"offset":4642},"end":{"line":114,"column":259,"offset":4900},"indent":[]}},{"type":"inlineCode","value":"limit","position":{"start":{"line":114,"column":259,"offset":4900},"end":{"line":114,"column":266,"offset":4907},"indent":[]}},{"type":"text","value":" argument, which can be equal or up to 10,000.)","position":{"start":{"line":114,"column":266,"offset":4907},"end":{"line":114,"column":313,"offset":4954},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4642},"end":{"line":114,"column":313,"offset":4954},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Query two data sets simultaneously\n---\nquery {\n  viewer {\n    zones(filter: {zoneTag: \"<your zone ID>\"}) {\n      httpRequests1mGroups(limit: 5, filter: { datetime_gt: \"2019-02-01T04:00:00Z\", datetime_lt: \"2019-02-01T06:00:00Z\"}) {\n        sum {\n          countryMap {\n            bytes\n            clientCountryName\n          }\n        }\n        dimensions {\n          date\n          datetime\n        }\n      }\n      firewallEventsAdaptiveGroups(limit: 10, filter: { datetime_gt: \"2019-02-01T04:00:00Z\", datetime_lt: \"2019-02-01T06:00:00Z\"}) {\n        count\n        dimensions {\n          clientCountryName\n          clientAsn\n          datetimeHour\n        }\n      }\n    }\n  }\n}","position":{"start":{"line":116,"column":1,"offset":4956},"end":{"line":146,"column":4,"offset":5659},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"<Aside type='note' header='Note'>","position":{"start":{"line":148,"column":1,"offset":5661},"end":{"line":148,"column":34,"offset":5694},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is only an example. You must specify the ","position":{"start":{"line":150,"column":1,"offset":5696},"end":{"line":150,"column":47,"offset":5742},"indent":[]}},{"type":"jsx","value":"<code>","position":{"start":{"line":150,"column":47,"offset":5742},"end":{"line":150,"column":53,"offset":5748},"indent":[]}},{"type":"text","value":"zoneTag","position":{"start":{"line":150,"column":53,"offset":5748},"end":{"line":150,"column":60,"offset":5755},"indent":[]}},{"type":"jsx","value":"</code>","position":{"start":{"line":150,"column":60,"offset":5755},"end":{"line":150,"column":67,"offset":5762},"indent":[]}},{"type":"text","value":" for your domain. Your Cloudflare dashboard lists your Zone ID (","position":{"start":{"line":150,"column":67,"offset":5762},"end":{"line":150,"column":131,"offset":5826},"indent":[]}},{"type":"jsx","value":"<code>","position":{"start":{"line":150,"column":131,"offset":5826},"end":{"line":150,"column":137,"offset":5832},"indent":[]}},{"type":"text","value":"zoneTag","position":{"start":{"line":150,"column":137,"offset":5832},"end":{"line":150,"column":144,"offset":5839},"indent":[]}},{"type":"jsx","value":"</code>","position":{"start":{"line":150,"column":144,"offset":5839},"end":{"line":150,"column":151,"offset":5846},"indent":[]}},{"type":"text","value":") on the ","position":{"start":{"line":150,"column":151,"offset":5846},"end":{"line":150,"column":160,"offset":5855},"indent":[]}},{"type":"jsx","value":"<em>","position":{"start":{"line":150,"column":160,"offset":5855},"end":{"line":150,"column":164,"offset":5859},"indent":[]}},{"type":"text","value":"Overview","position":{"start":{"line":150,"column":164,"offset":5859},"end":{"line":150,"column":172,"offset":5867},"indent":[]}},{"type":"jsx","value":"</em>","position":{"start":{"line":150,"column":172,"offset":5867},"end":{"line":150,"column":177,"offset":5872},"indent":[]}},{"type":"text","value":" page.","position":{"start":{"line":150,"column":177,"offset":5872},"end":{"line":150,"column":183,"offset":5878},"indent":[]}}],"position":{"start":{"line":150,"column":1,"offset":5696},"end":{"line":150,"column":183,"offset":5878},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":152,"column":1,"offset":5880},"end":{"line":152,"column":9,"offset":5888},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Introspection","position":{"start":{"line":154,"column":4,"offset":5893},"end":{"line":154,"column":17,"offset":5906},"indent":[]}}],"position":{"start":{"line":154,"column":1,"offset":5890},"end":{"line":154,"column":17,"offset":5906},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The GraphQL API offers ","position":{"start":{"line":156,"column":1,"offset":5908},"end":{"line":156,"column":24,"offset":5931},"indent":[]}},{"type":"link","title":null,"url":"https://graphql.org/learn/introspection/","children":[{"type":"text","value":"introspection","position":{"start":{"line":156,"column":25,"offset":5932},"end":{"line":156,"column":38,"offset":5945},"indent":[]}}],"position":{"start":{"line":156,"column":24,"offset":5931},"end":{"line":156,"column":81,"offset":5988},"indent":[]}},{"type":"text","value":", which allows you to explore the graph (by making API calls) to see the available data sets, fields, and operations you can perform.","position":{"start":{"line":156,"column":81,"offset":5988},"end":{"line":156,"column":214,"offset":6121},"indent":[]}}],"position":{"start":{"line":156,"column":1,"offset":5908},"end":{"line":156,"column":214,"offset":6121},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For an introduction to browsing the Analytics GraphQL API, see ","position":{"start":{"line":158,"column":1,"offset":6123},"end":{"line":158,"column":64,"offset":6186},"indent":[]}},{"type":"link","title":null,"url":"/graphql-api/getting-started/explore-graphql-schema","children":[{"type":"emphasis","children":[{"type":"text","value":"Explore the Analytics schema with GraphiQL","position":{"start":{"line":158,"column":66,"offset":6188},"end":{"line":158,"column":108,"offset":6230},"indent":[]}}],"position":{"start":{"line":158,"column":65,"offset":6187},"end":{"line":158,"column":109,"offset":6231},"indent":[]}}],"position":{"start":{"line":158,"column":64,"offset":6186},"end":{"line":158,"column":163,"offset":6285},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":158,"column":163,"offset":6285},"end":{"line":158,"column":164,"offset":6286},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":6123},"end":{"line":158,"column":164,"offset":6286},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Helpful Resources","position":{"start":{"line":160,"column":4,"offset":6291},"end":{"line":160,"column":21,"offset":6308},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":6288},"end":{"line":160,"column":21,"offset":6308},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here are some helpful articles about working with the Cloudflare Analytics API and GraphQL.","position":{"start":{"line":162,"column":1,"offset":6310},"end":{"line":162,"column":92,"offset":6401},"indent":[]}}],"position":{"start":{"line":162,"column":1,"offset":6310},"end":{"line":162,"column":92,"offset":6401},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cloudflare specific","position":{"start":{"line":164,"column":5,"offset":6407},"end":{"line":164,"column":24,"offset":6426},"indent":[]}}],"position":{"start":{"line":164,"column":1,"offset":6403},"end":{"line":164,"column":24,"offset":6426},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/en-us/articles/205075117-Understanding-the-Cloudflare-dashboard","children":[{"type":"emphasis","children":[{"type":"text","value":"Understanding the Cloudflare Dashboard","position":{"start":{"line":166,"column":5,"offset":6432},"end":{"line":166,"column":43,"offset":6470},"indent":[]}}],"position":{"start":{"line":166,"column":4,"offset":6431},"end":{"line":166,"column":44,"offset":6471},"indent":[]}}],"position":{"start":{"line":166,"column":3,"offset":6430},"end":{"line":166,"column":144,"offset":6571},"indent":[]}}],"position":{"start":{"line":166,"column":3,"offset":6430},"end":{"line":166,"column":144,"offset":6571},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":6428},"end":{"line":166,"column":144,"offset":6571},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#getting-started-resource-ids","children":[{"type":"emphasis","children":[{"type":"text","value":"How to find your zoneTag using the API","position":{"start":{"line":167,"column":5,"offset":6576},"end":{"line":167,"column":43,"offset":6614},"indent":[]}}],"position":{"start":{"line":167,"column":4,"offset":6575},"end":{"line":167,"column":44,"offset":6615},"indent":[]}}],"position":{"start":{"line":167,"column":3,"offset":6574},"end":{"line":167,"column":103,"offset":6674},"indent":[]}}],"position":{"start":{"line":167,"column":3,"offset":6574},"end":{"line":167,"column":103,"offset":6674},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":6572},"end":{"line":167,"column":103,"offset":6674},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":6428},"end":{"line":167,"column":103,"offset":6674},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"General info on the GraphQL framework","position":{"start":{"line":169,"column":5,"offset":6680},"end":{"line":169,"column":42,"offset":6717},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":6676},"end":{"line":169,"column":42,"offset":6717},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.howtographql.com/","children":[{"type":"emphasis","children":[{"type":"text","value":"How to use GraphQL (tutorials)","position":{"start":{"line":171,"column":5,"offset":6723},"end":{"line":171,"column":35,"offset":6753},"indent":[]}}],"position":{"start":{"line":171,"column":4,"offset":6722},"end":{"line":171,"column":36,"offset":6754},"indent":[]}}],"position":{"start":{"line":171,"column":3,"offset":6721},"end":{"line":171,"column":68,"offset":6786},"indent":[]}}],"position":{"start":{"line":171,"column":3,"offset":6721},"end":{"line":171,"column":68,"offset":6786},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":6719},"end":{"line":171,"column":68,"offset":6786},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://graphql.org/learn/thinking-in-graphs/","children":[{"type":"emphasis","children":[{"type":"text","value":"Thinking in Graphs","position":{"start":{"line":172,"column":5,"offset":6791},"end":{"line":172,"column":23,"offset":6809},"indent":[]}}],"position":{"start":{"line":172,"column":4,"offset":6790},"end":{"line":172,"column":24,"offset":6810},"indent":[]}}],"position":{"start":{"line":172,"column":3,"offset":6789},"end":{"line":172,"column":72,"offset":6858},"indent":[]}}],"position":{"start":{"line":172,"column":3,"offset":6789},"end":{"line":172,"column":72,"offset":6858},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":6787},"end":{"line":172,"column":72,"offset":6858},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://graphql.org/learn/schema/","children":[{"type":"emphasis","children":[{"type":"text","value":"What data can you can query in the GraphQL type system (schemas)","position":{"start":{"line":173,"column":5,"offset":6863},"end":{"line":173,"column":69,"offset":6927},"indent":[]}}],"position":{"start":{"line":173,"column":4,"offset":6862},"end":{"line":173,"column":70,"offset":6928},"indent":[]}}],"position":{"start":{"line":173,"column":3,"offset":6861},"end":{"line":173,"column":106,"offset":6964},"indent":[]}}],"position":{"start":{"line":173,"column":3,"offset":6861},"end":{"line":173,"column":106,"offset":6964},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":6859},"end":{"line":173,"column":106,"offset":6964},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://medium.com/graphql-mastery/graphql-quick-tip-how-to-pass-variables-into-a-mutation-in-graphiql-23ecff4add57","children":[{"type":"emphasis","children":[{"type":"text","value":"How to pass variables in GraphiQL (Medium article with quick tips)","position":{"start":{"line":174,"column":5,"offset":6969},"end":{"line":174,"column":71,"offset":7035},"indent":[]}}],"position":{"start":{"line":174,"column":4,"offset":6968},"end":{"line":174,"column":72,"offset":7036},"indent":[]}}],"position":{"start":{"line":174,"column":3,"offset":6967},"end":{"line":174,"column":190,"offset":7154},"indent":[]}}],"position":{"start":{"line":174,"column":3,"offset":6967},"end":{"line":174,"column":190,"offset":7154},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":6965},"end":{"line":174,"column":190,"offset":7154},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":6719},"end":{"line":174,"column":190,"offset":7154},"indent":[1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":20,\"pcx-content-type\":\"reference\"}","position":{"start":{"line":177,"column":1,"offset":7157},"end":{"line":177,"column":72,"offset":7228},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":177,"column":72,"offset":7228}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 20,\n  \"pcx-content-type\": \"reference\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"querying-basics\"\n  }, \"Querying basics\"), mdx(\"h2\", {\n    \"id\": \"structure-of-a-graphql-query\"\n  }, \"Structure of a GraphQL query\"), mdx(\"p\", null, \"GraphQL structures data as a graph. GraphQL uses a schema to define the objects and their hierarchy in your data graph. You can explore the edges of the graph by using queries to get the data you need. These queries must respect the structure of the schema.\"), mdx(\"p\", null, \"At the core of a GraphQL query is a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"node\"), \", followed by its \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fields\"), \". The node is an object of a certain \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"type\"), \"; the type specifies the fields that make up the object.\"), mdx(\"p\", null, \"A field can be another node, in which case the appropriate query would contain nested elements. Some nodes look like functions that can take on arguments to limit the scope of what they can act on. You can apply filters at each node.\"), mdx(\"h2\", {\n    \"id\": \"query-against-the-cloudflare-graphql-schema\"\n  }, \"Query against the Cloudflare GraphQL schema\"), mdx(\"p\", null, \"A typical query against the Cloudflare GraphQL schema is made up of five components:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"query\"), \" - The root node.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"viewer\"), \" - A nested node indicating to GraphQL that you want to view the results. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"viewer\"), \" component represents the initial node of the user running the query.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"zones\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"account\"), \" - A nested node indicating the domain area or account you want to query against. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"viewer\"), \" can access one or more zones or accounts. Each zone or account contains a collection of data sets.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Leaf node\"), \" - This specifies the data set you want to query against in a zone or account. \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"firewallEventsAdaptive\"), \" is an example of a leaf node that represents a data set for firewall events in a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"zone\"), \" node.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Field\"), \" - The fields in a query specify the set of metrics that you want to fetch. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"firewallEventsAdaptive\"), \" leaf node includes the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"clientIP\"), \" field. If your leaf node queries requests, possible fields would include response bytes or the time at which requests were received.\")), mdx(\"p\", null, \"The following example shows the format for a firewall query:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-code\"\n  }, \"\\nquery{\\n  viewer {\\n      zones(filter: {...}) {\\n         firewallEventsAdaptive( limit: 10, orderBy: [...], filter: {...} ) {\\n           datetime, clientCountryName, action, ...\\n         }\\n      }\\n  }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"example-query\"\n  }, \"Example Query\"), mdx(\"p\", null, \"The following query searches data from a zone for firewall events that occurred during a time interval. It sorts the results, limits the amount of results returned, and displays a set of fields for each firewall event.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Query Firewall events for a specific time interval\\n---\\nquery\\n{\\n  viewer\\n  {\\n    zones(filter: { zoneTag: \\\"11111111\\\"})\\n    {\\n      firewallEventsAdaptive(\\n          filter: {\\n            datetime_gt: \\\"2020-08-03T02:07:05Z\\\",\\n            datetime_lt: \\\"2020-08-03T17:07:05Z\\\" \\n          },\\n          limit: 2,\\n          orderBy: [datetime_DESC, rayName_DESC])\\n      {\\n        action\\n        datetime\\n        rayName\\n        clientRequestHTTPHost\\n        userAgent\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"zones(filter: { zoneTag: \\\"11111111\\\"})\"), \" confines the query to search to one zone.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"firewallEventsAdaptive\"), \" is the large data set that you want to query against. The set of data returned is defined by the following:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"filter:{}\"), \" limits the scope to firewall events between two times: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime_gt\"), \" (greater than) and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime_lt\"), \" (less than).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"limit: 2\"), \" limits the results to 2 (the maximum value is 10,000).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"orderBy\"), \" sorts the results, first by \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime_DESC\"), \", the datetime field , in descending order, and then by the rayname, also in descending order.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The list of fields: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"action\"), \" (Allow, Block, Challenge), \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"datetime\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rayName\"), \" (the RayID), \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"clientRequestHTTPHost\"), \" (the host the client requested), and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"userAgent\"), \".\")))), mdx(\"p\", null, \"You can send the query with an API call or by clicking \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Play\"), \" in the GraphiQL client. The format of the response is in JSON:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Query response from firewallEventsAdaptive\\n---\\n{\\n  \\\"data\\\": {\\n    \\\"viewer\\\": {\\n      \\\"zones\\\": [\\n        {\\n          \\\"firewallEventsAdaptive\\\": [\\n            {\\n              \\\"action\\\": \\\"log\\\",\\n              \\\"clientRequestHTTPHost\\\": \\\"cloudflare.guru\\\",\\n              \\\"datetime\\\": \\\"2020-08-03T17:07:03Z\\\",\\n              \\\"rayName\\\": \\\"5bd1a1fc584357ed\\\",\\n              \\\"userAgent\\\": \\\"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 08c774cde2f3c385)\\\"\\n            },\\n            {\\n              \\\"action\\\": \\\"log\\\",\\n              \\\"clientRequestHTTPHost\\\": \\\"cloudflare.guru\\\",\\n              \\\"datetime\\\": \\\"2020-08-03T17:07:01Z\\\",\\n              \\\"rayName\\\": \\\"5bd1a1ef3bb5d296\\\",\\n              \\\"userAgent\\\": \\\"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 764497f790f6a070)\\\"\\n            }\\n          ]\\n        }\\n      ]\\n    }\\n  },\\n  \\\"errors\\\": null\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"query-two-data-sets-in-a-single-api-call\"\n  }, \"Query two data sets in a single API call\"), mdx(\"p\", null, \"This example query employs a broad range of GraphQL functionality. The example queries two data sets for the specified zone simultaneously, applies filters and aggregations, and sets a limit on the number of records returned. (Note that you must include the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"limit\"), \" argument, which can be equal or up to 10,000.)\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Query two data sets simultaneously\\n---\\nquery {\\n  viewer {\\n    zones(filter: {zoneTag: \\\"<your zone ID>\\\"}) {\\n      httpRequests1mGroups(limit: 5, filter: { datetime_gt: \\\"2019-02-01T04:00:00Z\\\", datetime_lt: \\\"2019-02-01T06:00:00Z\\\"}) {\\n        sum {\\n          countryMap {\\n            bytes\\n            clientCountryName\\n          }\\n        }\\n        dimensions {\\n          date\\n          datetime\\n        }\\n      }\\n      firewallEventsAdaptiveGroups(limit: 10, filter: { datetime_gt: \\\"2019-02-01T04:00:00Z\\\", datetime_lt: \\\"2019-02-01T06:00:00Z\\\"}) {\\n        count\\n        dimensions {\\n          clientCountryName\\n          clientAsn\\n          datetimeHour\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"This is only an example. You must specify the \", mdx(\"code\", null, \"zoneTag\"), \" for your domain. Your Cloudflare dashboard lists your Zone ID (\", mdx(\"code\", null, \"zoneTag\"), \") on the \", mdx(\"em\", null, \"Overview\"), \" page.\")), mdx(\"h2\", {\n    \"id\": \"introspection\"\n  }, \"Introspection\"), mdx(\"p\", null, \"The GraphQL API offers \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://graphql.org/learn/introspection/\"\n  }, \"introspection\"), \", which allows you to explore the graph (by making API calls) to see the available data sets, fields, and operations you can perform.\"), mdx(\"p\", null, \"For an introduction to browsing the Analytics GraphQL API, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/getting-started/explore-graphql-schema\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Explore the Analytics schema with GraphiQL\")), \".\"), mdx(\"h2\", {\n    \"id\": \"helpful-resources\"\n  }, \"Helpful Resources\"), mdx(\"p\", null, \"Here are some helpful articles about working with the Cloudflare Analytics API and GraphQL.\"), mdx(\"h3\", {\n    \"id\": \"cloudflare-specific\"\n  }, \"Cloudflare specific\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://support.cloudflare.com/hc/en-us/articles/205075117-Understanding-the-Cloudflare-dashboard\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Understanding the Cloudflare Dashboard\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://api.cloudflare.com/#getting-started-resource-ids\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"How to find your zoneTag using the API\")))), mdx(\"h3\", {\n    \"id\": \"general-info-on-the-graphql-framework\"\n  }, \"General info on the GraphQL framework\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.howtographql.com/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"How to use GraphQL (tutorials)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://graphql.org/learn/thinking-in-graphs/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Thinking in Graphs\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://graphql.org/learn/schema/\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"What data can you can query in the GraphQL type system (schemas)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://medium.com/graphql-mastery/graphql-quick-tip-how-to-pass-variables-into-a-mutation-in-graphiql-23ecff4add57\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"How to pass variables in GraphiQL (Medium article with quick tips)\")))));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"order\": 20,\n  \"pcx-content-type\": \"reference\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"querying-basics\"\n    }}>{`Querying basics`}</h1>\n    <h2 {...{\n      \"id\": \"structure-of-a-graphql-query\"\n    }}>{`Structure of a GraphQL query`}</h2>\n    <p>{`GraphQL structures data as a graph. GraphQL uses a schema to define the objects and their hierarchy in your data graph. You can explore the edges of the graph by using queries to get the data you need. These queries must respect the structure of the schema.`}</p>\n    <p>{`At the core of a GraphQL query is a `}<em parentName=\"p\">{`node`}</em>{`, followed by its `}<em parentName=\"p\">{`fields`}</em>{`. The node is an object of a certain `}<em parentName=\"p\">{`type`}</em>{`; the type specifies the fields that make up the object.`}</p>\n    <p>{`A field can be another node, in which case the appropriate query would contain nested elements. Some nodes look like functions that can take on arguments to limit the scope of what they can act on. You can apply filters at each node.`}</p>\n    <h2 {...{\n      \"id\": \"query-against-the-cloudflare-graphql-schema\"\n    }}>{`Query against the Cloudflare GraphQL schema`}</h2>\n    <p>{`A typical query against the Cloudflare GraphQL schema is made up of five components:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`query`}</inlineCode>{` - The root node.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`viewer`}</inlineCode>{` - A nested node indicating to GraphQL that you want to view the results. The `}<inlineCode parentName=\"li\">{`viewer`}</inlineCode>{` component represents the initial node of the user running the query.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`zones`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`account`}</inlineCode>{` - A nested node indicating the domain area or account you want to query against. The `}<inlineCode parentName=\"li\">{`viewer`}</inlineCode>{` can access one or more zones or accounts. Each zone or account contains a collection of data sets.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Leaf node`}</strong>{` - This specifies the data set you want to query against in a zone or account. `}<inlineCode parentName=\"li\">{`firewallEventsAdaptive`}</inlineCode>{` is an example of a leaf node that represents a data set for firewall events in a `}<inlineCode parentName=\"li\">{`zone`}</inlineCode>{` node.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Field`}</strong>{` - The fields in a query specify the set of metrics that you want to fetch. The `}<inlineCode parentName=\"li\">{`firewallEventsAdaptive`}</inlineCode>{` leaf node includes the `}<inlineCode parentName=\"li\">{`clientIP`}</inlineCode>{` field. If your leaf node queries requests, possible fields would include response bytes or the time at which requests were received.`}</li>\n    </ul>\n    <p>{`The following example shows the format for a firewall query:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-code\"\n      }}>{`\nquery{\n  viewer {\n      zones(filter: {...}) {\n         firewallEventsAdaptive( limit: 10, orderBy: [...], filter: {...} ) {\n           datetime, clientCountryName, action, ...\n         }\n      }\n  }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"example-query\"\n    }}>{`Example Query`}</h3>\n    <p>{`The following query searches data from a zone for firewall events that occurred during a time interval. It sorts the results, limits the amount of results returned, and displays a set of fields for each firewall event.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Query Firewall events for a specific time interval\n---\nquery\n{\n  viewer\n  {\n    zones(filter: { zoneTag: \"11111111\"})\n    {\n      firewallEventsAdaptive(\n          filter: {\n            datetime_gt: \"2020-08-03T02:07:05Z\",\n            datetime_lt: \"2020-08-03T17:07:05Z\" \n          },\n          limit: 2,\n          orderBy: [datetime_DESC, rayName_DESC])\n      {\n        action\n        datetime\n        rayName\n        clientRequestHTTPHost\n        userAgent\n      }\n    }\n  }\n}\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`zones(filter: { zoneTag: \"11111111\"})`}</inlineCode>{` confines the query to search to one zone.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`firewallEventsAdaptive`}</inlineCode>{` is the large data set that you want to query against. The set of data returned is defined by the following:`}<ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`filter:{}`}</inlineCode>{` limits the scope to firewall events between two times: `}<inlineCode parentName=\"li\">{`datetime_gt`}</inlineCode>{` (greater than) and `}<inlineCode parentName=\"li\">{`datetime_lt`}</inlineCode>{` (less than).`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`limit: 2`}</inlineCode>{` limits the results to 2 (the maximum value is 10,000).`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`orderBy`}</inlineCode>{` sorts the results, first by `}<inlineCode parentName=\"li\">{`datetime_DESC`}</inlineCode>{`, the datetime field , in descending order, and then by the rayname, also in descending order.`}</li>\n          <li parentName=\"ul\">{`The list of fields: `}<inlineCode parentName=\"li\">{`action`}</inlineCode>{` (Allow, Block, Challenge), `}<inlineCode parentName=\"li\">{`datetime`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`rayName`}</inlineCode>{` (the RayID), `}<inlineCode parentName=\"li\">{`clientRequestHTTPHost`}</inlineCode>{` (the host the client requested), and `}<inlineCode parentName=\"li\">{`userAgent`}</inlineCode>{`.`}</li>\n        </ul></li>\n    </ul>\n    <p>{`You can send the query with an API call or by clicking `}<strong parentName=\"p\">{`Play`}</strong>{` in the GraphiQL client. The format of the response is in JSON:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Query response from firewallEventsAdaptive\n---\n{\n  \"data\": {\n    \"viewer\": {\n      \"zones\": [\n        {\n          \"firewallEventsAdaptive\": [\n            {\n              \"action\": \"log\",\n              \"clientRequestHTTPHost\": \"cloudflare.guru\",\n              \"datetime\": \"2020-08-03T17:07:03Z\",\n              \"rayName\": \"5bd1a1fc584357ed\",\n              \"userAgent\": \"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 08c774cde2f3c385)\"\n            },\n            {\n              \"action\": \"log\",\n              \"clientRequestHTTPHost\": \"cloudflare.guru\",\n              \"datetime\": \"2020-08-03T17:07:01Z\",\n              \"rayName\": \"5bd1a1ef3bb5d296\",\n              \"userAgent\": \"Mozilla/5.0 (compatible;Cloudflare-Healthchecks/1.0;+https://www.cloudflare.com/; healthcheck-id: 764497f790f6a070)\"\n            }\n          ]\n        }\n      ]\n    }\n  },\n  \"errors\": null\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"query-two-data-sets-in-a-single-api-call\"\n    }}>{`Query two data sets in a single API call`}</h2>\n    <p>{`This example query employs a broad range of GraphQL functionality. The example queries two data sets for the specified zone simultaneously, applies filters and aggregations, and sets a limit on the number of records returned. (Note that you must include the `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` argument, which can be equal or up to 10,000.)`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Query two data sets simultaneously\n---\nquery {\n  viewer {\n    zones(filter: {zoneTag: \"<your zone ID>\"}) {\n      httpRequests1mGroups(limit: 5, filter: { datetime_gt: \"2019-02-01T04:00:00Z\", datetime_lt: \"2019-02-01T06:00:00Z\"}) {\n        sum {\n          countryMap {\n            bytes\n            clientCountryName\n          }\n        }\n        dimensions {\n          date\n          datetime\n        }\n      }\n      firewallEventsAdaptiveGroups(limit: 10, filter: { datetime_gt: \"2019-02-01T04:00:00Z\", datetime_lt: \"2019-02-01T06:00:00Z\"}) {\n        count\n        dimensions {\n          clientCountryName\n          clientAsn\n          datetimeHour\n        }\n      }\n    }\n  }\n}\n`}</code></pre>\n    <Aside type='note' header='Note' mdxType=\"Aside\">\n      <p>{`This is only an example. You must specify the `}<code>{`zoneTag`}</code>{` for your domain. Your Cloudflare dashboard lists your Zone ID (`}<code>{`zoneTag`}</code>{`) on the `}<em>{`Overview`}</em>{` page.`}</p>\n    </Aside>\n    <h2 {...{\n      \"id\": \"introspection\"\n    }}>{`Introspection`}</h2>\n    <p>{`The GraphQL API offers `}<a parentName=\"p\" {...{\n        \"href\": \"https://graphql.org/learn/introspection/\"\n      }}>{`introspection`}</a>{`, which allows you to explore the graph (by making API calls) to see the available data sets, fields, and operations you can perform.`}</p>\n    <p>{`For an introduction to browsing the Analytics GraphQL API, see `}<a parentName=\"p\" {...{\n        \"href\": \"/graphql-api/getting-started/explore-graphql-schema\"\n      }}><em parentName=\"a\">{`Explore the Analytics schema with GraphiQL`}</em></a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"helpful-resources\"\n    }}>{`Helpful Resources`}</h2>\n    <p>{`Here are some helpful articles about working with the Cloudflare Analytics API and GraphQL.`}</p>\n    <h3 {...{\n      \"id\": \"cloudflare-specific\"\n    }}>{`Cloudflare specific`}</h3>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://support.cloudflare.com/hc/en-us/articles/205075117-Understanding-the-Cloudflare-dashboard\"\n        }}><em parentName=\"a\">{`Understanding the Cloudflare Dashboard`}</em></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://api.cloudflare.com/#getting-started-resource-ids\"\n        }}><em parentName=\"a\">{`How to find your zoneTag using the API`}</em></a></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"general-info-on-the-graphql-framework\"\n    }}>{`General info on the GraphQL framework`}</h3>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.howtographql.com/\"\n        }}><em parentName=\"a\">{`How to use GraphQL (tutorials)`}</em></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://graphql.org/learn/thinking-in-graphs/\"\n        }}><em parentName=\"a\">{`Thinking in Graphs`}</em></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://graphql.org/learn/schema/\"\n        }}><em parentName=\"a\">{`What data can you can query in the GraphQL type system (schemas)`}</em></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://medium.com/graphql-mastery/graphql-quick-tip-how-to-pass-variables-into-a-mutation-in-graphiql-23ecff4add57\"\n        }}><em parentName=\"a\">{`How to pass variables in GraphiQL (Medium article with quick tips)`}</em></a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}