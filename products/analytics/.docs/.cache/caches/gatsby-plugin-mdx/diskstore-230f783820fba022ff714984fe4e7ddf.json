{"expireTime":9007200889996143000,"key":"gatsby-plugin-mdx-entire-payload-e7e94ddddc6e5daeba7ac3707cf2ad7e-","val":{"mdast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Use GraphQL to create widgets","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":32,"offset":32},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":32,"offset":32},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This article presents examples of queries you can use to populate your own dashboard.","position":{"start":{"line":4,"column":1,"offset":34},"end":{"line":4,"column":86,"offset":119},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":34},"end":{"line":4,"column":86,"offset":119},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#use-graphql-to-create-widgets","children":[{"type":"text","value":"Use GraphQL to create widgets","position":{"start":{"line":6,"column":4,"offset":124},"end":{"line":6,"column":33,"offset":153},"indent":[]}}],"position":{"start":{"line":6,"column":3,"offset":123},"end":{"line":6,"column":66,"offset":186},"indent":[]}}],"position":{"start":{"line":6,"column":3,"offset":123},"end":{"line":6,"column":66,"offset":186},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#parameters-and-filters","children":[{"type":"text","value":"Parameters and filters","position":{"start":{"line":7,"column":6,"offset":192},"end":{"line":7,"column":28,"offset":214},"indent":[]}}],"position":{"start":{"line":7,"column":5,"offset":191},"end":{"line":7,"column":54,"offset":240},"indent":[]}}],"position":{"start":{"line":7,"column":5,"offset":191},"end":{"line":7,"column":54,"offset":240},"indent":[]}}],"position":{"start":{"line":7,"column":3,"offset":189},"end":{"line":7,"column":54,"offset":240},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#timeseries-graph","children":[{"type":"text","value":"Timeseries graph","position":{"start":{"line":8,"column":6,"offset":246},"end":{"line":8,"column":22,"offset":262},"indent":[]}}],"position":{"start":{"line":8,"column":5,"offset":245},"end":{"line":8,"column":42,"offset":282},"indent":[]}}],"position":{"start":{"line":8,"column":5,"offset":245},"end":{"line":8,"column":42,"offset":282},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":243},"end":{"line":8,"column":42,"offset":282},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#activity-log","children":[{"type":"text","value":"Activity log","position":{"start":{"line":9,"column":6,"offset":288},"end":{"line":9,"column":18,"offset":300},"indent":[]}}],"position":{"start":{"line":9,"column":5,"offset":287},"end":{"line":9,"column":34,"offset":316},"indent":[]}}],"position":{"start":{"line":9,"column":5,"offset":287},"end":{"line":9,"column":34,"offset":316},"indent":[]}}],"position":{"start":{"line":9,"column":3,"offset":285},"end":{"line":9,"column":34,"offset":316},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#top-n-cards---source","children":[{"type":"text","value":"Top N cards - source","position":{"start":{"line":10,"column":6,"offset":322},"end":{"line":10,"column":26,"offset":342},"indent":[]}}],"position":{"start":{"line":10,"column":5,"offset":321},"end":{"line":10,"column":50,"offset":366},"indent":[]}}],"position":{"start":{"line":10,"column":5,"offset":321},"end":{"line":10,"column":50,"offset":366},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":319},"end":{"line":10,"column":50,"offset":366},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#top-n-cards---destination","children":[{"type":"text","value":"Top N cards - destination","position":{"start":{"line":11,"column":6,"offset":372},"end":{"line":11,"column":31,"offset":397},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":371},"end":{"line":11,"column":60,"offset":426},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":371},"end":{"line":11,"column":60,"offset":426},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":369},"end":{"line":11,"column":60,"offset":426},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#tcp-flags","children":[{"type":"text","value":"TCP Flags","position":{"start":{"line":12,"column":6,"offset":432},"end":{"line":12,"column":15,"offset":441},"indent":[]}}],"position":{"start":{"line":12,"column":5,"offset":431},"end":{"line":12,"column":28,"offset":454},"indent":[]}}],"position":{"start":{"line":12,"column":5,"offset":431},"end":{"line":12,"column":28,"offset":454},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":429},"end":{"line":12,"column":28,"offset":454},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#executive-summary","children":[{"type":"text","value":"Executive summary","position":{"start":{"line":13,"column":6,"offset":460},"end":{"line":13,"column":23,"offset":477},"indent":[]}}],"position":{"start":{"line":13,"column":5,"offset":459},"end":{"line":13,"column":44,"offset":498},"indent":[]}}],"position":{"start":{"line":13,"column":5,"offset":459},"end":{"line":13,"column":44,"offset":498},"indent":[]}}],"position":{"start":{"line":13,"column":3,"offset":457},"end":{"line":13,"column":44,"offset":498},"indent":[]}}],"position":{"start":{"line":7,"column":3,"offset":189},"end":{"line":13,"column":44,"offset":498},"indent":[3,3,3,3,3,3]}}],"position":{"start":{"line":6,"column":1,"offset":121},"end":{"line":13,"column":44,"offset":498},"indent":[1,1,1,1,1,1,1]}}],"position":{"start":{"line":6,"column":1,"offset":121},"end":{"line":13,"column":44,"offset":498},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Use this workflow to build and test queries:","position":{"start":{"line":15,"column":1,"offset":500},"end":{"line":15,"column":45,"offset":544},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":500},"end":{"line":15,"column":45,"offset":544},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Install and configure the ","position":{"start":{"line":17,"column":3,"offset":548},"end":{"line":17,"column":29,"offset":574},"indent":[]}},{"type":"link","title":null,"url":"https://www.electronjs.org/apps/graphiql","children":[{"type":"text","value":"GraphiQL","position":{"start":{"line":17,"column":30,"offset":575},"end":{"line":17,"column":38,"offset":583},"indent":[]}}],"position":{"start":{"line":17,"column":29,"offset":574},"end":{"line":17,"column":81,"offset":626},"indent":[]}},{"type":"text","value":" app to authenticate to the Cloudflare Analytics GraphQL API. Cloudflare recommends token authentication. (See ","position":{"start":{"line":17,"column":81,"offset":626},"end":{"line":17,"column":192,"offset":737},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/graphql-api/getting-started/authentication/api-token-auth/","children":[{"type":"text","value":"Configure an Analytics API token","position":{"start":{"line":17,"column":194,"offset":739},"end":{"line":17,"column":226,"offset":771},"indent":[]}}],"position":{"start":{"line":17,"column":193,"offset":738},"end":{"line":17,"column":288,"offset":833},"indent":[]}}],"position":{"start":{"line":17,"column":192,"offset":737},"end":{"line":17,"column":289,"offset":834},"indent":[]}},{"type":"text","value":".)","position":{"start":{"line":17,"column":289,"offset":834},"end":{"line":17,"column":291,"offset":836},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":548},"end":{"line":17,"column":291,"offset":836},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":546},"end":{"line":17,"column":291,"offset":836},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Construct the queries in the GraphiQL. You can use the introspective documentation in the GraphQL client to explore the nodes available. For further information about queries, refer to  ","position":{"start":{"line":18,"column":3,"offset":839},"end":{"line":18,"column":189,"offset":1025},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/graphql-api/getting-started/querying-basics/","children":[{"type":"text","value":"Querying basics","position":{"start":{"line":18,"column":191,"offset":1027},"end":{"line":18,"column":206,"offset":1042},"indent":[]}}],"position":{"start":{"line":18,"column":190,"offset":1026},"end":{"line":18,"column":254,"offset":1090},"indent":[]}}],"position":{"start":{"line":18,"column":189,"offset":1025},"end":{"line":18,"column":255,"offset":1091},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":255,"offset":1091},"end":{"line":18,"column":256,"offset":1092},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":839},"end":{"line":18,"column":256,"offset":1092},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":837},"end":{"line":18,"column":256,"offset":1092},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Test your queries by running them from GraphiQL or by passing them as the payload in a cURL request to the GraphQL API endpoint.","position":{"start":{"line":19,"column":3,"offset":1095},"end":{"line":19,"column":131,"offset":1223},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1095},"end":{"line":19,"column":131,"offset":1223},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1093},"end":{"line":19,"column":131,"offset":1223},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use the queries in your application to provide data for your dashboard widgets.","position":{"start":{"line":20,"column":3,"offset":1226},"end":{"line":20,"column":82,"offset":1305},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1226},"end":{"line":20,"column":82,"offset":1305},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1224},"end":{"line":20,"column":82,"offset":1305},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":546},"end":{"line":20,"column":82,"offset":1305},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Parameters and filters","position":{"start":{"line":22,"column":4,"offset":1310},"end":{"line":22,"column":26,"offset":1332},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1307},"end":{"line":22,"column":26,"offset":1332},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These examples use the account ID for the Cloudflare account that you are querying. You can define this as a variable (","position":{"start":{"line":24,"column":1,"offset":1334},"end":{"line":24,"column":120,"offset":1453},"indent":[]}},{"type":"inlineCode","value":"accountTag","position":{"start":{"line":24,"column":120,"offset":1453},"end":{"line":24,"column":132,"offset":1465},"indent":[]}},{"type":"text","value":") and reference it in your queries.","position":{"start":{"line":24,"column":132,"offset":1465},"end":{"line":24,"column":167,"offset":1500},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1334},"end":{"line":24,"column":167,"offset":1500},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The queries also use a filter to specify the time interval that you want to query. The filter uses a start time and end time to define the time interval. You use different attributes to specify the start and end times, depending on the time period that you want to query. Refer to  ","position":{"start":{"line":26,"column":1,"offset":1502},"end":{"line":26,"column":283,"offset":1784},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/graphql-api/features/filtering","children":[{"type":"text","value":"Filtering","position":{"start":{"line":26,"column":285,"offset":1786},"end":{"line":26,"column":294,"offset":1795},"indent":[]}}],"position":{"start":{"line":26,"column":284,"offset":1785},"end":{"line":26,"column":328,"offset":1829},"indent":[]}}],"position":{"start":{"line":26,"column":283,"offset":1784},"end":{"line":26,"column":329,"offset":1830},"indent":[]}},{"type":"text","value":" for further information about filters.","position":{"start":{"line":26,"column":329,"offset":1830},"end":{"line":26,"column":368,"offset":1869},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1502},"end":{"line":26,"column":368,"offset":1869},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following example queries for data with dates greater than or equal to ","position":{"start":{"line":28,"column":1,"offset":1871},"end":{"line":28,"column":76,"offset":1946},"indent":[]}},{"type":"inlineCode","value":"date_geq","position":{"start":{"line":28,"column":76,"offset":1946},"end":{"line":28,"column":86,"offset":1956},"indent":[]}},{"type":"text","value":" and less than or equal to ","position":{"start":{"line":28,"column":86,"offset":1956},"end":{"line":28,"column":113,"offset":1983},"indent":[]}},{"type":"inlineCode","value":"date_leq","position":{"start":{"line":28,"column":113,"offset":1983},"end":{"line":28,"column":123,"offset":1993},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":28,"column":123,"offset":1993},"end":{"line":28,"column":124,"offset":1994},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1871},"end":{"line":28,"column":124,"offset":1994},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Account and query time interval settings\n---\n{\n  \"accountTag\": \"{account-id}\",\n  \"filter\": {\n    \"AND\":[\n      {\"date_geq\": \"2020-01-19\"},\n      {\"date_leq\": \"2020-01-20\"}\n    ]\n  }\n}","position":{"start":{"line":30,"column":1,"offset":1996},"end":{"line":43,"column":4,"offset":2203},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This table lists Network Analytics data sets (nodes) and the ","position":{"start":{"line":45,"column":1,"offset":2205},"end":{"line":45,"column":62,"offset":2266},"indent":[]}},{"type":"inlineCode","value":"datetimeDimension","position":{"start":{"line":45,"column":62,"offset":2266},"end":{"line":45,"column":81,"offset":2285},"indent":[]}},{"type":"text","value":" that you should use when querying data for a given time selection.","position":{"start":{"line":45,"column":81,"offset":2285},"end":{"line":45,"column":148,"offset":2352},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2205},"end":{"line":45,"column":148,"offset":2352},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When you want an aggregated view of data, use the ","position":{"start":{"line":47,"column":1,"offset":2354},"end":{"line":47,"column":51,"offset":2404},"indent":[]}},{"type":"inlineCode","value":"Groups","position":{"start":{"line":47,"column":51,"offset":2404},"end":{"line":47,"column":59,"offset":2412},"indent":[]}},{"type":"text","value":" query nodes. For example, the ","position":{"start":{"line":47,"column":59,"offset":2412},"end":{"line":47,"column":90,"offset":2443},"indent":[]}},{"type":"inlineCode","value":"ipFlows1mAttacksGroups","position":{"start":{"line":47,"column":90,"offset":2443},"end":{"line":47,"column":114,"offset":2467},"indent":[]}},{"type":"text","value":" data set represents minute-wise rollup reports of attack activity. For more detail, see ","position":{"start":{"line":47,"column":114,"offset":2467},"end":{"line":47,"column":203,"offset":2556},"indent":[]}},{"type":"link","title":null,"url":"/graphql-api/features/data-sets","children":[{"type":"emphasis","children":[{"type":"text","value":"Data sets","position":{"start":{"line":47,"column":205,"offset":2558},"end":{"line":47,"column":214,"offset":2567},"indent":[]}}],"position":{"start":{"line":47,"column":204,"offset":2557},"end":{"line":47,"column":215,"offset":2568},"indent":[]}}],"position":{"start":{"line":47,"column":203,"offset":2556},"end":{"line":47,"column":249,"offset":2602},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":47,"column":249,"offset":2602},"end":{"line":47,"column":250,"offset":2603},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2354},"end":{"line":47,"column":250,"offset":2603},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":49,"column":1,"offset":2605},"end":{"line":49,"column":12,"offset":2616},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Time Selection</strong>\n   </th>\n   <th><strong>Query node</strong>\n   </th>\n   <th><strong>datetimeDimension</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td>Last week</td>\n   <td>ipFlows1dGroups</td>\n   <td>date</td>\n  </tr>\n  <tr>\n   <td>Last month</td>\n   <td>ipFlows1dGroups</td>\n   <td>date</td>\n  </tr>\n  <tr>\n   <td>24 hours</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeFifteenMinutes</td>\n  </tr>\n  <tr>\n   <td>12 hours</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeFifteenMinutes</td>\n  </tr>\n  <tr>\n   <td>6 hours</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeFiveMinutes</td>\n  </tr>\n  <tr>\n   <td>30 mins</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeMinute</td>\n  </tr>\n  <tr>\n   <td>Custom range</td>\n   <td>Dependent on range selected</td>\n   <td>Dependent on range selected</td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":51,"column":1,"offset":2618},"end":{"line":99,"column":9,"offset":3502},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":101,"column":1,"offset":3504},"end":{"line":101,"column":13,"offset":3516},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The table below lists the start and end time attributes that are valid for query nodes representing different time ranges.","position":{"start":{"line":103,"column":1,"offset":3518},"end":{"line":103,"column":123,"offset":3640},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":3518},"end":{"line":103,"column":123,"offset":3640},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":105,"column":1,"offset":3642},"end":{"line":105,"column":12,"offset":3653},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Query node</strong>\n   </th>\n   <th><strong>Start day / time filter</strong>\n   </th>\n   <th><strong>End day / time filter</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeMinute_geq</td>\n   <td>datetimeMinute_leq</td>\n  </tr>\n  <tr>\n   <td>ipFlows1mAttacksGroups</td>\n   <td>date_geq</td>\n   <td>date_leq</td>\n  </tr>\n  <tr>\n   <td>ipFlows1hGroups</td>\n   <td>datetimeHour_geq </td>\n   <td>datetimeHour_leq</td>\n  </tr>\n  <tr>\n   <td>ipFlows1dGroups</td>\n   <td>date_geq</td>\n   <td>date_leq</td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":107,"column":1,"offset":3655},"end":{"line":140,"column":9,"offset":4268},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":142,"column":1,"offset":4270},"end":{"line":142,"column":13,"offset":4282},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Timeseries graph","position":{"start":{"line":144,"column":4,"offset":4287},"end":{"line":144,"column":20,"offset":4303},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":4284},"end":{"line":144,"column":20,"offset":4303},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the following query to build the timeseries graph in network analytics:","position":{"start":{"line":146,"column":1,"offset":4305},"end":{"line":146,"column":76,"offset":4380},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":4305},"end":{"line":146,"column":76,"offset":4380},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Timeseries graph\n---\nquery ipFlowTimeseries(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mGroups(\n          limit: 1000\n          filter: $filter\n          orderBy: datetimeMinute_ASC\n        ) {\n          dimensions {\n            timestamp: datetimeMinute\n            attackMitigationType\n            attackId\n          }\n          sum {\n            bits\n            packets\n          }\n        }\n      }\n    }\n  }","position":{"start":{"line":148,"column":1,"offset":4382},"end":{"line":176,"column":4,"offset":4944},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Activity log","position":{"start":{"line":178,"column":4,"offset":4949},"end":{"line":178,"column":16,"offset":4961},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":4946},"end":{"line":178,"column":16,"offset":4961},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This query returns an activity log summarizing minute-wise rollups of attack traffic in IP flows. The query groups the data by the fields listed in the ","position":{"start":{"line":180,"column":1,"offset":4963},"end":{"line":180,"column":153,"offset":5115},"indent":[]}},{"type":"inlineCode","value":"dimensions","position":{"start":{"line":180,"column":153,"offset":5115},"end":{"line":180,"column":165,"offset":5127},"indent":[]}},{"type":"text","value":" object.","position":{"start":{"line":180,"column":165,"offset":5127},"end":{"line":180,"column":173,"offset":5135},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":4963},"end":{"line":180,"column":173,"offset":5135},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Activity log query\n---\nquery ipFlowEventLog(\n    $accountTag: string\n    $filter: AccountIpFlows1mAttacksGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mAttacksGroups(\n          limit: 10\n          filter: $filter\n          orderBy: [min_datetimeMinute_ASC]\n        ) {\n          dimensions {\n            attackId\n            attackDestinationIP\n            attackDestinationPort\n            attackMitigationType\n            attackSourcePort\n            attackType\n          }\n          avg {\n            bitsPerSecond\n            packetsPerSecond\n          }\n          min {\n            datetimeMinute\n            bitsPerSecond\n            packetsPerSecond\n          }\n          max {\n            datetimeMinute\n            bitsPerSecond\n            packetsPerSecond\n          }\n          sum {\n            bits\n            packets\n          }\n        }\n      }\n    }\n  }\n","position":{"start":{"line":182,"column":1,"offset":5137},"end":{"line":228,"column":4,"offset":6101},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Top N cards - source","position":{"start":{"line":230,"column":4,"offset":6106},"end":{"line":230,"column":24,"offset":6126},"indent":[]}}],"position":{"start":{"line":230,"column":1,"offset":6103},"end":{"line":230,"column":24,"offset":6126},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This query returns data about the top source IPs.\nThe ","position":{"start":{"line":232,"column":1,"offset":6128},"end":{"line":233,"column":5,"offset":6182},"indent":[1]}},{"type":"inlineCode","value":"limit","position":{"start":{"line":233,"column":5,"offset":6182},"end":{"line":233,"column":12,"offset":6189},"indent":[]}},{"type":"text","value":" parameter controls the amount of records returned for each node. In the following code, the highlighted lines indicate where you configure ","position":{"start":{"line":233,"column":12,"offset":6189},"end":{"line":233,"column":152,"offset":6329},"indent":[]}},{"type":"inlineCode","value":"limit","position":{"start":{"line":233,"column":152,"offset":6329},"end":{"line":233,"column":159,"offset":6336},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":233,"column":159,"offset":6336},"end":{"line":233,"column":160,"offset":6337},"indent":[]}}],"position":{"start":{"line":232,"column":1,"offset":6128},"end":{"line":233,"column":160,"offset":6337},"indent":[1]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Top N Cards query\nhighlight: [9,22,35,47,60,72]\n---\nquery GetTopNBySource(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n    $portFilter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        topNPorts: ipFlows1mGroups(\n        limit: 5\n        filter: $portFilter\n        orderBy: [sum_(bits/packets)_DESC]\n      ) {\n        sum {\n          count: (bits/packets)\n        }\n        dimensions {\n          metric: sourcePort\n          ipProtocol\n        }\n      }\n      topNASN: ipFlows1mGroups(\n        limit: 5\n        filter: $filter\n        orderBy: [sum_(bits/packets)_DESC]\n      ) {\n        sum {\n          count: (bits/packets)\n        }\n        dimensions {\n          metric: sourceIPAsn\n          description: sourceIPASNDescription\n        }\n      }\n        topNIPs: ipFlows1mGroups(\n        limit: 5\n        filter: $filter\n        orderBy: [sum_(bits/packets)_DESC]\n      ) {\n        sum {\n          count: (bits/packets)\n        }\n        dimensions {\n          metric: sourceIP\n        }\n      }\n        topNColos: ipFlows1mGroups(\n          limit: 10\n          filter: $filter\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: coloCity\n            coloCode\n          }\n        }\n        topNCountries: ipFlows1mGroups(\n          limit: 10\n          filter: $filter\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: coloCountry\n          }\n        }\n        topNIPVersions: ipFlows1mGroups(\n          limit: 2\n          filter: $filter\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: ipVersion\n          }\n        }\n      }\n    }\n  }\n","position":{"start":{"line":235,"column":1,"offset":6339},"end":{"line":326,"column":4,"offset":8349},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Top N cards - destination","position":{"start":{"line":328,"column":4,"offset":8354},"end":{"line":328,"column":29,"offset":8379},"indent":[]}}],"position":{"start":{"line":328,"column":1,"offset":8351},"end":{"line":328,"column":29,"offset":8379},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This query returns data about the top destination IPs. The ","position":{"start":{"line":330,"column":1,"offset":8381},"end":{"line":330,"column":60,"offset":8440},"indent":[]}},{"type":"inlineCode","value":"limit","position":{"start":{"line":330,"column":60,"offset":8440},"end":{"line":330,"column":67,"offset":8447},"indent":[]}},{"type":"text","value":" parameter controls the amount of records returned. In the following code, the highlighted lines indicate that the query returns the five highest results.","position":{"start":{"line":330,"column":67,"offset":8447},"end":{"line":330,"column":221,"offset":8601},"indent":[]}}],"position":{"start":{"line":330,"column":1,"offset":8381},"end":{"line":330,"column":221,"offset":8601},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: Top N Cards - Destination\nhighlight: [10,22]\n---\nquery GetTopNByDestination(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n    $portFilter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        topNIPs: ipFlows1mGroups(\n          filter: $filter\n          limit: 5\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: destinationIP\n          }\n        }\n        topNPorts: ipFlows1mGroups(\n          filter: $portFilter\n          limit: 5\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: destinationPort\n            ipProtocol\n          }\n        }\n      }\n    }\n  }","position":{"start":{"line":332,"column":1,"offset":8603},"end":{"line":372,"column":4,"offset":9515},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TCP Flags","position":{"start":{"line":374,"column":4,"offset":9520},"end":{"line":374,"column":13,"offset":9529},"indent":[]}}],"position":{"start":{"line":374,"column":1,"offset":9517},"end":{"line":374,"column":13,"offset":9529},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This query extracts the number of TCP packets from the minute-wise rollups of IP flows, and groups the results by TCP flag value. It uses ","position":{"start":{"line":376,"column":1,"offset":9531},"end":{"line":376,"column":139,"offset":9669},"indent":[]}},{"type":"inlineCode","value":"limit: 8","position":{"start":{"line":376,"column":139,"offset":9669},"end":{"line":376,"column":149,"offset":9679},"indent":[]}},{"type":"text","value":" to display the top eight results, and presents them in descending order.","position":{"start":{"line":376,"column":149,"offset":9679},"end":{"line":376,"column":222,"offset":9752},"indent":[]}}],"position":{"start":{"line":376,"column":1,"offset":9531},"end":{"line":376,"column":222,"offset":9752},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Add the following line to the filter to indicate that you want to view TCP data:","position":{"start":{"line":378,"column":1,"offset":9754},"end":{"line":378,"column":81,"offset":9834},"indent":[]}}],"position":{"start":{"line":378,"column":1,"offset":9754},"end":{"line":378,"column":81,"offset":9834},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{ ipProtocol: 'TCP' }","position":{"start":{"line":380,"column":1,"offset":9836},"end":{"line":382,"column":4,"offset":9869},"indent":[1,1]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: TCP Flags query\n---\nquery GetTCPFlags(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        tcpFlags: ipFlows1mGroups(\n          filter: $filter\n          limit: 8\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            tcpFlags\n          }\n        }\n      }\n    }\n  }","position":{"start":{"line":384,"column":1,"offset":9871},"end":{"line":409,"column":4,"offset":10367},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Executive summary","position":{"start":{"line":411,"column":4,"offset":10372},"end":{"line":411,"column":21,"offset":10389},"indent":[]}}],"position":{"start":{"line":411,"column":1,"offset":10369},"end":{"line":411,"column":21,"offset":10389},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The executive summary query summarizes overall activity, therefore it only filters by the selected time interval, and ignores all filters applied to the analytics.\nUse different queries, depending on the time interval you want to examine and what kind of traffic the account is seeing.","position":{"start":{"line":413,"column":1,"offset":10391},"end":{"line":414,"column":122,"offset":10676},"indent":[1]}}],"position":{"start":{"line":413,"column":1,"offset":10391},"end":{"line":414,"column":122,"offset":10676},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"If the time interval is absolute, for example March 25th 09:00 to March 25th 17:00, then execute a query for attacks within those times. ","position":{"start":{"line":416,"column":1,"offset":10678},"end":{"line":416,"column":138,"offset":10815},"indent":[]}},{"type":"link","title":null,"url":"#parameters-and-filters","children":[{"type":"text","value":"Use the appropriate query node","position":{"start":{"line":416,"column":139,"offset":10816},"end":{"line":416,"column":169,"offset":10846},"indent":[]}}],"position":{"start":{"line":416,"column":138,"offset":10815},"end":{"line":416,"column":195,"offset":10872},"indent":[]}},{"type":"text","value":", for example ","position":{"start":{"line":416,"column":195,"offset":10872},"end":{"line":416,"column":209,"offset":10886},"indent":[]}},{"type":"inlineCode","value":"ipFlows1dGroups","position":{"start":{"line":416,"column":209,"offset":10886},"end":{"line":416,"column":226,"offset":10903},"indent":[]}},{"type":"text","value":", for the time interval.","position":{"start":{"line":416,"column":226,"offset":10903},"end":{"line":416,"column":250,"offset":10927},"indent":[]}}],"position":{"start":{"line":416,"column":1,"offset":10678},"end":{"line":416,"column":250,"offset":10927},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: GetPreviousAttacks query - fetch previous attacks\n---\nquery GetPreviousAttacks($accountTag: string, $filter: filter) {\n  viewer {\n    accounts(filter: {accountTag: $accountTag}) {\n      ${queryNode}(limit: 1000, filter: $filter) {\n        dimensions {\n          attackId\n        }\n        sum {\n          packets\n          bits\n        }\n      }\n    }\n  }\n}","position":{"start":{"line":418,"column":1,"offset":10929},"end":{"line":437,"column":4,"offset":11310},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If the time interval is relative to the current time, for example the last 24 hours or the last 30 minutes, then make a query to the ","position":{"start":{"line":439,"column":1,"offset":11312},"end":{"line":439,"column":134,"offset":11445},"indent":[]}},{"type":"inlineCode","value":"ipFlows1mGroup","position":{"start":{"line":439,"column":134,"offset":11445},"end":{"line":439,"column":150,"offset":11461},"indent":[]}},{"type":"text","value":" node to check whether there were attacks in the past five minutes. Attacks within the past five minutes are classed as ongoing: the Activity Log displays ","position":{"start":{"line":439,"column":150,"offset":11461},"end":{"line":439,"column":305,"offset":11616},"indent":[]}},{"type":"inlineCode","value":"Present","position":{"start":{"line":439,"column":305,"offset":11616},"end":{"line":439,"column":314,"offset":11625},"indent":[]}},{"type":"text","value":".\nThe query response lists the ","position":{"start":{"line":439,"column":314,"offset":11625},"end":{"line":440,"column":30,"offset":11656},"indent":[1]}},{"type":"inlineCode","value":"attackID","position":{"start":{"line":440,"column":30,"offset":11656},"end":{"line":440,"column":40,"offset":11666},"indent":[]}},{"type":"text","value":" values of ongoing attacks.","position":{"start":{"line":440,"column":40,"offset":11666},"end":{"line":440,"column":67,"offset":11693},"indent":[]}}],"position":{"start":{"line":439,"column":1,"offset":11312},"end":{"line":440,"column":67,"offset":11693},"indent":[1]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: GetOngoingAttackIds query - check for ongoing attacks\n---\nquery GetOngoingAttackIds($accountTag: string, $filter: filter) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mGroups(limit: 1000, filter: $filter) {\n          dimensions {\n            attackId\n          }\n        }\n      }\n    }\n  }","position":{"start":{"line":442,"column":1,"offset":11695},"end":{"line":457,"column":4,"offset":12049},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If there are ongoing attacks, query the ","position":{"start":{"line":459,"column":1,"offset":12051},"end":{"line":459,"column":41,"offset":12091},"indent":[]}},{"type":"inlineCode","value":"ipFlows1mAttacksGroups","position":{"start":{"line":459,"column":41,"offset":12091},"end":{"line":459,"column":65,"offset":12115},"indent":[]}},{"type":"text","value":" node, filtering with the ","position":{"start":{"line":459,"column":65,"offset":12115},"end":{"line":459,"column":91,"offset":12141},"indent":[]}},{"type":"inlineCode","value":"attackID","position":{"start":{"line":459,"column":91,"offset":12141},"end":{"line":459,"column":101,"offset":12151},"indent":[]}},{"type":"text","value":" values from the previous query. The query below returns the maximum bit and packet rates.","position":{"start":{"line":459,"column":101,"offset":12151},"end":{"line":459,"column":191,"offset":12241},"indent":[]}}],"position":{"start":{"line":459,"column":1,"offset":12051},"end":{"line":459,"column":191,"offset":12241},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"---\nheader: GetOngoingAttacks query - fetch data for ongoing attacks\n---\nquery GetOngoingAttacks($accountTag: string, $filter: filter) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mAttacksGroups(limit: 1000, filter: $filter) {\n          dimensions {\n            attackId\n          }\n          max {\n            bitsPerSecond\n            packetsPerSecond\n          }\n        }\n      }\n    }\n  }","position":{"start":{"line":461,"column":1,"offset":12243},"end":{"line":480,"column":4,"offset":12688},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If there are no ongoing attacks, use the ","position":{"start":{"line":482,"column":1,"offset":12690},"end":{"line":482,"column":42,"offset":12731},"indent":[]}},{"type":"inlineCode","value":"GetPreviousAttacks","position":{"start":{"line":482,"column":42,"offset":12731},"end":{"line":482,"column":62,"offset":12751},"indent":[]}},{"type":"text","value":" query to display data for attacks within an absolute time interval.","position":{"start":{"line":482,"column":62,"offset":12751},"end":{"line":482,"column":130,"offset":12819},"indent":[]}}],"position":{"start":{"line":482,"column":1,"offset":12690},"end":{"line":482,"column":130,"offset":12819},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":45,\"pcx-content-type\":\"interim\"}","position":{"start":{"line":485,"column":1,"offset":12822},"end":{"line":485,"column":70,"offset":12891},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":485,"column":70,"offset":12891}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 45,\n  \"pcx-content-type\": \"interim\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar TableWrap = makeShortcode(\"TableWrap\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"use-graphql-to-create-widgets\"\n  }, \"Use GraphQL to create widgets\"), mdx(\"p\", null, \"This article presents examples of queries you can use to populate your own dashboard.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#use-graphql-to-create-widgets\"\n  }, \"Use GraphQL to create widgets\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#parameters-and-filters\"\n  }, \"Parameters and filters\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#timeseries-graph\"\n  }, \"Timeseries graph\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#activity-log\"\n  }, \"Activity log\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#top-n-cards---source\"\n  }, \"Top N cards - source\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#top-n-cards---destination\"\n  }, \"Top N cards - destination\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#tcp-flags\"\n  }, \"TCP Flags\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#executive-summary\"\n  }, \"Executive summary\"))))), mdx(\"p\", null, \"Use this workflow to build and test queries:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install and configure the \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.electronjs.org/apps/graphiql\"\n  }, \"GraphiQL\"), \" app to authenticate to the Cloudflare Analytics GraphQL API. Cloudflare recommends token authentication. (See \", mdx(\"em\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"/graphql-api/getting-started/authentication/api-token-auth/\"\n  }, \"Configure an Analytics API token\")), \".)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Construct the queries in the GraphiQL. You can use the introspective documentation in the GraphQL client to explore the nodes available. For further information about queries, refer to  \", mdx(\"em\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"/graphql-api/getting-started/querying-basics/\"\n  }, \"Querying basics\")), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Test your queries by running them from GraphiQL or by passing them as the payload in a cURL request to the GraphQL API endpoint.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Use the queries in your application to provide data for your dashboard widgets.\")), mdx(\"h2\", {\n    \"id\": \"parameters-and-filters\"\n  }, \"Parameters and filters\"), mdx(\"p\", null, \"These examples use the account ID for the Cloudflare account that you are querying. You can define this as a variable (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"accountTag\"), \") and reference it in your queries.\"), mdx(\"p\", null, \"The queries also use a filter to specify the time interval that you want to query. The filter uses a start time and end time to define the time interval. You use different attributes to specify the start and end times, depending on the time period that you want to query. Refer to  \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"/graphql-api/features/filtering\"\n  }, \"Filtering\")), \" for further information about filters.\"), mdx(\"p\", null, \"The following example queries for data with dates greater than or equal to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"date_geq\"), \" and less than or equal to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"date_leq\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Account and query time interval settings\\n---\\n{\\n  \\\"accountTag\\\": \\\"{account-id}\\\",\\n  \\\"filter\\\": {\\n    \\\"AND\\\":[\\n      {\\\"date_geq\\\": \\\"2020-01-19\\\"},\\n      {\\\"date_leq\\\": \\\"2020-01-20\\\"}\\n    ]\\n  }\\n}\\n\")), mdx(\"p\", null, \"This table lists Network Analytics data sets (nodes) and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"datetimeDimension\"), \" that you should use when querying data for a given time selection.\"), mdx(\"p\", null, \"When you want an aggregated view of data, use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Groups\"), \" query nodes. For example, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ipFlows1mAttacksGroups\"), \" data set represents minute-wise rollup reports of attack activity. For more detail, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/graphql-api/features/data-sets\"\n  }, mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Data sets\")), \".\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", null, mdx(\"tr\", null, mdx(\"th\", null, mdx(\"strong\", null, \"Time Selection\")), mdx(\"th\", null, mdx(\"strong\", null, \"Query node\")), mdx(\"th\", null, mdx(\"strong\", null, \"datetimeDimension\")))), mdx(\"tbody\", null, mdx(\"tr\", null, mdx(\"td\", null, \"Last week\"), mdx(\"td\", null, \"ipFlows1dGroups\"), mdx(\"td\", null, \"date\")), mdx(\"tr\", null, mdx(\"td\", null, \"Last month\"), mdx(\"td\", null, \"ipFlows1dGroups\"), mdx(\"td\", null, \"date\")), mdx(\"tr\", null, mdx(\"td\", null, \"24 hours\"), mdx(\"td\", null, \"ipFlows1mGroups\"), mdx(\"td\", null, \"datetimeFifteenMinutes\")), mdx(\"tr\", null, mdx(\"td\", null, \"12 hours\"), mdx(\"td\", null, \"ipFlows1mGroups\"), mdx(\"td\", null, \"datetimeFifteenMinutes\")), mdx(\"tr\", null, mdx(\"td\", null, \"6 hours\"), mdx(\"td\", null, \"ipFlows1mGroups\"), mdx(\"td\", null, \"datetimeFiveMinutes\")), mdx(\"tr\", null, mdx(\"td\", null, \"30 mins\"), mdx(\"td\", null, \"ipFlows1mGroups\"), mdx(\"td\", null, \"datetimeMinute\")), mdx(\"tr\", null, mdx(\"td\", null, \"Custom range\"), mdx(\"td\", null, \"Dependent on range selected\"), mdx(\"td\", null, \"Dependent on range selected\"))))), mdx(\"p\", null, \"The table below lists the start and end time attributes that are valid for query nodes representing different time ranges.\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", null, mdx(\"tr\", null, mdx(\"th\", null, mdx(\"strong\", null, \"Query node\")), mdx(\"th\", null, mdx(\"strong\", null, \"Start day / time filter\")), mdx(\"th\", null, mdx(\"strong\", null, \"End day / time filter\")))), mdx(\"tbody\", null, mdx(\"tr\", null, mdx(\"td\", null, \"ipFlows1mGroups\"), mdx(\"td\", null, \"datetimeMinute_geq\"), mdx(\"td\", null, \"datetimeMinute_leq\")), mdx(\"tr\", null, mdx(\"td\", null, \"ipFlows1mAttacksGroups\"), mdx(\"td\", null, \"date_geq\"), mdx(\"td\", null, \"date_leq\")), mdx(\"tr\", null, mdx(\"td\", null, \"ipFlows1hGroups\"), mdx(\"td\", null, \"datetimeHour_geq \"), mdx(\"td\", null, \"datetimeHour_leq\")), mdx(\"tr\", null, mdx(\"td\", null, \"ipFlows1dGroups\"), mdx(\"td\", null, \"date_geq\"), mdx(\"td\", null, \"date_leq\"))))), mdx(\"h2\", {\n    \"id\": \"timeseries-graph\"\n  }, \"Timeseries graph\"), mdx(\"p\", null, \"Use the following query to build the timeseries graph in network analytics:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Timeseries graph\\n---\\nquery ipFlowTimeseries(\\n    $accountTag: string\\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\\n  ) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        ipFlows1mGroups(\\n          limit: 1000\\n          filter: $filter\\n          orderBy: datetimeMinute_ASC\\n        ) {\\n          dimensions {\\n            timestamp: datetimeMinute\\n            attackMitigationType\\n            attackId\\n          }\\n          sum {\\n            bits\\n            packets\\n          }\\n        }\\n      }\\n    }\\n  }\\n\")), mdx(\"h2\", {\n    \"id\": \"activity-log\"\n  }, \"Activity log\"), mdx(\"p\", null, \"This query returns an activity log summarizing minute-wise rollups of attack traffic in IP flows. The query groups the data by the fields listed in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dimensions\"), \" object.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Activity log query\\n---\\nquery ipFlowEventLog(\\n    $accountTag: string\\n    $filter: AccountIpFlows1mAttacksGroupsFilter_InputObject\\n  ) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        ipFlows1mAttacksGroups(\\n          limit: 10\\n          filter: $filter\\n          orderBy: [min_datetimeMinute_ASC]\\n        ) {\\n          dimensions {\\n            attackId\\n            attackDestinationIP\\n            attackDestinationPort\\n            attackMitigationType\\n            attackSourcePort\\n            attackType\\n          }\\n          avg {\\n            bitsPerSecond\\n            packetsPerSecond\\n          }\\n          min {\\n            datetimeMinute\\n            bitsPerSecond\\n            packetsPerSecond\\n          }\\n          max {\\n            datetimeMinute\\n            bitsPerSecond\\n            packetsPerSecond\\n          }\\n          sum {\\n            bits\\n            packets\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n\")), mdx(\"h2\", {\n    \"id\": \"top-n-cards---source\"\n  }, \"Top N cards - source\"), mdx(\"p\", null, \"This query returns data about the top source IPs.\\nThe \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"limit\"), \" parameter controls the amount of records returned for each node. In the following code, the highlighted lines indicate where you configure \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"limit\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Top N Cards query\\nhighlight: [9,22,35,47,60,72]\\n---\\nquery GetTopNBySource(\\n    $accountTag: string\\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\\n    $portFilter: AccountIpFlows1mGroupsFilter_InputObject\\n  ) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        topNPorts: ipFlows1mGroups(\\n        limit: 5\\n        filter: $portFilter\\n        orderBy: [sum_(bits/packets)_DESC]\\n      ) {\\n        sum {\\n          count: (bits/packets)\\n        }\\n        dimensions {\\n          metric: sourcePort\\n          ipProtocol\\n        }\\n      }\\n      topNASN: ipFlows1mGroups(\\n        limit: 5\\n        filter: $filter\\n        orderBy: [sum_(bits/packets)_DESC]\\n      ) {\\n        sum {\\n          count: (bits/packets)\\n        }\\n        dimensions {\\n          metric: sourceIPAsn\\n          description: sourceIPASNDescription\\n        }\\n      }\\n        topNIPs: ipFlows1mGroups(\\n        limit: 5\\n        filter: $filter\\n        orderBy: [sum_(bits/packets)_DESC]\\n      ) {\\n        sum {\\n          count: (bits/packets)\\n        }\\n        dimensions {\\n          metric: sourceIP\\n        }\\n      }\\n        topNColos: ipFlows1mGroups(\\n          limit: 10\\n          filter: $filter\\n          orderBy: [sum_(bits/packets)_DESC]\\n        ) {\\n          sum {\\n            count: (bits/packets)\\n          }\\n          dimensions {\\n            metric: coloCity\\n            coloCode\\n          }\\n        }\\n        topNCountries: ipFlows1mGroups(\\n          limit: 10\\n          filter: $filter\\n          orderBy: [sum_(bits/packets)_DESC]\\n        ) {\\n          sum {\\n            count: (bits/packets)\\n          }\\n          dimensions {\\n            metric: coloCountry\\n          }\\n        }\\n        topNIPVersions: ipFlows1mGroups(\\n          limit: 2\\n          filter: $filter\\n          orderBy: [sum_(bits/packets)_DESC]\\n        ) {\\n          sum {\\n            count: (bits/packets)\\n          }\\n          dimensions {\\n            metric: ipVersion\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n\")), mdx(\"h2\", {\n    \"id\": \"top-n-cards---destination\"\n  }, \"Top N cards - destination\"), mdx(\"p\", null, \"This query returns data about the top destination IPs. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"limit\"), \" parameter controls the amount of records returned. In the following code, the highlighted lines indicate that the query returns the five highest results.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: Top N Cards - Destination\\nhighlight: [10,22]\\n---\\nquery GetTopNByDestination(\\n    $accountTag: string\\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\\n    $portFilter: AccountIpFlows1mGroupsFilter_InputObject\\n  ) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        topNIPs: ipFlows1mGroups(\\n          filter: $filter\\n          limit: 5\\n          orderBy: [sum_(bits/packets)_DESC]\\n        ) {\\n          sum {\\n            count: (bits/packets)\\n          }\\n          dimensions {\\n            metric: destinationIP\\n          }\\n        }\\n        topNPorts: ipFlows1mGroups(\\n          filter: $portFilter\\n          limit: 5\\n          orderBy: [sum_(bits/packets)_DESC]\\n        ) {\\n          sum {\\n            count: (bits/packets)\\n          }\\n          dimensions {\\n            metric: destinationPort\\n            ipProtocol\\n          }\\n        }\\n      }\\n    }\\n  }\\n\")), mdx(\"h2\", {\n    \"id\": \"tcp-flags\"\n  }, \"TCP Flags\"), mdx(\"p\", null, \"This query extracts the number of TCP packets from the minute-wise rollups of IP flows, and groups the results by TCP flag value. It uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"limit: 8\"), \" to display the top eight results, and presents them in descending order.\"), mdx(\"p\", null, \"Add the following line to the filter to indicate that you want to view TCP data:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{ ipProtocol: 'TCP' }\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: TCP Flags query\\n---\\nquery GetTCPFlags(\\n    $accountTag: string\\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\\n  ) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        tcpFlags: ipFlows1mGroups(\\n          filter: $filter\\n          limit: 8\\n          orderBy: [sum_(bits/packets)_DESC]\\n        ) {\\n          sum {\\n            count: (bits/packets)\\n          }\\n          dimensions {\\n            tcpFlags\\n          }\\n        }\\n      }\\n    }\\n  }\\n\")), mdx(\"h2\", {\n    \"id\": \"executive-summary\"\n  }, \"Executive summary\"), mdx(\"p\", null, \"The executive summary query summarizes overall activity, therefore it only filters by the selected time interval, and ignores all filters applied to the analytics.\\nUse different queries, depending on the time interval you want to examine and what kind of traffic the account is seeing.\"), mdx(\"p\", null, \"If the time interval is absolute, for example March 25th 09:00 to March 25th 17:00, then execute a query for attacks within those times. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#parameters-and-filters\"\n  }, \"Use the appropriate query node\"), \", for example \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ipFlows1dGroups\"), \", for the time interval.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: GetPreviousAttacks query - fetch previous attacks\\n---\\nquery GetPreviousAttacks($accountTag: string, $filter: filter) {\\n  viewer {\\n    accounts(filter: {accountTag: $accountTag}) {\\n      ${queryNode}(limit: 1000, filter: $filter) {\\n        dimensions {\\n          attackId\\n        }\\n        sum {\\n          packets\\n          bits\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"If the time interval is relative to the current time, for example the last 24 hours or the last 30 minutes, then make a query to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ipFlows1mGroup\"), \" node to check whether there were attacks in the past five minutes. Attacks within the past five minutes are classed as ongoing: the Activity Log displays \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Present\"), \".\\nThe query response lists the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"attackID\"), \" values of ongoing attacks.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: GetOngoingAttackIds query - check for ongoing attacks\\n---\\nquery GetOngoingAttackIds($accountTag: string, $filter: filter) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        ipFlows1mGroups(limit: 1000, filter: $filter) {\\n          dimensions {\\n            attackId\\n          }\\n        }\\n      }\\n    }\\n  }\\n\")), mdx(\"p\", null, \"If there are ongoing attacks, query the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ipFlows1mAttacksGroups\"), \" node, filtering with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"attackID\"), \" values from the previous query. The query below returns the maximum bit and packet rates.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"---\\nheader: GetOngoingAttacks query - fetch data for ongoing attacks\\n---\\nquery GetOngoingAttacks($accountTag: string, $filter: filter) {\\n    viewer {\\n      accounts(filter: { accountTag: $accountTag }) {\\n        ipFlows1mAttacksGroups(limit: 1000, filter: $filter) {\\n          dimensions {\\n            attackId\\n          }\\n          max {\\n            bitsPerSecond\\n            packetsPerSecond\\n          }\\n        }\\n      }\\n    }\\n  }\\n\")), mdx(\"p\", null, \"If there are no ongoing attacks, use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GetPreviousAttacks\"), \" query to display data for attacks within an absolute time interval.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"order\": 45,\n  \"pcx-content-type\": \"interim\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst TableWrap = makeShortcode(\"TableWrap\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"use-graphql-to-create-widgets\"\n    }}>{`Use GraphQL to create widgets`}</h1>\n    <p>{`This article presents examples of queries you can use to populate your own dashboard.`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#use-graphql-to-create-widgets\"\n        }}>{`Use GraphQL to create widgets`}</a><ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#parameters-and-filters\"\n            }}>{`Parameters and filters`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#timeseries-graph\"\n            }}>{`Timeseries graph`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#activity-log\"\n            }}>{`Activity log`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#top-n-cards---source\"\n            }}>{`Top N cards - source`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#top-n-cards---destination\"\n            }}>{`Top N cards - destination`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#tcp-flags\"\n            }}>{`TCP Flags`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#executive-summary\"\n            }}>{`Executive summary`}</a></li>\n        </ul></li>\n    </ul>\n    <p>{`Use this workflow to build and test queries:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Install and configure the `}<a parentName=\"li\" {...{\n          \"href\": \"https://www.electronjs.org/apps/graphiql\"\n        }}>{`GraphiQL`}</a>{` app to authenticate to the Cloudflare Analytics GraphQL API. Cloudflare recommends token authentication. (See `}<em parentName=\"li\"><a parentName=\"em\" {...{\n            \"href\": \"/graphql-api/getting-started/authentication/api-token-auth/\"\n          }}>{`Configure an Analytics API token`}</a></em>{`.)`}</li>\n      <li parentName=\"ul\">{`Construct the queries in the GraphiQL. You can use the introspective documentation in the GraphQL client to explore the nodes available. For further information about queries, refer to  `}<em parentName=\"li\"><a parentName=\"em\" {...{\n            \"href\": \"/graphql-api/getting-started/querying-basics/\"\n          }}>{`Querying basics`}</a></em>{`.`}</li>\n      <li parentName=\"ul\">{`Test your queries by running them from GraphiQL or by passing them as the payload in a cURL request to the GraphQL API endpoint.`}</li>\n      <li parentName=\"ul\">{`Use the queries in your application to provide data for your dashboard widgets.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"parameters-and-filters\"\n    }}>{`Parameters and filters`}</h2>\n    <p>{`These examples use the account ID for the Cloudflare account that you are querying. You can define this as a variable (`}<inlineCode parentName=\"p\">{`accountTag`}</inlineCode>{`) and reference it in your queries.`}</p>\n    <p>{`The queries also use a filter to specify the time interval that you want to query. The filter uses a start time and end time to define the time interval. You use different attributes to specify the start and end times, depending on the time period that you want to query. Refer to  `}<em parentName=\"p\"><a parentName=\"em\" {...{\n          \"href\": \"/graphql-api/features/filtering\"\n        }}>{`Filtering`}</a></em>{` for further information about filters.`}</p>\n    <p>{`The following example queries for data with dates greater than or equal to `}<inlineCode parentName=\"p\">{`date_geq`}</inlineCode>{` and less than or equal to `}<inlineCode parentName=\"p\">{`date_leq`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Account and query time interval settings\n---\n{\n  \"accountTag\": \"{account-id}\",\n  \"filter\": {\n    \"AND\":[\n      {\"date_geq\": \"2020-01-19\"},\n      {\"date_leq\": \"2020-01-20\"}\n    ]\n  }\n}\n`}</code></pre>\n    <p>{`This table lists Network Analytics data sets (nodes) and the `}<inlineCode parentName=\"p\">{`datetimeDimension`}</inlineCode>{` that you should use when querying data for a given time selection.`}</p>\n    <p>{`When you want an aggregated view of data, use the `}<inlineCode parentName=\"p\">{`Groups`}</inlineCode>{` query nodes. For example, the `}<inlineCode parentName=\"p\">{`ipFlows1mAttacksGroups`}</inlineCode>{` data set represents minute-wise rollup reports of attack activity. For more detail, see `}<a parentName=\"p\" {...{\n        \"href\": \"/graphql-api/features/data-sets\"\n      }}><em parentName=\"a\">{`Data sets`}</em></a>{`.`}</p>\n    <TableWrap mdxType=\"TableWrap\">\n      <table>\n  <thead>\n  <tr>\n   <th><strong>Time Selection</strong>\n   </th>\n   <th><strong>Query node</strong>\n   </th>\n   <th><strong>datetimeDimension</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td>Last week</td>\n   <td>ipFlows1dGroups</td>\n   <td>date</td>\n  </tr>\n  <tr>\n   <td>Last month</td>\n   <td>ipFlows1dGroups</td>\n   <td>date</td>\n  </tr>\n  <tr>\n   <td>24 hours</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeFifteenMinutes</td>\n  </tr>\n  <tr>\n   <td>12 hours</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeFifteenMinutes</td>\n  </tr>\n  <tr>\n   <td>6 hours</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeFiveMinutes</td>\n  </tr>\n  <tr>\n   <td>30 mins</td>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeMinute</td>\n  </tr>\n  <tr>\n   <td>Custom range</td>\n   <td>Dependent on range selected</td>\n   <td>Dependent on range selected</td>\n  </tr>\n  </tbody>\n      </table>\n    </TableWrap>\n    <p>{`The table below lists the start and end time attributes that are valid for query nodes representing different time ranges.`}</p>\n    <TableWrap mdxType=\"TableWrap\">\n      <table>\n  <thead>\n  <tr>\n   <th><strong>Query node</strong>\n   </th>\n   <th><strong>Start day / time filter</strong>\n   </th>\n   <th><strong>End day / time filter</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td>ipFlows1mGroups</td>\n   <td>datetimeMinute_geq</td>\n   <td>datetimeMinute_leq</td>\n  </tr>\n  <tr>\n   <td>ipFlows1mAttacksGroups</td>\n   <td>date_geq</td>\n   <td>date_leq</td>\n  </tr>\n  <tr>\n   <td>ipFlows1hGroups</td>\n   <td>datetimeHour_geq </td>\n   <td>datetimeHour_leq</td>\n  </tr>\n  <tr>\n   <td>ipFlows1dGroups</td>\n   <td>date_geq</td>\n   <td>date_leq</td>\n  </tr>\n  </tbody>\n      </table>\n    </TableWrap>\n    <h2 {...{\n      \"id\": \"timeseries-graph\"\n    }}>{`Timeseries graph`}</h2>\n    <p>{`Use the following query to build the timeseries graph in network analytics:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Timeseries graph\n---\nquery ipFlowTimeseries(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mGroups(\n          limit: 1000\n          filter: $filter\n          orderBy: datetimeMinute_ASC\n        ) {\n          dimensions {\n            timestamp: datetimeMinute\n            attackMitigationType\n            attackId\n          }\n          sum {\n            bits\n            packets\n          }\n        }\n      }\n    }\n  }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"activity-log\"\n    }}>{`Activity log`}</h2>\n    <p>{`This query returns an activity log summarizing minute-wise rollups of attack traffic in IP flows. The query groups the data by the fields listed in the `}<inlineCode parentName=\"p\">{`dimensions`}</inlineCode>{` object.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Activity log query\n---\nquery ipFlowEventLog(\n    $accountTag: string\n    $filter: AccountIpFlows1mAttacksGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mAttacksGroups(\n          limit: 10\n          filter: $filter\n          orderBy: [min_datetimeMinute_ASC]\n        ) {\n          dimensions {\n            attackId\n            attackDestinationIP\n            attackDestinationPort\n            attackMitigationType\n            attackSourcePort\n            attackType\n          }\n          avg {\n            bitsPerSecond\n            packetsPerSecond\n          }\n          min {\n            datetimeMinute\n            bitsPerSecond\n            packetsPerSecond\n          }\n          max {\n            datetimeMinute\n            bitsPerSecond\n            packetsPerSecond\n          }\n          sum {\n            bits\n            packets\n          }\n        }\n      }\n    }\n  }\n\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"top-n-cards---source\"\n    }}>{`Top N cards - source`}</h2>\n    <p>{`This query returns data about the top source IPs.\nThe `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` parameter controls the amount of records returned for each node. In the following code, the highlighted lines indicate where you configure `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Top N Cards query\nhighlight: [9,22,35,47,60,72]\n---\nquery GetTopNBySource(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n    $portFilter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        topNPorts: ipFlows1mGroups(\n        limit: 5\n        filter: $portFilter\n        orderBy: [sum_(bits/packets)_DESC]\n      ) {\n        sum {\n          count: (bits/packets)\n        }\n        dimensions {\n          metric: sourcePort\n          ipProtocol\n        }\n      }\n      topNASN: ipFlows1mGroups(\n        limit: 5\n        filter: $filter\n        orderBy: [sum_(bits/packets)_DESC]\n      ) {\n        sum {\n          count: (bits/packets)\n        }\n        dimensions {\n          metric: sourceIPAsn\n          description: sourceIPASNDescription\n        }\n      }\n        topNIPs: ipFlows1mGroups(\n        limit: 5\n        filter: $filter\n        orderBy: [sum_(bits/packets)_DESC]\n      ) {\n        sum {\n          count: (bits/packets)\n        }\n        dimensions {\n          metric: sourceIP\n        }\n      }\n        topNColos: ipFlows1mGroups(\n          limit: 10\n          filter: $filter\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: coloCity\n            coloCode\n          }\n        }\n        topNCountries: ipFlows1mGroups(\n          limit: 10\n          filter: $filter\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: coloCountry\n          }\n        }\n        topNIPVersions: ipFlows1mGroups(\n          limit: 2\n          filter: $filter\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: ipVersion\n          }\n        }\n      }\n    }\n  }\n\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"top-n-cards---destination\"\n    }}>{`Top N cards - destination`}</h2>\n    <p>{`This query returns data about the top destination IPs. The `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` parameter controls the amount of records returned. In the following code, the highlighted lines indicate that the query returns the five highest results.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: Top N Cards - Destination\nhighlight: [10,22]\n---\nquery GetTopNByDestination(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n    $portFilter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        topNIPs: ipFlows1mGroups(\n          filter: $filter\n          limit: 5\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: destinationIP\n          }\n        }\n        topNPorts: ipFlows1mGroups(\n          filter: $portFilter\n          limit: 5\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            metric: destinationPort\n            ipProtocol\n          }\n        }\n      }\n    }\n  }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"tcp-flags\"\n    }}>{`TCP Flags`}</h2>\n    <p>{`This query extracts the number of TCP packets from the minute-wise rollups of IP flows, and groups the results by TCP flag value. It uses `}<inlineCode parentName=\"p\">{`limit: 8`}</inlineCode>{` to display the top eight results, and presents them in descending order.`}</p>\n    <p>{`Add the following line to the filter to indicate that you want to view TCP data:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{ ipProtocol: 'TCP' }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: TCP Flags query\n---\nquery GetTCPFlags(\n    $accountTag: string\n    $filter: AccountIpFlows1mGroupsFilter_InputObject\n  ) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        tcpFlags: ipFlows1mGroups(\n          filter: $filter\n          limit: 8\n          orderBy: [sum_(bits/packets)_DESC]\n        ) {\n          sum {\n            count: (bits/packets)\n          }\n          dimensions {\n            tcpFlags\n          }\n        }\n      }\n    }\n  }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"executive-summary\"\n    }}>{`Executive summary`}</h2>\n    <p>{`The executive summary query summarizes overall activity, therefore it only filters by the selected time interval, and ignores all filters applied to the analytics.\nUse different queries, depending on the time interval you want to examine and what kind of traffic the account is seeing.`}</p>\n    <p>{`If the time interval is absolute, for example March 25th 09:00 to March 25th 17:00, then execute a query for attacks within those times. `}<a parentName=\"p\" {...{\n        \"href\": \"#parameters-and-filters\"\n      }}>{`Use the appropriate query node`}</a>{`, for example `}<inlineCode parentName=\"p\">{`ipFlows1dGroups`}</inlineCode>{`, for the time interval.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: GetPreviousAttacks query - fetch previous attacks\n---\nquery GetPreviousAttacks($accountTag: string, $filter: filter) {\n  viewer {\n    accounts(filter: {accountTag: $accountTag}) {\n      \\${queryNode}(limit: 1000, filter: $filter) {\n        dimensions {\n          attackId\n        }\n        sum {\n          packets\n          bits\n        }\n      }\n    }\n  }\n}\n`}</code></pre>\n    <p>{`If the time interval is relative to the current time, for example the last 24 hours or the last 30 minutes, then make a query to the `}<inlineCode parentName=\"p\">{`ipFlows1mGroup`}</inlineCode>{` node to check whether there were attacks in the past five minutes. Attacks within the past five minutes are classed as ongoing: the Activity Log displays `}<inlineCode parentName=\"p\">{`Present`}</inlineCode>{`.\nThe query response lists the `}<inlineCode parentName=\"p\">{`attackID`}</inlineCode>{` values of ongoing attacks.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: GetOngoingAttackIds query - check for ongoing attacks\n---\nquery GetOngoingAttackIds($accountTag: string, $filter: filter) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mGroups(limit: 1000, filter: $filter) {\n          dimensions {\n            attackId\n          }\n        }\n      }\n    }\n  }\n`}</code></pre>\n    <p>{`If there are ongoing attacks, query the `}<inlineCode parentName=\"p\">{`ipFlows1mAttacksGroups`}</inlineCode>{` node, filtering with the `}<inlineCode parentName=\"p\">{`attackID`}</inlineCode>{` values from the previous query. The query below returns the maximum bit and packet rates.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`---\nheader: GetOngoingAttacks query - fetch data for ongoing attacks\n---\nquery GetOngoingAttacks($accountTag: string, $filter: filter) {\n    viewer {\n      accounts(filter: { accountTag: $accountTag }) {\n        ipFlows1mAttacksGroups(limit: 1000, filter: $filter) {\n          dimensions {\n            attackId\n          }\n          max {\n            bitsPerSecond\n            packetsPerSecond\n          }\n        }\n      }\n    }\n  }\n`}</code></pre>\n    <p>{`If there are no ongoing attacks, use the `}<inlineCode parentName=\"p\">{`GetPreviousAttacks`}</inlineCode>{` query to display data for attacks within an absolute time interval.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}