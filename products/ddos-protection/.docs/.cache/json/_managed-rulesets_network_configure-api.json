{"data":{"mdx":{"id":"09bc0ceb-2d2b-5100-a104-5d61d0da8dcd","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Configure the Managed Ruleset via API\",\n  \"pcx-content-type\": \"concept\",\n  \"order\": 2\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"configure-network-layer-ddos-attack-protection-via-api\"\n  }, \"Configure Network-layer DDoS Attack Protection via API\"), mdx(\"p\", null, \"Configure the Cloudflare Network-layer DDoS Attack Protection Managed Ruleset by defining overrides at the account level using the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/rulesets-api\"\n  }, \"Rulesets API\"), \".\"), mdx(\"p\", null, \"Each account has the Network-layer DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ddos_l4\"), \" phase entry point ruleset explicitly. You only have to create a rule in the phase entry point to deploy the Managed Ruleset if you need to configure overrides.\"), mdx(\"h2\", {\n    \"id\": \"configure-an-override-for-the-network-layer-ddos-attack-protection-managed-ruleset\"\n  }, \"Configure an override for the Network-layer DDoS Attack Protection Managed Ruleset\"), mdx(\"p\", null, \"You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.\"), mdx(\"p\", null, \"When configuring the Network-layer DDoS Attack Protection Managed Ruleset, use overrides to define a different \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"action\"), \" or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sensitivity\"), \" from the default values. For more information on these rule parameters and the allowed values, refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/network/override-parameters\"\n  }, \"Managed Ruleset parameters\"), \".\"), mdx(Aside, {\n    type: \"warning\",\n    header: \"Important\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The Network-layer DDoS Attack Protection Managed Ruleset is always enabled. You cannot disable its rules using an override with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"enabled\\\": false\"), \".\"), mdx(\"p\", null, \"You can only define overrides for the Network-layer DDoS Attack Protection Managed Ruleset at the account level.\")), mdx(\"h2\", {\n    \"id\": \"example\"\n  }, \"Example\"), mdx(\"p\", null, \"The following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" example creates a new phase ruleset (or updates the existing one) for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ddos_l4\"), \" phase at the account level. The request includes several overrides to adjust the default behavior of the Network-layer DDoS Attack Protection Managed Ruleset. These overrides are the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All rules of the Network-layer DDoS Attack Protection Managed Ruleset will have their sensitivity set to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"medium\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All rules tagged with the tag \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{tag-name}\"), \" will have their sensitivity set to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"low\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The rule with ID \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{rule-id}\"), \" will use the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"block\"), \" action.\")), mdx(\"p\", null, \"The overrides apply to all packets matching the rule expression: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ip.dst in { 1.1.1.0/24 }\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"curl -X PUT \\\\\\n-H \\\"X-Auth-Email: user@cloudflare.com\\\" \\\\\\n-H \\\"X-Auth-Key: REDACTED\\\"\\n\\\"https://api.cloudflare.com/client/v4/accounts/{account-id}/rulesets/phases/ddos_l4/entrypoint\\\" \\\\\\n-d '{\\n  \\\"description\\\": \\\"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\\\",\\n  \\\"rules\\\": [\\n    {\\n      \\\"action\\\": \\\"execute\\\",\\n      \\\"expression\\\": \\\"ip.dst in { 1.1.1.0/24 }\\\",\\n      \\\"action_parameters\\\": {\\n        \\\"id\\\": \\\"{network-managed-ruleset-id}\\\",\\n        \\\"overrides\\\": {\\n          \\\"sensitivity_level\\\": \\\"medium\\\",\\n          \\\"categories\\\": [\\n            {\\n              \\\"category\\\": \\\"{tag-name}\\\",\\n              \\\"sensitivity_level\\\": \\\"low\\\"\\n            }\\n          ],\\n          \\\"rules\\\": [\\n            {\\n              \\\"id\\\": \\\"{rule-id}\\\",\\n              \\\"action\\\": \\\"block\\\"\\n            }\\n          ]\\n        }\\n      }\\n    }\\n  ]\\n}'\\n\")), mdx(\"p\", null, \"The response returns the created (or updated) phase entry point ruleset.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"result\\\": {\\n    \\\"id\\\": \\\"{root-ruleset-id}\\\",\\n    \\\"name\\\": \\\"default\\\",\\n    \\\"description\\\": \\\"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\\\",\\n    \\\"kind\\\": \\\"root\\\",\\n    \\\"version\\\": \\\"1\\\",\\n    \\\"rules\\\": [\\n      {\\n        \\\"id\\\": \\\"{entrypoint-rule-id}\\\",\\n        \\\"version\\\": \\\"1\\\",\\n        \\\"action\\\": \\\"execute\\\",\\n        \\\"action_parameters\\\": {\\n          \\\"id\\\": \\\"{network-managed-ruleset-id}\\\",\\n          \\\"version\\\": \\\"latest\\\",\\n          \\\"overrides\\\": {\\n            \\\"categories\\\": [\\n              {\\n                \\\"category\\\": \\\"{tag-name}\\\",\\n                \\\"sensitivity_level\\\": \\\"low\\\"\\n              }\\n            ],\\n            \\\"rules\\\": [\\n              {\\n                \\\"id\\\": \\\"{rule-id}\\\",\\n                \\\"action\\\": \\\"block\\\"\\n              }\\n            ],\\n            \\\"sensitivity_level\\\": \\\"medium\\\"\\n          }\\n        },\\n        \\\"expression\\\": \\\"ip.dst in { 1.1.1.0/24 }\\\",\\n        \\\"last_updated\\\": \\\"2021-08-16T04:14:47.977741Z\\\",\\n        \\\"ref\\\": \\\"{overridden-rule-ref}\\\",\\n        \\\"enabled\\\": true\\n      }\\n    ],\\n    \\\"last_updated\\\": \\\"2021-08-16T04:14:47.977741Z\\\",\\n    \\\"phase\\\": \\\"ddos_l4\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"For more information on defining overrides for Managed Rulesets using the Rulesets API, check \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset\"\n  }, \"Override a Managed Ruleset\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"Configure the Managed Ruleset via API","type":null,"updated":null}}},"pageContext":{"id":"09bc0ceb-2d2b-5100-a104-5d61d0da8dcd","fields":{"slug":"/managed-rulesets/network/configure-api"},"frontmatter":{"title":"Configure the Managed Ruleset via API","type":null,"order":2,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Configure Network-layer DDoS Attack Protection via API","depth":1}],"tableOfContents":{"items":[{"url":"#configure-network-layer-ddos-attack-protection-via-api","title":"Configure Network-layer DDoS Attack Protection via API","items":[{"url":"#configure-an-override-for-the-network-layer-ddos-attack-protection-managed-ruleset","title":"Configure an override for the Network-layer DDoS Attack Protection Managed Ruleset"},{"url":"#example","title":"Example"}]}]},"parent":{"modifiedTime":"2021-12-17","relativePath":"managed-rulesets/network/configure-api.md"}}}