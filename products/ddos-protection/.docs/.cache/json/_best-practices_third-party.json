{"data":{"mdx":{"id":"bb5bb212-2a88-5656-91a7-b4b17f007716","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Third-party services and DDoS protection\",\n  \"pcx-content-type\": \"reference\",\n  \"order\": 1\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"third-party-services-and-cloudflare-ddos-protection\"\n  }, \"Third-party services and Cloudflare DDoS protection\"), mdx(\"h2\", {\n    \"id\": \"using-a-third-party-cdn-in-front-of-cloudflare\"\n  }, \"Using a third-party CDN in front of Cloudflare\"), mdx(\"p\", null, \"Some Cloudflare customers choose to use a Content Delivery Network (CDN) in front of Cloudflare to cache and serve their resources.\"), mdx(\"p\", null, \"Cloudflare recommends that you \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"do not use a third-party CDN in front of Cloudflare\"), \". Some CDN providers may introduce subtleties into HTTP requests that deviate from protocol standards and/or protocol best practices. Additionally, because traffic to Cloudflare will originate from a limited set of IP addresses of the third-party CDN, in rare occasions \\u2014 such as when using the Akamai CDN in front of Cloudflare \\u2014 it may appear as if the CDN is launching a DDoS attack against Cloudflare due to the amount of traffic from these limited IP addresses.\"), mdx(\"p\", null, \"Therefore, it is recommended that you \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"use the \", mdx(\"a\", {\n    parentName: \"strong\",\n    \"href\": \"https://developers.cloudflare.com/cache/\"\n  }, \"Cloudflare CDN\")), \", which provides the following benefits:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You remove an additional hop between vendor data centers, thus reducing latency for your users.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You perform DDoS filtering in the first point of contact from the Internet, which is a recommended best practice.\")), mdx(\"p\", null, \"Note that, if you are using a third-party CDN in front of Cloudflare and Cloudflare mitigates a DDoS attack, you will still pay your first-hop CDN provider for the attack traffic that they processed before it was mitigated by Cloudflare.\"), mdx(\"h3\", {\n    \"id\": \"recommended-ddos-configuration-adjustments\"\n  }, \"Recommended DDoS configuration adjustments\"), mdx(\"p\", null, \"If you are using the Akamai CDN in front of Cloudflare, it is recommended that you change the action and/or sensitivity level of the DDoS rule named \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"HTTP requests with unusual HTTP headers or URI path (signature #1)\"), \" with rule ID \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"0b1e17bd25c74e38834f19043486aee1\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Change the rule\\u2019s action to \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Log\"), \" (only available on Enterprise plans) to view the flagged traffic in the \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/analytics\"\n  }, \"analytics dashboard\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Alternatively, change the rule's \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Sensitivity Level\"), \" to \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Essentially Off\"), \" to prevent the rule from being triggered.\")), mdx(\"p\", null, \"For more information, refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/http#ruleset-configuration\"\n  }, \"HTTP DDoS Attack Protection Managed Ruleset > Ruleset configuration\"), \".\"), mdx(\"h2\", {\n    \"id\": \"using-vpns-nats-and-other-third-party-services\"\n  }, \"Using VPNs, NATs, and other third-party services\"), mdx(\"p\", null, \"Some Cloudflare Magic Transit customers operate Virtual Private Networks (VPN) so that their remote employees can connect securely to the organization\\u2019s services. Additionally, larger organizations have Network Addressing Translation (NAT) systems that manage connections in and out of their network.\"), mdx(\"p\", null, \"Cloudflare Magic Transit customers may also use third-party services such as Zoom, Webex, Microsoft Teams, and others for their internal organization communication. Because traffic to Cloudflare will be originating from a limited set of IP addresses belonging to these third-party services, it may appear as if the services are launching a DDoS attack against Cloudflare due to the amount of traffic from limited IP addresses.\"), mdx(\"p\", null, \"Additionally, since this traffic may also be targeting a limited set of destinations (for example, the same designated service ports, VPN endpoints, or NAT IP addresses), it may appear as if the CDN is launching a DDoS attack against Cloudflare due to the amount of traffic from a limited set of IPs \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"to\"), \" a limited set of IPs.\"), mdx(\"h3\", {\n    \"id\": \"recommended-ddos-configuration-adjustments-1\"\n  }, \"Recommended DDoS configuration adjustments\"), mdx(\"p\", null, \"If your organization uses VPNs, NATs, or third-party services at high rates of over 100 Mbps, it is recommended that you one of the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Change the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Sensitivity Level\"), \" of the relevant rules to a lower level. Changing the level to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Essentially Off\"), \" will prevent the rules from being triggered. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/http\"\n  }, \"HTTP DDoS Attack Protection Managed Ruleset\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/network\"\n  }, \"Network-layer DDoS Attack Protection Managed Ruleset\"), \" for more information on the available adjustments per ruleset and how to perform them.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Exclude the desired traffic from the Managed DDoS rule using expression filters. You can exclude a combination of source ports, source IP addresses, destination ports, destination IP addresses, and protocol. For more information, refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/network/configure-api\"\n  }, \"Configure Network-layer DDoS Attack Protection via API\"), \".\"))), mdx(\"p\", null, \"If you are on an Enterprise plan, you can change a rule\\u2019s action to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Log\"), \" to view the flagged traffic in the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/reference/analytics\"\n  }, \"analytics dashboard\"), \". After gathering this information, you can later define rule adjustments as previously described.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"Third-party services and DDoS protection","type":null,"updated":null}}},"pageContext":{"id":"bb5bb212-2a88-5656-91a7-b4b17f007716","fields":{"slug":"/best-practices/third-party"},"frontmatter":{"title":"Third-party services and DDoS protection","type":null,"order":1,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Third-party services and Cloudflare DDoS protection","depth":1}],"tableOfContents":{"items":[{"url":"#third-party-services-and-cloudflare-ddos-protection","title":"Third-party services and Cloudflare DDoS protection","items":[{"url":"#using-a-third-party-cdn-in-front-of-cloudflare","title":"Using a third-party CDN in front of Cloudflare","items":[{"url":"#recommended-ddos-configuration-adjustments","title":"Recommended DDoS configuration adjustments"}]},{"url":"#using-vpns-nats-and-other-third-party-services","title":"Using VPNs, NATs, and other third-party services","items":[{"url":"#recommended-ddos-configuration-adjustments-1","title":"Recommended DDoS configuration adjustments"}]}]}]},"parent":{"modifiedTime":"2021-12-17","relativePath":"best-practices/third-party.md"}}}