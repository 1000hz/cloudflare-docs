{"expireTime":9007200894493391000,"key":"gatsby-plugin-mdx-entire-payload-a624043a68863712607ac9cb796dc7e9-","val":{"mdast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Configure Network-layer DDoS Attack Protection via API","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":57,"offset":57},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":57,"offset":57},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Configure the Cloudflare Network-layer DDoS Attack Protection Managed Ruleset by defining overrides at the account level using the ","position":{"start":{"line":4,"column":1,"offset":59},"end":{"line":4,"column":132,"offset":190},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/ruleset-engine/rulesets-api","children":[{"type":"text","value":"Rulesets API","position":{"start":{"line":4,"column":133,"offset":191},"end":{"line":4,"column":145,"offset":203},"indent":[]}}],"position":{"start":{"line":4,"column":132,"offset":190},"end":{"line":4,"column":209,"offset":267},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":4,"column":209,"offset":267},"end":{"line":4,"column":210,"offset":268},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":59},"end":{"line":4,"column":210,"offset":268},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each account has the Network-layer DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the ","position":{"start":{"line":6,"column":1,"offset":270},"end":{"line":6,"column":164,"offset":433},"indent":[]}},{"type":"inlineCode","value":"ddos_l4","position":{"start":{"line":6,"column":164,"offset":433},"end":{"line":6,"column":173,"offset":442},"indent":[]}},{"type":"text","value":" phase entry point ruleset explicitly. You only have to create a rule in the phase entry point to deploy the Managed Ruleset if you need to configure overrides.","position":{"start":{"line":6,"column":173,"offset":442},"end":{"line":6,"column":333,"offset":602},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":270},"end":{"line":6,"column":333,"offset":602},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configure an override for the Network-layer DDoS Attack Protection Managed Ruleset","position":{"start":{"line":8,"column":4,"offset":607},"end":{"line":8,"column":86,"offset":689},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":604},"end":{"line":8,"column":86,"offset":689},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.","position":{"start":{"line":10,"column":1,"offset":691},"end":{"line":10,"column":87,"offset":777},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":691},"end":{"line":10,"column":87,"offset":777},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When configuring the Network-layer DDoS Attack Protection Managed Ruleset, use overrides to define a different ","position":{"start":{"line":12,"column":1,"offset":779},"end":{"line":12,"column":112,"offset":890},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"action","position":{"start":{"line":12,"column":114,"offset":892},"end":{"line":12,"column":120,"offset":898},"indent":[]}}],"position":{"start":{"line":12,"column":112,"offset":890},"end":{"line":12,"column":122,"offset":900},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":12,"column":122,"offset":900},"end":{"line":12,"column":126,"offset":904},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"sensitivity","position":{"start":{"line":12,"column":128,"offset":906},"end":{"line":12,"column":139,"offset":917},"indent":[]}}],"position":{"start":{"line":12,"column":126,"offset":904},"end":{"line":12,"column":141,"offset":919},"indent":[]}},{"type":"text","value":" from the default values. For more information on these rule parameters and the allowed values, refer to ","position":{"start":{"line":12,"column":141,"offset":919},"end":{"line":12,"column":246,"offset":1024},"indent":[]}},{"type":"link","title":null,"url":"/managed-rulesets/network/override-parameters","children":[{"type":"text","value":"Managed Ruleset parameters","position":{"start":{"line":12,"column":247,"offset":1025},"end":{"line":12,"column":273,"offset":1051},"indent":[]}}],"position":{"start":{"line":12,"column":246,"offset":1024},"end":{"line":12,"column":321,"offset":1099},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":12,"column":321,"offset":1099},"end":{"line":12,"column":322,"offset":1100},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":779},"end":{"line":12,"column":322,"offset":1100},"indent":[]}},{"type":"jsx","value":"<Aside type='warning' header='Important'>","position":{"start":{"line":14,"column":1,"offset":1102},"end":{"line":14,"column":42,"offset":1143},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Network-layer DDoS Attack Protection Managed Ruleset is always enabled. You cannot disable its rules using an override with ","position":{"start":{"line":16,"column":1,"offset":1145},"end":{"line":16,"column":129,"offset":1273},"indent":[]}},{"type":"inlineCode","value":"\"enabled\": false","position":{"start":{"line":16,"column":129,"offset":1273},"end":{"line":16,"column":147,"offset":1291},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":16,"column":147,"offset":1291},"end":{"line":16,"column":148,"offset":1292},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1145},"end":{"line":16,"column":148,"offset":1292},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can only define overrides for the Network-layer DDoS Attack Protection Managed Ruleset at the account level.","position":{"start":{"line":18,"column":1,"offset":1294},"end":{"line":18,"column":113,"offset":1406},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1294},"end":{"line":18,"column":113,"offset":1406},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":20,"column":1,"offset":1408},"end":{"line":20,"column":9,"offset":1416},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Example","position":{"start":{"line":22,"column":4,"offset":1421},"end":{"line":22,"column":11,"offset":1428},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1418},"end":{"line":22,"column":11,"offset":1428},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following ","position":{"start":{"line":24,"column":1,"offset":1430},"end":{"line":24,"column":15,"offset":1444},"indent":[]}},{"type":"inlineCode","value":"PUT","position":{"start":{"line":24,"column":15,"offset":1444},"end":{"line":24,"column":20,"offset":1449},"indent":[]}},{"type":"text","value":" example creates a new phase ruleset (or updates the existing one) for the ","position":{"start":{"line":24,"column":20,"offset":1449},"end":{"line":24,"column":95,"offset":1524},"indent":[]}},{"type":"inlineCode","value":"ddos_l4","position":{"start":{"line":24,"column":95,"offset":1524},"end":{"line":24,"column":104,"offset":1533},"indent":[]}},{"type":"text","value":" phase at the account level. The request includes several overrides to adjust the default behavior of the Network-layer DDoS Attack Protection Managed Ruleset. These overrides are the following:","position":{"start":{"line":24,"column":104,"offset":1533},"end":{"line":24,"column":298,"offset":1727},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1430},"end":{"line":24,"column":298,"offset":1727},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"All rules of the Network-layer DDoS Attack Protection Managed Ruleset will have their sensitivity set to ","position":{"start":{"line":26,"column":3,"offset":1731},"end":{"line":26,"column":108,"offset":1836},"indent":[]}},{"type":"inlineCode","value":"medium","position":{"start":{"line":26,"column":108,"offset":1836},"end":{"line":26,"column":116,"offset":1844},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":26,"column":116,"offset":1844},"end":{"line":26,"column":117,"offset":1845},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":1731},"end":{"line":26,"column":117,"offset":1845},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1729},"end":{"line":26,"column":117,"offset":1845},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"All rules tagged with the tag ","position":{"start":{"line":27,"column":3,"offset":1848},"end":{"line":27,"column":33,"offset":1878},"indent":[]}},{"type":"inlineCode","value":"{tag-name}","position":{"start":{"line":27,"column":33,"offset":1878},"end":{"line":27,"column":45,"offset":1890},"indent":[]}},{"type":"text","value":" will have their sensitivity set to ","position":{"start":{"line":27,"column":45,"offset":1890},"end":{"line":27,"column":81,"offset":1926},"indent":[]}},{"type":"inlineCode","value":"low","position":{"start":{"line":27,"column":81,"offset":1926},"end":{"line":27,"column":86,"offset":1931},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":27,"column":86,"offset":1931},"end":{"line":27,"column":87,"offset":1932},"indent":[]}}],"position":{"start":{"line":27,"column":3,"offset":1848},"end":{"line":27,"column":87,"offset":1932},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1846},"end":{"line":27,"column":87,"offset":1932},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The rule with ID ","position":{"start":{"line":28,"column":3,"offset":1935},"end":{"line":28,"column":20,"offset":1952},"indent":[]}},{"type":"inlineCode","value":"{rule-id}","position":{"start":{"line":28,"column":20,"offset":1952},"end":{"line":28,"column":31,"offset":1963},"indent":[]}},{"type":"text","value":" will use the ","position":{"start":{"line":28,"column":31,"offset":1963},"end":{"line":28,"column":45,"offset":1977},"indent":[]}},{"type":"inlineCode","value":"block","position":{"start":{"line":28,"column":45,"offset":1977},"end":{"line":28,"column":52,"offset":1984},"indent":[]}},{"type":"text","value":" action.","position":{"start":{"line":28,"column":52,"offset":1984},"end":{"line":28,"column":60,"offset":1992},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":1935},"end":{"line":28,"column":60,"offset":1992},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1933},"end":{"line":28,"column":60,"offset":1992},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1729},"end":{"line":28,"column":60,"offset":1992},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The overrides apply to all packets matching the rule expression: ","position":{"start":{"line":30,"column":1,"offset":1994},"end":{"line":30,"column":66,"offset":2059},"indent":[]}},{"type":"inlineCode","value":"ip.dst in { 1.1.1.0/24 }","position":{"start":{"line":30,"column":66,"offset":2059},"end":{"line":30,"column":92,"offset":2085},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":30,"column":92,"offset":2085},"end":{"line":30,"column":93,"offset":2086},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1994},"end":{"line":30,"column":93,"offset":2086},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"curl -X PUT \\\n-H \"X-Auth-Email: user@cloudflare.com\" \\\n-H \"X-Auth-Key: REDACTED\"\n\"https://api.cloudflare.com/client/v4/accounts/{account-id}/rulesets/phases/ddos_l4/entrypoint\" \\\n-d '{\n  \"description\": \"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\",\n  \"rules\": [\n    {\n      \"action\": \"execute\",\n      \"expression\": \"ip.dst in { 1.1.1.0/24 }\",\n      \"action_parameters\": {\n        \"id\": \"{network-managed-ruleset-id}\",\n        \"overrides\": {\n          \"sensitivity_level\": \"medium\",\n          \"categories\": [\n            {\n              \"category\": \"{tag-name}\",\n              \"sensitivity_level\": \"low\"\n            }\n          ],\n          \"rules\": [\n            {\n              \"id\": \"{rule-id}\",\n              \"action\": \"block\"\n            }\n          ]\n        }\n      }\n    }\n  ]\n}'","position":{"start":{"line":32,"column":1,"offset":2088},"end":{"line":64,"column":4,"offset":2920},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The response returns the created (or updated) phase entry point ruleset.","position":{"start":{"line":66,"column":1,"offset":2922},"end":{"line":66,"column":73,"offset":2994},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":2922},"end":{"line":66,"column":73,"offset":2994},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"result\": {\n    \"id\": \"{root-ruleset-id}\",\n    \"name\": \"default\",\n    \"description\": \"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\",\n    \"kind\": \"root\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"{entrypoint-rule-id}\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"action_parameters\": {\n          \"id\": \"{network-managed-ruleset-id}\",\n          \"version\": \"latest\",\n          \"overrides\": {\n            \"categories\": [\n              {\n                \"category\": \"{tag-name}\",\n                \"sensitivity_level\": \"low\"\n              }\n            ],\n            \"rules\": [\n              {\n                \"id\": \"{rule-id}\",\n                \"action\": \"block\"\n              }\n            ],\n            \"sensitivity_level\": \"medium\"\n          }\n        },\n        \"expression\": \"ip.dst in { 1.1.1.0/24 }\",\n        \"last_updated\": \"2021-08-16T04:14:47.977741Z\",\n        \"ref\": \"{overridden-rule-ref}\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2021-08-16T04:14:47.977741Z\",\n    \"phase\": \"ddos_l4\"\n  }\n}","position":{"start":{"line":68,"column":1,"offset":2996},"end":{"line":110,"column":4,"offset":4094},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"For more information on defining overrides for Managed Rulesets using the Rulesets API, check ","position":{"start":{"line":112,"column":1,"offset":4096},"end":{"line":112,"column":95,"offset":4190},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset","children":[{"type":"text","value":"Override a Managed Ruleset","position":{"start":{"line":112,"column":96,"offset":4191},"end":{"line":112,"column":122,"offset":4217},"indent":[]}}],"position":{"start":{"line":112,"column":95,"offset":4190},"end":{"line":112,"column":215,"offset":4310},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":112,"column":215,"offset":4310},"end":{"line":112,"column":216,"offset":4311},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":4096},"end":{"line":112,"column":216,"offset":4311},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Configure the Managed Ruleset via API\",\"pcx-content-type\":\"concept\",\"order\":2}","position":{"start":{"line":115,"column":1,"offset":4314},"end":{"line":115,"column":117,"offset":4430},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":115,"column":117,"offset":4430}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Configure the Managed Ruleset via API\",\n  \"pcx-content-type\": \"concept\",\n  \"order\": 2\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"configure-network-layer-ddos-attack-protection-via-api\"\n  }, \"Configure Network-layer DDoS Attack Protection via API\"), mdx(\"p\", null, \"Configure the Cloudflare Network-layer DDoS Attack Protection Managed Ruleset by defining overrides at the account level using the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/rulesets-api\"\n  }, \"Rulesets API\"), \".\"), mdx(\"p\", null, \"Each account has the Network-layer DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ddos_l4\"), \" phase entry point ruleset explicitly. You only have to create a rule in the phase entry point to deploy the Managed Ruleset if you need to configure overrides.\"), mdx(\"h2\", {\n    \"id\": \"configure-an-override-for-the-network-layer-ddos-attack-protection-managed-ruleset\"\n  }, \"Configure an override for the Network-layer DDoS Attack Protection Managed Ruleset\"), mdx(\"p\", null, \"You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.\"), mdx(\"p\", null, \"When configuring the Network-layer DDoS Attack Protection Managed Ruleset, use overrides to define a different \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"action\"), \" or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sensitivity\"), \" from the default values. For more information on these rule parameters and the allowed values, refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/network/override-parameters\"\n  }, \"Managed Ruleset parameters\"), \".\"), mdx(Aside, {\n    type: \"warning\",\n    header: \"Important\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The Network-layer DDoS Attack Protection Managed Ruleset is always enabled. You cannot disable its rules using an override with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"enabled\\\": false\"), \".\"), mdx(\"p\", null, \"You can only define overrides for the Network-layer DDoS Attack Protection Managed Ruleset at the account level.\")), mdx(\"h2\", {\n    \"id\": \"example\"\n  }, \"Example\"), mdx(\"p\", null, \"The following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" example creates a new phase ruleset (or updates the existing one) for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ddos_l4\"), \" phase at the account level. The request includes several overrides to adjust the default behavior of the Network-layer DDoS Attack Protection Managed Ruleset. These overrides are the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All rules of the Network-layer DDoS Attack Protection Managed Ruleset will have their sensitivity set to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"medium\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All rules tagged with the tag \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{tag-name}\"), \" will have their sensitivity set to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"low\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The rule with ID \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{rule-id}\"), \" will use the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"block\"), \" action.\")), mdx(\"p\", null, \"The overrides apply to all packets matching the rule expression: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ip.dst in { 1.1.1.0/24 }\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"curl -X PUT \\\\\\n-H \\\"X-Auth-Email: user@cloudflare.com\\\" \\\\\\n-H \\\"X-Auth-Key: REDACTED\\\"\\n\\\"https://api.cloudflare.com/client/v4/accounts/{account-id}/rulesets/phases/ddos_l4/entrypoint\\\" \\\\\\n-d '{\\n  \\\"description\\\": \\\"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\\\",\\n  \\\"rules\\\": [\\n    {\\n      \\\"action\\\": \\\"execute\\\",\\n      \\\"expression\\\": \\\"ip.dst in { 1.1.1.0/24 }\\\",\\n      \\\"action_parameters\\\": {\\n        \\\"id\\\": \\\"{network-managed-ruleset-id}\\\",\\n        \\\"overrides\\\": {\\n          \\\"sensitivity_level\\\": \\\"medium\\\",\\n          \\\"categories\\\": [\\n            {\\n              \\\"category\\\": \\\"{tag-name}\\\",\\n              \\\"sensitivity_level\\\": \\\"low\\\"\\n            }\\n          ],\\n          \\\"rules\\\": [\\n            {\\n              \\\"id\\\": \\\"{rule-id}\\\",\\n              \\\"action\\\": \\\"block\\\"\\n            }\\n          ]\\n        }\\n      }\\n    }\\n  ]\\n}'\\n\")), mdx(\"p\", null, \"The response returns the created (or updated) phase entry point ruleset.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"result\\\": {\\n    \\\"id\\\": \\\"{root-ruleset-id}\\\",\\n    \\\"name\\\": \\\"default\\\",\\n    \\\"description\\\": \\\"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\\\",\\n    \\\"kind\\\": \\\"root\\\",\\n    \\\"version\\\": \\\"1\\\",\\n    \\\"rules\\\": [\\n      {\\n        \\\"id\\\": \\\"{entrypoint-rule-id}\\\",\\n        \\\"version\\\": \\\"1\\\",\\n        \\\"action\\\": \\\"execute\\\",\\n        \\\"action_parameters\\\": {\\n          \\\"id\\\": \\\"{network-managed-ruleset-id}\\\",\\n          \\\"version\\\": \\\"latest\\\",\\n          \\\"overrides\\\": {\\n            \\\"categories\\\": [\\n              {\\n                \\\"category\\\": \\\"{tag-name}\\\",\\n                \\\"sensitivity_level\\\": \\\"low\\\"\\n              }\\n            ],\\n            \\\"rules\\\": [\\n              {\\n                \\\"id\\\": \\\"{rule-id}\\\",\\n                \\\"action\\\": \\\"block\\\"\\n              }\\n            ],\\n            \\\"sensitivity_level\\\": \\\"medium\\\"\\n          }\\n        },\\n        \\\"expression\\\": \\\"ip.dst in { 1.1.1.0/24 }\\\",\\n        \\\"last_updated\\\": \\\"2021-08-16T04:14:47.977741Z\\\",\\n        \\\"ref\\\": \\\"{overridden-rule-ref}\\\",\\n        \\\"enabled\\\": true\\n      }\\n    ],\\n    \\\"last_updated\\\": \\\"2021-08-16T04:14:47.977741Z\\\",\\n    \\\"phase\\\": \\\"ddos_l4\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"For more information on defining overrides for Managed Rulesets using the Rulesets API, check \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset\"\n  }, \"Override a Managed Ruleset\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Configure the Managed Ruleset via API\",\n  \"pcx-content-type\": \"concept\",\n  \"order\": 2\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"configure-network-layer-ddos-attack-protection-via-api\"\n    }}>{`Configure Network-layer DDoS Attack Protection via API`}</h1>\n    <p>{`Configure the Cloudflare Network-layer DDoS Attack Protection Managed Ruleset by defining overrides at the account level using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.cloudflare.com/ruleset-engine/rulesets-api\"\n      }}>{`Rulesets API`}</a>{`.`}</p>\n    <p>{`Each account has the Network-layer DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the `}<inlineCode parentName=\"p\">{`ddos_l4`}</inlineCode>{` phase entry point ruleset explicitly. You only have to create a rule in the phase entry point to deploy the Managed Ruleset if you need to configure overrides.`}</p>\n    <h2 {...{\n      \"id\": \"configure-an-override-for-the-network-layer-ddos-attack-protection-managed-ruleset\"\n    }}>{`Configure an override for the Network-layer DDoS Attack Protection Managed Ruleset`}</h2>\n    <p>{`You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.`}</p>\n    <p>{`When configuring the Network-layer DDoS Attack Protection Managed Ruleset, use overrides to define a different `}<strong parentName=\"p\">{`action`}</strong>{` or `}<strong parentName=\"p\">{`sensitivity`}</strong>{` from the default values. For more information on these rule parameters and the allowed values, refer to `}<a parentName=\"p\" {...{\n        \"href\": \"/managed-rulesets/network/override-parameters\"\n      }}>{`Managed Ruleset parameters`}</a>{`.`}</p>\n    <Aside type='warning' header='Important' mdxType=\"Aside\">\n      <p>{`The Network-layer DDoS Attack Protection Managed Ruleset is always enabled. You cannot disable its rules using an override with `}<inlineCode parentName=\"p\">{`\"enabled\": false`}</inlineCode>{`.`}</p>\n      <p>{`You can only define overrides for the Network-layer DDoS Attack Protection Managed Ruleset at the account level.`}</p>\n    </Aside>\n    <h2 {...{\n      \"id\": \"example\"\n    }}>{`Example`}</h2>\n    <p>{`The following `}<inlineCode parentName=\"p\">{`PUT`}</inlineCode>{` example creates a new phase ruleset (or updates the existing one) for the `}<inlineCode parentName=\"p\">{`ddos_l4`}</inlineCode>{` phase at the account level. The request includes several overrides to adjust the default behavior of the Network-layer DDoS Attack Protection Managed Ruleset. These overrides are the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`All rules of the Network-layer DDoS Attack Protection Managed Ruleset will have their sensitivity set to `}<inlineCode parentName=\"li\">{`medium`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`All rules tagged with the tag `}<inlineCode parentName=\"li\">{`{tag-name}`}</inlineCode>{` will have their sensitivity set to `}<inlineCode parentName=\"li\">{`low`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`The rule with ID `}<inlineCode parentName=\"li\">{`{rule-id}`}</inlineCode>{` will use the `}<inlineCode parentName=\"li\">{`block`}</inlineCode>{` action.`}</li>\n    </ul>\n    <p>{`The overrides apply to all packets matching the rule expression: `}<inlineCode parentName=\"p\">{`ip.dst in { 1.1.1.0/24 }`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`curl -X PUT \\\\\n-H \"X-Auth-Email: user@cloudflare.com\" \\\\\n-H \"X-Auth-Key: REDACTED\"\n\"https://api.cloudflare.com/client/v4/accounts/{account-id}/rulesets/phases/ddos_l4/entrypoint\" \\\\\n-d '{\n  \"description\": \"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\",\n  \"rules\": [\n    {\n      \"action\": \"execute\",\n      \"expression\": \"ip.dst in { 1.1.1.0/24 }\",\n      \"action_parameters\": {\n        \"id\": \"{network-managed-ruleset-id}\",\n        \"overrides\": {\n          \"sensitivity_level\": \"medium\",\n          \"categories\": [\n            {\n              \"category\": \"{tag-name}\",\n              \"sensitivity_level\": \"low\"\n            }\n          ],\n          \"rules\": [\n            {\n              \"id\": \"{rule-id}\",\n              \"action\": \"block\"\n            }\n          ]\n        }\n      }\n    }\n  ]\n}'\n`}</code></pre>\n    <p>{`The response returns the created (or updated) phase entry point ruleset.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"result\": {\n    \"id\": \"{root-ruleset-id}\",\n    \"name\": \"default\",\n    \"description\": \"Define overrides for the Network-layer DDoS Attack Protection Managed Ruleset\",\n    \"kind\": \"root\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"{entrypoint-rule-id}\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"action_parameters\": {\n          \"id\": \"{network-managed-ruleset-id}\",\n          \"version\": \"latest\",\n          \"overrides\": {\n            \"categories\": [\n              {\n                \"category\": \"{tag-name}\",\n                \"sensitivity_level\": \"low\"\n              }\n            ],\n            \"rules\": [\n              {\n                \"id\": \"{rule-id}\",\n                \"action\": \"block\"\n              }\n            ],\n            \"sensitivity_level\": \"medium\"\n          }\n        },\n        \"expression\": \"ip.dst in { 1.1.1.0/24 }\",\n        \"last_updated\": \"2021-08-16T04:14:47.977741Z\",\n        \"ref\": \"{overridden-rule-ref}\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2021-08-16T04:14:47.977741Z\",\n    \"phase\": \"ddos_l4\"\n  }\n}\n`}</code></pre>\n    <p>{`For more information on defining overrides for Managed Rulesets using the Rulesets API, check `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset\"\n      }}>{`Override a Managed Ruleset`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}