{"expireTime":9007200894493391000,"key":"gatsby-plugin-mdx-entire-payload-c3e3ef6a6fdad32be996cdaadf284256-","val":{"mdast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Configure HTTP DDoS Attack Protection via API","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":48,"offset":48},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":48,"offset":48},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Configure the HTTP DDoS Attack Protection Managed Ruleset by defining overrides using the ","position":{"start":{"line":4,"column":1,"offset":50},"end":{"line":4,"column":91,"offset":140},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/ruleset-engine/rulesets-api","children":[{"type":"text","value":"Rulesets API","position":{"start":{"line":4,"column":92,"offset":141},"end":{"line":4,"column":104,"offset":153},"indent":[]}}],"position":{"start":{"line":4,"column":91,"offset":140},"end":{"line":4,"column":168,"offset":217},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":4,"column":168,"offset":217},"end":{"line":4,"column":169,"offset":218},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":50},"end":{"line":4,"column":169,"offset":218},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each zone has the HTTP DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the ","position":{"start":{"line":6,"column":1,"offset":220},"end":{"line":6,"column":152,"offset":371},"indent":[]}},{"type":"inlineCode","value":"ddos_l7","position":{"start":{"line":6,"column":152,"offset":371},"end":{"line":6,"column":161,"offset":380},"indent":[]}},{"type":"text","value":" phase ruleset explicitly. You only have to create a rule in the phase ruleset to deploy the Managed Ruleset if you need to configure overrides.","position":{"start":{"line":6,"column":161,"offset":380},"end":{"line":6,"column":305,"offset":524},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":220},"end":{"line":6,"column":305,"offset":524},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configure an override for the HTTP DDoS Attack Protection Managed Ruleset","position":{"start":{"line":8,"column":4,"offset":529},"end":{"line":8,"column":77,"offset":602},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":526},"end":{"line":8,"column":77,"offset":602},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.","position":{"start":{"line":10,"column":1,"offset":604},"end":{"line":10,"column":87,"offset":690},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":604},"end":{"line":10,"column":87,"offset":690},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When configuring the HTTP DDoS Attack Protection Managed Ruleset, use overrides to define a different ","position":{"start":{"line":12,"column":1,"offset":692},"end":{"line":12,"column":103,"offset":794},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"action","position":{"start":{"line":12,"column":105,"offset":796},"end":{"line":12,"column":111,"offset":802},"indent":[]}}],"position":{"start":{"line":12,"column":103,"offset":794},"end":{"line":12,"column":113,"offset":804},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":12,"column":113,"offset":804},"end":{"line":12,"column":117,"offset":808},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"sensitivity level","position":{"start":{"line":12,"column":119,"offset":810},"end":{"line":12,"column":136,"offset":827},"indent":[]}}],"position":{"start":{"line":12,"column":117,"offset":808},"end":{"line":12,"column":138,"offset":829},"indent":[]}},{"type":"text","value":" from the default values. For more information on these rule parameters and the allowed values, see ","position":{"start":{"line":12,"column":138,"offset":829},"end":{"line":12,"column":238,"offset":929},"indent":[]}},{"type":"link","title":null,"url":"/managed-rulesets/http/override-parameters","children":[{"type":"text","value":"Managed Ruleset override parameters","position":{"start":{"line":12,"column":239,"offset":930},"end":{"line":12,"column":274,"offset":965},"indent":[]}}],"position":{"start":{"line":12,"column":238,"offset":929},"end":{"line":12,"column":319,"offset":1010},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":12,"column":319,"offset":1010},"end":{"line":12,"column":320,"offset":1011},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":692},"end":{"line":12,"column":320,"offset":1011},"indent":[]}},{"type":"jsx","value":"<Aside type='warning' header='Important'>","position":{"start":{"line":14,"column":1,"offset":1013},"end":{"line":14,"column":42,"offset":1054},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The HTTP DDoS Attack Protection Managed Ruleset is always enabled — you cannot disable its rules using an override with ","position":{"start":{"line":16,"column":1,"offset":1056},"end":{"line":16,"column":121,"offset":1176},"indent":[]}},{"type":"inlineCode","value":"\"enabled\": false","position":{"start":{"line":16,"column":121,"offset":1176},"end":{"line":16,"column":139,"offset":1194},"indent":[]}},{"type":"text","value":". Additionally, you must set the override ","position":{"start":{"line":16,"column":139,"offset":1194},"end":{"line":16,"column":181,"offset":1236},"indent":[]}},{"type":"inlineCode","value":"\"expression\"","position":{"start":{"line":16,"column":181,"offset":1236},"end":{"line":16,"column":195,"offset":1250},"indent":[]}},{"type":"text","value":" field to ","position":{"start":{"line":16,"column":195,"offset":1250},"end":{"line":16,"column":205,"offset":1260},"indent":[]}},{"type":"inlineCode","value":"\"true\"","position":{"start":{"line":16,"column":205,"offset":1260},"end":{"line":16,"column":213,"offset":1268},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":16,"column":213,"offset":1268},"end":{"line":16,"column":214,"offset":1269},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1056},"end":{"line":16,"column":214,"offset":1269},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":18,"column":1,"offset":1271},"end":{"line":18,"column":9,"offset":1279},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Example","position":{"start":{"line":20,"column":4,"offset":1284},"end":{"line":20,"column":11,"offset":1291},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1281},"end":{"line":20,"column":11,"offset":1291},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following ","position":{"start":{"line":22,"column":1,"offset":1293},"end":{"line":22,"column":15,"offset":1307},"indent":[]}},{"type":"inlineCode","value":"PUT","position":{"start":{"line":22,"column":15,"offset":1307},"end":{"line":22,"column":20,"offset":1312},"indent":[]}},{"type":"text","value":" example creates a new phase ruleset (or updates the existing one) for the ","position":{"start":{"line":22,"column":20,"offset":1312},"end":{"line":22,"column":95,"offset":1387},"indent":[]}},{"type":"inlineCode","value":"ddos_l7","position":{"start":{"line":22,"column":95,"offset":1387},"end":{"line":22,"column":104,"offset":1396},"indent":[]}},{"type":"text","value":" phase at the zone level. The request includes several overrides to adjust the default behavior of the HTTP DDoS Attack Protection Managed Ruleset. These overrides are the following:","position":{"start":{"line":22,"column":104,"offset":1396},"end":{"line":22,"column":286,"offset":1578},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1293},"end":{"line":22,"column":286,"offset":1578},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"All rules of the Managed Ruleset will use the ","position":{"start":{"line":24,"column":3,"offset":1582},"end":{"line":24,"column":49,"offset":1628},"indent":[]}},{"type":"inlineCode","value":"challenge","position":{"start":{"line":24,"column":49,"offset":1628},"end":{"line":24,"column":60,"offset":1639},"indent":[]}},{"type":"text","value":" action and have a sensitivity level of ","position":{"start":{"line":24,"column":60,"offset":1639},"end":{"line":24,"column":100,"offset":1679},"indent":[]}},{"type":"inlineCode","value":"medium","position":{"start":{"line":24,"column":100,"offset":1679},"end":{"line":24,"column":108,"offset":1687},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":24,"column":108,"offset":1687},"end":{"line":24,"column":109,"offset":1688},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":1582},"end":{"line":24,"column":109,"offset":1688},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1580},"end":{"line":24,"column":109,"offset":1688},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"All rules tagged with ","position":{"start":{"line":25,"column":3,"offset":1691},"end":{"line":25,"column":25,"offset":1713},"indent":[]}},{"type":"inlineCode","value":"{tag-name}","position":{"start":{"line":25,"column":25,"offset":1713},"end":{"line":25,"column":37,"offset":1725},"indent":[]}},{"type":"text","value":" will have a sensitivity level of ","position":{"start":{"line":25,"column":37,"offset":1725},"end":{"line":25,"column":71,"offset":1759},"indent":[]}},{"type":"inlineCode","value":"low","position":{"start":{"line":25,"column":71,"offset":1759},"end":{"line":25,"column":76,"offset":1764},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":25,"column":76,"offset":1764},"end":{"line":25,"column":77,"offset":1765},"indent":[]}}],"position":{"start":{"line":25,"column":3,"offset":1691},"end":{"line":25,"column":77,"offset":1765},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1689},"end":{"line":25,"column":77,"offset":1765},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The rule with ID ","position":{"start":{"line":26,"column":3,"offset":1768},"end":{"line":26,"column":20,"offset":1785},"indent":[]}},{"type":"inlineCode","value":"{managed-ruleset-rule-id}","position":{"start":{"line":26,"column":20,"offset":1785},"end":{"line":26,"column":47,"offset":1812},"indent":[]}},{"type":"text","value":" will use the ","position":{"start":{"line":26,"column":47,"offset":1812},"end":{"line":26,"column":61,"offset":1826},"indent":[]}},{"type":"inlineCode","value":"block","position":{"start":{"line":26,"column":61,"offset":1826},"end":{"line":26,"column":68,"offset":1833},"indent":[]}},{"type":"text","value":" action.","position":{"start":{"line":26,"column":68,"offset":1833},"end":{"line":26,"column":76,"offset":1841},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":1768},"end":{"line":26,"column":76,"offset":1841},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1766},"end":{"line":26,"column":76,"offset":1841},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1580},"end":{"line":26,"column":76,"offset":1841},"indent":[1,1]}},{"type":"code","lang":"json","meta":null,"value":"curl -X PUT \\\n-H \"X-Auth-Email: user@cloudflare.com\" \\\n-H \"X-Auth-Key: REDACTED\"\n\"https://api.cloudflare.com/client/v4/zones/{zone-id}/rulesets/phases/ddos_l7/entrypoint\" \\\n-d '{\n  \"description\": \"Execute HTTP DDoS Attack Protection Managed Ruleset in the zone-level phase entry point ruleset\",\n  \"rules\": [\n    {\n      \"action\": \"execute\",\n      \"action_parameters\": {\n        \"id\": \"{managed-ruleset-id}\",\n        \"overrides\": {\n          \"sensitivity_level\": \"medium\",\n          \"action\": \"challenge\",\n          \"categories\": [\n            {\n              \"category\": \"{tag-name}\",\n              \"sensitivity_level\": \"low\"\n            }\n          ],\n          \"rules\": [\n            {\n              \"id\": \"{managed-ruleset-rule-id}\",\n              \"action\": \"block\"\n            }\n          ]\n        }\n      },\n      \"expression\": \"true\",\n    }\n  ]\n}'","position":{"start":{"line":28,"column":1,"offset":1843},"end":{"line":61,"column":4,"offset":2709},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The response returns the created (or updated) phase entry point ruleset.","position":{"start":{"line":63,"column":1,"offset":2711},"end":{"line":63,"column":73,"offset":2783},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2711},"end":{"line":63,"column":73,"offset":2783},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"result\": {\n    \"id\": \"{phase-entry-point-ruleset-id}\",\n    \"name\": \"default\",\n    \"description\": \"Execute HTTP DDoS Attack Protection Managed Ruleset in the zone-level phase entry point ruleset\",\n    \"kind\": \"zone\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"{rule-id}\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"action_parameters\": {\n          \"id\": \"{managed-ruleset-id}\",\n          \"version\": \"latest\",\n          \"overrides\": {\n            \"action\": \"challenge\",\n            \"categories\": [\n              {\n                \"category\": \"{tag-name}\",\n                \"sensitivity_level\": \"low\"\n              }\n            ],\n            \"rules\": [\n              {\n                \"id\": \"{managed-ruleset-rule-id}\",\n                \"action\": \"block\"\n              }\n            ],\n            \"sensitivity_level\": \"medium\"\n          }\n        },\n        \"expression\": \"true\",\n        \"last_updated\": \"2021-06-16T04:14:47.977741Z\",\n        \"ref\": \"{rule-ref}\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2021-06-16T04:14:47.977741Z\",\n    \"phase\": \"ddos_l7\"\n  }\n}","position":{"start":{"line":65,"column":1,"offset":2785},"end":{"line":108,"column":4,"offset":3915},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"For more information on defining overrides for Managed Rulesets using the Rulesets API, check ","position":{"start":{"line":110,"column":1,"offset":3917},"end":{"line":110,"column":95,"offset":4011},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset","children":[{"type":"text","value":"Override a Managed Ruleset","position":{"start":{"line":110,"column":96,"offset":4012},"end":{"line":110,"column":122,"offset":4038},"indent":[]}}],"position":{"start":{"line":110,"column":95,"offset":4011},"end":{"line":110,"column":215,"offset":4131},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":110,"column":215,"offset":4131},"end":{"line":110,"column":216,"offset":4132},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3917},"end":{"line":110,"column":216,"offset":4132},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Configure the Managed Ruleset via API\",\"pcx-content-type\":\"concept\",\"order\":2}","position":{"start":{"line":113,"column":1,"offset":4135},"end":{"line":113,"column":117,"offset":4251},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":113,"column":117,"offset":4251}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Configure the Managed Ruleset via API\",\n  \"pcx-content-type\": \"concept\",\n  \"order\": 2\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"configure-http-ddos-attack-protection-via-api\"\n  }, \"Configure HTTP DDoS Attack Protection via API\"), mdx(\"p\", null, \"Configure the HTTP DDoS Attack Protection Managed Ruleset by defining overrides using the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/rulesets-api\"\n  }, \"Rulesets API\"), \".\"), mdx(\"p\", null, \"Each zone has the HTTP DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ddos_l7\"), \" phase ruleset explicitly. You only have to create a rule in the phase ruleset to deploy the Managed Ruleset if you need to configure overrides.\"), mdx(\"h2\", {\n    \"id\": \"configure-an-override-for-the-http-ddos-attack-protection-managed-ruleset\"\n  }, \"Configure an override for the HTTP DDoS Attack Protection Managed Ruleset\"), mdx(\"p\", null, \"You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.\"), mdx(\"p\", null, \"When configuring the HTTP DDoS Attack Protection Managed Ruleset, use overrides to define a different \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"action\"), \" or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sensitivity level\"), \" from the default values. For more information on these rule parameters and the allowed values, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/http/override-parameters\"\n  }, \"Managed Ruleset override parameters\"), \".\"), mdx(Aside, {\n    type: \"warning\",\n    header: \"Important\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The HTTP DDoS Attack Protection Managed Ruleset is always enabled \\u2014 you cannot disable its rules using an override with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"enabled\\\": false\"), \". Additionally, you must set the override \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"expression\\\"\"), \" field to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"true\\\"\"), \".\")), mdx(\"h2\", {\n    \"id\": \"example\"\n  }, \"Example\"), mdx(\"p\", null, \"The following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" example creates a new phase ruleset (or updates the existing one) for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ddos_l7\"), \" phase at the zone level. The request includes several overrides to adjust the default behavior of the HTTP DDoS Attack Protection Managed Ruleset. These overrides are the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All rules of the Managed Ruleset will use the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"challenge\"), \" action and have a sensitivity level of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"medium\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All rules tagged with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{tag-name}\"), \" will have a sensitivity level of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"low\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The rule with ID \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{managed-ruleset-rule-id}\"), \" will use the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"block\"), \" action.\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"curl -X PUT \\\\\\n-H \\\"X-Auth-Email: user@cloudflare.com\\\" \\\\\\n-H \\\"X-Auth-Key: REDACTED\\\"\\n\\\"https://api.cloudflare.com/client/v4/zones/{zone-id}/rulesets/phases/ddos_l7/entrypoint\\\" \\\\\\n-d '{\\n  \\\"description\\\": \\\"Execute HTTP DDoS Attack Protection Managed Ruleset in the zone-level phase entry point ruleset\\\",\\n  \\\"rules\\\": [\\n    {\\n      \\\"action\\\": \\\"execute\\\",\\n      \\\"action_parameters\\\": {\\n        \\\"id\\\": \\\"{managed-ruleset-id}\\\",\\n        \\\"overrides\\\": {\\n          \\\"sensitivity_level\\\": \\\"medium\\\",\\n          \\\"action\\\": \\\"challenge\\\",\\n          \\\"categories\\\": [\\n            {\\n              \\\"category\\\": \\\"{tag-name}\\\",\\n              \\\"sensitivity_level\\\": \\\"low\\\"\\n            }\\n          ],\\n          \\\"rules\\\": [\\n            {\\n              \\\"id\\\": \\\"{managed-ruleset-rule-id}\\\",\\n              \\\"action\\\": \\\"block\\\"\\n            }\\n          ]\\n        }\\n      },\\n      \\\"expression\\\": \\\"true\\\",\\n    }\\n  ]\\n}'\\n\")), mdx(\"p\", null, \"The response returns the created (or updated) phase entry point ruleset.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"result\\\": {\\n    \\\"id\\\": \\\"{phase-entry-point-ruleset-id}\\\",\\n    \\\"name\\\": \\\"default\\\",\\n    \\\"description\\\": \\\"Execute HTTP DDoS Attack Protection Managed Ruleset in the zone-level phase entry point ruleset\\\",\\n    \\\"kind\\\": \\\"zone\\\",\\n    \\\"version\\\": \\\"1\\\",\\n    \\\"rules\\\": [\\n      {\\n        \\\"id\\\": \\\"{rule-id}\\\",\\n        \\\"version\\\": \\\"1\\\",\\n        \\\"action\\\": \\\"execute\\\",\\n        \\\"action_parameters\\\": {\\n          \\\"id\\\": \\\"{managed-ruleset-id}\\\",\\n          \\\"version\\\": \\\"latest\\\",\\n          \\\"overrides\\\": {\\n            \\\"action\\\": \\\"challenge\\\",\\n            \\\"categories\\\": [\\n              {\\n                \\\"category\\\": \\\"{tag-name}\\\",\\n                \\\"sensitivity_level\\\": \\\"low\\\"\\n              }\\n            ],\\n            \\\"rules\\\": [\\n              {\\n                \\\"id\\\": \\\"{managed-ruleset-rule-id}\\\",\\n                \\\"action\\\": \\\"block\\\"\\n              }\\n            ],\\n            \\\"sensitivity_level\\\": \\\"medium\\\"\\n          }\\n        },\\n        \\\"expression\\\": \\\"true\\\",\\n        \\\"last_updated\\\": \\\"2021-06-16T04:14:47.977741Z\\\",\\n        \\\"ref\\\": \\\"{rule-ref}\\\",\\n        \\\"enabled\\\": true\\n      }\\n    ],\\n    \\\"last_updated\\\": \\\"2021-06-16T04:14:47.977741Z\\\",\\n    \\\"phase\\\": \\\"ddos_l7\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"For more information on defining overrides for Managed Rulesets using the Rulesets API, check \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset\"\n  }, \"Override a Managed Ruleset\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Configure the Managed Ruleset via API\",\n  \"pcx-content-type\": \"concept\",\n  \"order\": 2\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"configure-http-ddos-attack-protection-via-api\"\n    }}>{`Configure HTTP DDoS Attack Protection via API`}</h1>\n    <p>{`Configure the HTTP DDoS Attack Protection Managed Ruleset by defining overrides using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.cloudflare.com/ruleset-engine/rulesets-api\"\n      }}>{`Rulesets API`}</a>{`.`}</p>\n    <p>{`Each zone has the HTTP DDoS Attack Protection Managed Ruleset enabled by default. This means that you do not need to deploy the Managed Ruleset to the `}<inlineCode parentName=\"p\">{`ddos_l7`}</inlineCode>{` phase ruleset explicitly. You only have to create a rule in the phase ruleset to deploy the Managed Ruleset if you need to configure overrides.`}</p>\n    <h2 {...{\n      \"id\": \"configure-an-override-for-the-http-ddos-attack-protection-managed-ruleset\"\n    }}>{`Configure an override for the HTTP DDoS Attack Protection Managed Ruleset`}</h2>\n    <p>{`You can define overrides at the ruleset, tag, and rule level for all Managed Rulesets.`}</p>\n    <p>{`When configuring the HTTP DDoS Attack Protection Managed Ruleset, use overrides to define a different `}<strong parentName=\"p\">{`action`}</strong>{` or `}<strong parentName=\"p\">{`sensitivity level`}</strong>{` from the default values. For more information on these rule parameters and the allowed values, see `}<a parentName=\"p\" {...{\n        \"href\": \"/managed-rulesets/http/override-parameters\"\n      }}>{`Managed Ruleset override parameters`}</a>{`.`}</p>\n    <Aside type='warning' header='Important' mdxType=\"Aside\">\n      <p>{`The HTTP DDoS Attack Protection Managed Ruleset is always enabled — you cannot disable its rules using an override with `}<inlineCode parentName=\"p\">{`\"enabled\": false`}</inlineCode>{`. Additionally, you must set the override `}<inlineCode parentName=\"p\">{`\"expression\"`}</inlineCode>{` field to `}<inlineCode parentName=\"p\">{`\"true\"`}</inlineCode>{`.`}</p>\n    </Aside>\n    <h2 {...{\n      \"id\": \"example\"\n    }}>{`Example`}</h2>\n    <p>{`The following `}<inlineCode parentName=\"p\">{`PUT`}</inlineCode>{` example creates a new phase ruleset (or updates the existing one) for the `}<inlineCode parentName=\"p\">{`ddos_l7`}</inlineCode>{` phase at the zone level. The request includes several overrides to adjust the default behavior of the HTTP DDoS Attack Protection Managed Ruleset. These overrides are the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`All rules of the Managed Ruleset will use the `}<inlineCode parentName=\"li\">{`challenge`}</inlineCode>{` action and have a sensitivity level of `}<inlineCode parentName=\"li\">{`medium`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`All rules tagged with `}<inlineCode parentName=\"li\">{`{tag-name}`}</inlineCode>{` will have a sensitivity level of `}<inlineCode parentName=\"li\">{`low`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`The rule with ID `}<inlineCode parentName=\"li\">{`{managed-ruleset-rule-id}`}</inlineCode>{` will use the `}<inlineCode parentName=\"li\">{`block`}</inlineCode>{` action.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`curl -X PUT \\\\\n-H \"X-Auth-Email: user@cloudflare.com\" \\\\\n-H \"X-Auth-Key: REDACTED\"\n\"https://api.cloudflare.com/client/v4/zones/{zone-id}/rulesets/phases/ddos_l7/entrypoint\" \\\\\n-d '{\n  \"description\": \"Execute HTTP DDoS Attack Protection Managed Ruleset in the zone-level phase entry point ruleset\",\n  \"rules\": [\n    {\n      \"action\": \"execute\",\n      \"action_parameters\": {\n        \"id\": \"{managed-ruleset-id}\",\n        \"overrides\": {\n          \"sensitivity_level\": \"medium\",\n          \"action\": \"challenge\",\n          \"categories\": [\n            {\n              \"category\": \"{tag-name}\",\n              \"sensitivity_level\": \"low\"\n            }\n          ],\n          \"rules\": [\n            {\n              \"id\": \"{managed-ruleset-rule-id}\",\n              \"action\": \"block\"\n            }\n          ]\n        }\n      },\n      \"expression\": \"true\",\n    }\n  ]\n}'\n`}</code></pre>\n    <p>{`The response returns the created (or updated) phase entry point ruleset.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"result\": {\n    \"id\": \"{phase-entry-point-ruleset-id}\",\n    \"name\": \"default\",\n    \"description\": \"Execute HTTP DDoS Attack Protection Managed Ruleset in the zone-level phase entry point ruleset\",\n    \"kind\": \"zone\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"{rule-id}\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"action_parameters\": {\n          \"id\": \"{managed-ruleset-id}\",\n          \"version\": \"latest\",\n          \"overrides\": {\n            \"action\": \"challenge\",\n            \"categories\": [\n              {\n                \"category\": \"{tag-name}\",\n                \"sensitivity_level\": \"low\"\n              }\n            ],\n            \"rules\": [\n              {\n                \"id\": \"{managed-ruleset-rule-id}\",\n                \"action\": \"block\"\n              }\n            ],\n            \"sensitivity_level\": \"medium\"\n          }\n        },\n        \"expression\": \"true\",\n        \"last_updated\": \"2021-06-16T04:14:47.977741Z\",\n        \"ref\": \"{rule-ref}\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2021-06-16T04:14:47.977741Z\",\n    \"phase\": \"ddos_l7\"\n  }\n}\n`}</code></pre>\n    <p>{`For more information on defining overrides for Managed Rulesets using the Rulesets API, check `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset\"\n      }}>{`Override a Managed Ruleset`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}