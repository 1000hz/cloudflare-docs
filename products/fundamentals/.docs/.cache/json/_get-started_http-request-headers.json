{"data":{"mdx":{"id":"5613bdfb-a226-581c-9343-9017ffa4a4a5","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"pcx-content-type\": \"concept\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"http-request-headers\"\n  }, \"HTTP request headers\"), mdx(\"p\", null, \"Cloudflare passes all HTTP request headers to your origin web server and adds additional headers as specified below.\"), mdx(\"details\", null, mdx(\"summary\", null, \"CF-Connecting-IP\"), mdx(\"div\", null, mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Connecting-IP\"), \" provides the client IP address, connecting to Cloudflare, to the origin web server.\\nThis header will only be sent on the traffic from Cloudflare's edge to your origin webserver.\"))), mdx(\"details\", null, mdx(\"summary\", null, \"True-Client-IP (Enterprise plan only)\"), mdx(\"div\", null, mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" provides the original client IP address to the origin web server. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" is only available on our Enterprise plan. In the example below, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"203.0.113.1\"), \" is the original visitor IP address. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP: 203.0.113.1\")), mdx(\"p\", null, \"There is no difference between the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Connecting-IP\"), \" headers besides the name of the header. Some Enterprise customers with legacy devices need \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" to avoid updating firewalls or load-balancers to read a custom header name.\"), mdx(Aside, {\n    type: \"warning\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"If you are using Cloudflare in a stacked CDN and authenticating HTTP requests based on the IP address value in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" header, you must \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://support.cloudflare.com/hc/articles/206776727#h_4bf7CC7xR9dZJjR4y6wwcG\"\n  }, \"enable \", mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"True-Client-IP\")), \". If you do not enable this feature, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" header can be spoofed to any value. Alternatively, if you do not want to receive the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" header, use a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/rules/transform\"\n  }, \"Transform Rule\"), \" to remove this HTTP request header.\")))), mdx(\"details\", null, mdx(\"summary\", null, \"X-Forwarded-For\"), mdx(\"div\", null, mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For\"), \" maintains proxy server and original visitor IP addresses. If there was no existing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For\"), \" header in the request sent to Cloudflare, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For\"), \" has an identical value to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Connecting-IP\"), \" header. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For: 203.0.113.1\"), \".\"), mdx(\"p\", null, \"If an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For\"), \" header was already present in the request to Cloudflare, Cloudflare appends the IP address of the HTTP proxy to the header: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For: 203.0.113.1,198.51.100.101,198.51.100.102\")), mdx(\"p\", null, \"In the examples above, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"203.0.113.1\"), \" is the original visitor IP address and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"198.51.100.101\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"198.51.100.102\"), \" are proxy server IP addresses provided to Cloudflare via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For\"), \" header.\"), mdx(Aside, {\n    type: \"note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"To restore the original visitor IP address at your origin web server, Cloudflare recommends that your logs or applications look at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Connecting-IP\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \", instead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-Forwarded-For\"), \", since \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Connecting-IP\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"True-Client-IP\"), \" have a consistent format containing only one IP.\")))), mdx(\"details\", null, mdx(\"summary\", null, \"CF-RAY\"), mdx(\"div\", null, mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-ray\"), \" header is a hashed value that encodes information about the data center and the visitor\\u2019s request. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-RAY: 230b030023ae2822-SJC\"), \".\"), mdx(\"p\", null, \"Add the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://support.cloudflare.com/hc/articles/203118044#h_f7a7396f-ec41-4c52-abf5-a110cadaca7c\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"CF-Ray\"), \" header to your origin web server logs\"), \" to match requests proxied to Cloudflare to requests in your server logs. Enterprise customers can also see all requests via \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://support.cloudflare.com/hc/en-us/articles/216672448-Enterprise-Log-Share-REST-API\"\n  }, \"Cloudflare Logs\"), \".\"))), mdx(\"details\", null, mdx(\"summary\", null, \"CF-IPCountry\"), mdx(\"div\", null, mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-IPCountry\"), \" contains a two character country code of the originating visitor\\u2019s country. XX is used for unknown country information. This header is added to requests by enabling \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://support.cloudflare.com/hc/en-us/articles/200168236-What-does-Cloudflare-IP-Geolocation-do-\"\n  }, \"Cloudflare IP Geolocation\"), \" in the dashboard. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-IPCountry: US\"), \".\"))), mdx(\"details\", null, mdx(\"summary\", null, \"CF-Visitor\"), mdx(\"div\", null, mdx(\"p\", null, \"Currently, this header is a JSON object, containing only one key called \\u201Cscheme\\u201D. The header will be either HTTP or HTTPS, and it is only relevant if you need to enable Flexible SSL in your Cloudflare settings. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Visitor: { \\\\\\\"scheme\\\\\\\":\\\\\\\"https\\\\\\\"}\"), \".\"))), mdx(\"details\", null, mdx(\"summary\", null, \"CDN-Loop\"), mdx(\"div\", null, mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CDN-Loop\"), \" allows Cloudflare to specify how many times a request can enter Cloudflare's network before it is blocked as a looping request. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CDN-Loop: cloudflare\")))), mdx(\"details\", null, mdx(\"summary\", null, \"CF-Worker\"), mdx(\"div\", null, mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Worker\"), \" request header is added to an edge Worker subrequest that identifies the host that spawned the subrequest. This is useful when you want to protect yourself against cross-zone worker subrequests. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Worker: example.com\"), \".\"), mdx(\"p\", null, \"You can add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CF-Worker\"), \" header on server logs similar to the way you add the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://support.cloudflare.com/hc/en-us/articles/203118044-Gathering-information-for-troubleshooting-sites#h_f7a7396f-ec41-4c52-abf5-a110cadaca7c\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"CF-RAY\")), \" header. To do that, add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"$http_cf_worker\"), \" in the log format file: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"log_format cf_custom \\\"CF-Worker:$http_cf_worker\\\"'\")))), mdx(\"h2\", {\n    \"id\": \"related-resources\"\n  }, \"Related resources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://support.cloudflare.com/hc/articles/200170786\"\n  }, \"Restoring original visitor IPs\"))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"5613bdfb-a226-581c-9343-9017ffa4a4a5","fields":{"slug":"/get-started/http-request-headers"},"frontmatter":{"title":"","type":null,"order":null,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"HTTP request headers","depth":1}],"tableOfContents":{"items":[{"url":"#http-request-headers","title":"HTTP request headers","items":[{"url":"#related-resources","title":"Related resources"}]}]},"parent":{"modifiedTime":"2022-01-19","relativePath":"get-started/http-request-headers.md"}}}