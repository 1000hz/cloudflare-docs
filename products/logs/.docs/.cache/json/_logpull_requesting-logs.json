{"data":{"mdx":{"id":"40fa5a19-44bd-5a08-8892-c93cb9d028d1","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 14,\n  \"pcx-content-type\": \"interim\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar TableWrap = makeShortcode(\"TableWrap\");\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"requesting-logs\"\n  }, \"Requesting logs\"), mdx(\"h2\", {\n    \"id\": \"endpoints\"\n  }, \"Endpoints\"), mdx(\"p\", null, \"The three endpoints supported by the Logpull API are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /logs/received\"), \" - returns HTTP request log data based on the parameters specified\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /logs/received/fields\"), \" - returns the list of all available log fields\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /logs/rayids/<rayid>\"), \" - returns HTTP request log data matching \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"<rayid>\"))), mdx(\"h2\", {\n    \"id\": \"required-authentication-headers\"\n  }, \"Required authentication headers\"), mdx(\"p\", null, \"The following headers are required for all endpoint calls:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"X-Auth-Email\"), \" - the Cloudflare account email address associated with the domain\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"X-Auth-Key\"), \" - the Cloudflare API key\")), mdx(\"p\", null, \"Alternatively, API tokens with Logs Edit permissions can also be used for authentication:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Authorization: Bearer <API_TOKEN>\"))), mdx(\"h2\", {\n    \"id\": \"parameters\"\n  }, \"Parameters\"), mdx(\"p\", null, \"The API expects endpoint parameters in the GET request query string. The following are example formats:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logs/received\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/received?start=<unix|rfc3339>&end=<unix|rfc3339>[&count=<int>][&sample=<float>][&fields=<FIELDS>][&timestamps=<string>][&CVE-2021-44228=<boolean>]\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logs/rayids/<RAY_ID>\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/rayids/<RAY_ID>?[&fields=<string>][&timestamps=<strings>]\\n\")), mdx(\"p\", null, \"The following table describes the parameters available:\"), mdx(TableWrap, {\n    mdxType: \"TableWrap\"\n  }, mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Parameter\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Description\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Applies to\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Required\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"start\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Inclusive\"), \" \", mdx(\"p\", null, \"- Timestamp formatted as \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"UNIX\"), \" (UTC by definition), \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"UNIX Nano\"), \", or \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"rfc3339\"), \" (specifies time zone)\"), \" \", mdx(\"p\", null, \"- Must be no more than 7 days earlier than now\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"/logs/received\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Yes\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"end\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Exclusive\"), \" \", mdx(\"p\", null, \"- Same format as \", mdx(\"em\", null, \"start\")), \" \", mdx(\"p\", null, \"- Must be at least 1 minute earlier than now and later than \", mdx(\"em\", null, \"start\"))), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"/logs/received\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Yes\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"count\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Return up to that many records\"), \" \", mdx(\"p\", null, \"- Do not include if returning all records\"), \" \", mdx(\"p\", null, \"- Results are not sorted; therefore, different data for repeated requests is likely\"), \" \", mdx(\"p\", null), \" \", mdx(\"p\", null, \"- Applies to number of total records returned, not number of sampled records\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"/logs/received\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"No\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"sample\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Return only a sample of records\"), \" \", mdx(\"p\", null, \"- Do not include if returning all records\"), \" \", mdx(\"p\", null, \"- Value can range from \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"0.001\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"1.0\"), \" (inclusive)\"), \" \", mdx(\"p\", null, \"- \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"sample=0.1\"), \" means return 10% (1 in 10) of all records\"), \" \", mdx(\"p\", null, \"- Results are random; therefore, different numbers of results for repeated requests are likely\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"/logs/received\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"No\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"fields\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Comma-separated list of fields to return\"), \" \", mdx(\"p\", null, \"- If empty, the default list is returned\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"/logs/received\"), \" \", mdx(\"p\", null, \"/logs/rayids\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"No\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"timestamps\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Format in which timestamp fields will be returned\"), \" \", mdx(\"p\", null, \"- Value options are: \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"unixnano\"), \" (default), \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"unix\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"rfc3339\")), \" \", mdx(\"p\", null, \"- Timestamps returned as integers for \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"unix\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"unixnano\"), \" and as strings for \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"rfc3339\"))), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"/logs/received\"), \" \", mdx(\"p\", null, \"/logs/rayids\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"No\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"CVE-2021-44228\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"- Optional redaction for \", mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"https://www.cve.org/CVERecord?id=CVE-2021-44228\"\n  }, \"CVE-2021-44228\"), \".  This option will replace every occurrence of the string \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"${\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"x{\"), \".\"), \" \", mdx(\"p\", null, \" For example: \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"CVE-2021-44228=true\"), \" \")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"p\", null, \"/logs/received\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"No\"))))), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The maximum time range from \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"start\"), \" to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"end\"), \" cannot exceed 1 hour. Because \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"start\"), \" is inclusive and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"end\"), \" is exclusive, to get all the data for every minute, starting at 10AM, the proper values are:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start=2018-05-15T10:00:00Z&end=2018-05-15T10:01:00Z\"), \", then \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start=2018-05-15T10:01:00Z&end=2018-05-15T10:02:00Z\"), \" and so on.\"), mdx(\"p\", null, \"The overlap will be handled correctly.\")), mdx(\"h2\", {\n    \"id\": \"example-api-requests-using-curl\"\n  }, \"Example API requests using cURL\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logs/received\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s \\\\\\n    -H \\\"X-Auth-Email: <EMAIL>\\\" \\\\\\n    -H \\\"X-Auth-Key: <API_KEY>\\\" \\\\\\n    \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/received?start=2017-07-18T22:00:00Z&end=2017-07-18T22:01:00Z&count=1&fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID\\\"\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logs/rayids/<RAY_ID>\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s \\\\\\n    -H \\\"X-Auth-Email: <EMAIL>\\\" \\\\\\n    -H \\\"X-Auth-Key: <API_KEY>\\\" \\\\\\n    \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/rayids/47ff6e2c812d3ccb?timestamps=rfc3339\\\"\\n\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The IATA code returned as part of the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ray ID\"), \" does not need to included in the request. For example, if you have a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"RayID\"), \" such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"49ddb3e70e665831-DFW\"), \", only include \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"49ddb3e70e665831\"), \" in your request.\")), mdx(\"h2\", {\n    \"id\": \"fields\"\n  }, \"Fields\"), mdx(\"p\", null, \"Unless specified in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"fields\"), \" parameter, the API returns a limited set of log fields. This default field set may change at any time. The list of all available fields is at:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/received/fields\")), mdx(\"p\", null, \"The order in which fields are specified does not matter, and the order of fields in the response is not specified.\"), mdx(\"p\", null, \"Using bash subshell and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jq\"), \", you can download the logs with all available fields without manually copying and pasting the fields into the request. For example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s \\\\\\n    -H \\\"X-Auth-Email: <EMAIL>\\\" \\\\\\n    -H \\\"X-Auth-Key: <API_KEY>\\\" \\\\\\n    \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/received?start=2017-07-18T22:00:00Z&end=2017-07-18T22:01:00Z&count=1&fields=$(curl -s -H \\\"X-Auth-Email: <EMAIL>\\\" -H \\\"X-Auth-Key: <API_KEY>\\\" \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/received/fields\\\" | jq '. | to_entries[] | .key' -r | paste -sd \\\",\\\" -)\\\"\\n\")), mdx(\"p\", null, \"Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/reference/log-fields/#http-requests\"\n  }, \"HTTP request fields\"), \" for the currently available fields.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"40fa5a19-44bd-5a08-8892-c93cb9d028d1","fields":{"slug":"/logpull/requesting-logs"},"frontmatter":{"pcx_content_type":"interim","title":"","type":null,"order":14,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Requesting logs","depth":1}],"tableOfContents":{"items":[{"url":"#requesting-logs","title":"Requesting logs","items":[{"url":"#endpoints","title":"Endpoints"},{"url":"#required-authentication-headers","title":"Required authentication headers"},{"url":"#parameters","title":"Parameters"},{"url":"#example-api-requests-using-curl","title":"Example API requests using cURL"},{"url":"#fields","title":"Fields"}]}]},"parent":{"modifiedTime":"2022-01-27","relativePath":"logpull/requesting-logs/index.md"}}}