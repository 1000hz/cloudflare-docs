{"data":{"mdx":{"id":"c33a461e-a79a-5050-ae7c-c8f20a7a8352","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Enable Google Cloud Storage\",\n  \"order\": 60,\n  \"pcx-content-type\": \"how-to\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"enable-logpush-to-google-cloud-storage\"\n  }, \"Enable Logpush to Google Cloud Storage\"), mdx(\"p\", null, \"Cloudflare Logpush supports pushing logs directly to Google Cloud Storage (GCS) via the Cloudflare dashboard or via API.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-the-cloudflare-dashboard\"\n  }, \"Manage via the Cloudflare dashboard\"), mdx(\"p\", null, \"Enable Logpush to Google Cloud Storage via the dashboard.\"), mdx(\"p\", null, \"To enable the Cloudflare Logpush service:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Log in to the Cloudflare dashboard.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the Enterprise domain you want to use with Logpush.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Analytics\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Connect a service\"), \". A modal window opens where you will need to complete several steps.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the dataset you want to push to a storage service.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the data fields to include in your logs. Add or remove fields later by modifying your settings in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Google Cloud Storage\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter or select the following destination information:\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bucket path\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Daily subfolders\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Grant Cloudflare access to upload files to your bucket\"), \", make sure your bucket has added Cloudflare's IAM as a user (if you did not add it already).\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Validate access\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ownership token\"), \" (included in a file or log Cloudflare sends to your provider) and click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Prove ownership\"), \". To find the ownership token, click the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Open\"), \" button in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Overview\"), \" tab of the ownership challenge file.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Save and Start Pushing\"), \" to finish enabling Logpush.\"))), mdx(\"p\", null, \"Once connected, Cloudflare lists Google Cloud Storage as a connected service under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \". Edit or remove connected services from here.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-api\"\n  }, \"Manage via API\"), mdx(\"p\", null, \"Cloudflare uses Google Cloud Identity and Access Management (IAM) to gain access to your bucket. The Cloudflare IAM service account needs admin permission for the bucket.\"), mdx(EnableReadPermissions, {\n    mdxType: \"EnableReadPermissions\"\n  }), mdx(\"p\", null, \"To enable Logpush to GCS:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a GCS bucket. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/storage/docs/creating-buckets#storage-create-bucket-console\"\n  }, \"instructions from GCS\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"In \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Storage\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Browser\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Bucket\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Permissions\"), \", add the member \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logpush@cloudflare-data.iam.gserviceaccount.com\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Storage Object Admin\"), \" permission.\"))), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"Logpush will not work if there is a retention policy on your bucket because this policy prevents overwrites. If you are using the policy to enforce deletion, you can use a lifecycle rule instead. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/storage/docs/lifecycle\"\n  }, \"object lifecycle management from GCS\"), \".\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"Enable Google Cloud Storage","type":null,"updated":null}}},"pageContext":{"id":"c33a461e-a79a-5050-ae7c-c8f20a7a8352","fields":{"slug":"/get-started/enable-destinations/google-cloud-storage"},"frontmatter":{"pcx_content_type":"how-to","title":"Enable Google Cloud Storage","type":null,"order":60,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Enable Logpush to Google Cloud Storage","depth":1}],"tableOfContents":{"items":[{"url":"#enable-logpush-to-google-cloud-storage","title":"Enable Logpush to Google Cloud Storage","items":[{"url":"#manage-via-the-cloudflare-dashboard","title":"Manage via the Cloudflare dashboard"},{"url":"#manage-via-api","title":"Manage via API"}]}]},"parent":{"modifiedTime":"2022-01-27","relativePath":"get-started/enable-destinations/google-cloud-storage/index.md"}}}