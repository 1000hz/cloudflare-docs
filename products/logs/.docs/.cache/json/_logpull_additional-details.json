{"data":{"mdx":{"id":"c0aa5bdf-f3f0-5f59-9563-2fb8a105ad20","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 18,\n  \"pcx-content-type\": \"reference\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"additional-details\"\n  }, \"Additional details\"), mdx(\"h2\", {\n    \"id\": \"estimating-daily-data-volume\"\n  }, \"Estimating daily data volume\"), mdx(\"p\", null, \"To estimate the amount of data for a zone per day (the number of log lines and the amount of bytes they take up), request a 1% or 10% sample of data for a 1-hour period (use 10% if your volume is low). Note that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start=2018-12-15T00:00:00Z\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"end=2018-12-15T01:00:00Z\"), \" span a 1-hour period, and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sample=0.1\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s \\\\\\n    -H \\\"X-Auth-Email: <EMAIL>\\\" \\\\\\n    -H \\\"X-Auth-Key: <API_KEY>\\\" \\\\\\n    \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/received?start=2018-12-15T00:00:00Z&end=2018-12-15T01:00:00Z&sample=0.1\\\" \\\\\\n    >sample.log\\n...\\n$ wc -l sample.log\\n83 sample.log\\n...\\n$ ls -lh sample.log\\n-rw-r--r-- 1 mik mik 25K Dec 17 15:49 sample.log\\n\")), mdx(\"p\", null, \"Based on this information, the approximate number of messages/day is 19,920 (83\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"10\"), \"24), and the byte size is 6MB (25K\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"10\"), \"24). The size estimate is based on the default response field set. Changing the response field set (refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/logpull/requesting-logs/#fields\"\n  }, \"Fields\"), \") will change the response size.\"), mdx(\"p\", null, \"To get a good estimate of daily traffic, it is best to get at least 30 log lines in your hourly sample. If the response size is too small (or too large), adjust the sample value, not the time range.\"), mdx(\"h2\", {\n    \"id\": \"compression\"\n  }, \"Compression\"), mdx(\"p\", null, \"Responses are compressed by default (gzip). \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cURL\"), \" decompresses responses transparently, unless called with:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-H \\\"accept-encoding: gzip\\\"\")), mdx(\"p\", null, \" In that case, the output remains gzipped. Compressed data is approximately 5-10% of its uncompressed size. This means that a 1GB uncompressed response gets compressed down to 50-100MB.\"), mdx(\"h2\", {\n    \"id\": \"service-expectations\"\n  }, \"Service expectations\"), mdx(\"h3\", {\n    \"id\": \"successful-requests\"\n  }, \"Successful requests\"), mdx(\"p\", null, \"If the response or timeout limit is exceeded or there is any problem fetching the response, a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"200\"), \" status will be returned and the response will end with the non-JSON text line \\u201CError streaming data.\\u201D Because responses are streamed, there is no way to identify the error ahead of time. A response is successful if it does not end with the \\u201CError streaming data\\\" text line.\"), mdx(\"p\", null, \"Once you receive a successful response for a given zone and time range, the following is true for all subsequent requests:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The number and content of returned records will be same.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The order of records returned may (and is likely to) be different.\")), mdx(\"h3\", {\n    \"id\": \"response-fields\"\n  }, \"Response fields\"), mdx(\"p\", null, \"Regarding the inclusion of the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"fields\"), \" parameter:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When fields are explicitly included in the request URL, the fields returned will not change.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When not specified in the URL, the default fields are returned.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The default fields may change at any time.\")), mdx(\"h3\", {\n    \"id\": \"limits\"\n  }, \"Limits\"), mdx(\"p\", null, \"The following usage restrictions apply:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Rate limits:\"), \" Exceeding these limit results in a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"429\"), \" error response:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"15 requests/min per zone.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"180 requests/min per user (email address).\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Time range:\"), \" The maximum difference between the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"start\"), \" and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"end\"), \" parameters can be 1 hour.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Response size:\"), \" The maximum response size is 10GiB per request, which is equivalent to about 15M records when about 55 fields are selected (more records can be retrieved when less fields are selected because the per record size will be smaller).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Timeout:\"), \" The response will fail with a terminated connection after 10 minutes.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Stream Timeout:\"), \" The request will be terminated with a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"408\"), \" error response if the connection is idle for 30s. This timeout usually means that the request is probably too exhaustive (frequent timeouts (> 12/hr) will result in subsequent queries to be blocked with status code 429 for 1hr) and so:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"try requesting records using lesser number of fields.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"try with smaller \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"start\"), \" and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"end\"), \" parameters.\")))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"c0aa5bdf-f3f0-5f59-9563-2fb8a105ad20","fields":{"slug":"/logpull/additional-details"},"frontmatter":{"pcx_content_type":"reference","title":"","type":null,"order":18,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Additional details","depth":1}],"tableOfContents":{"items":[{"url":"#additional-details","title":"Additional details","items":[{"url":"#estimating-daily-data-volume","title":"Estimating daily data volume"},{"url":"#compression","title":"Compression"},{"url":"#service-expectations","title":"Service expectations","items":[{"url":"#successful-requests","title":"Successful requests"},{"url":"#response-fields","title":"Response fields"},{"url":"#limits","title":"Limits"}]}]}]},"parent":{"modifiedTime":"2022-01-27","relativePath":"logpull/additional-details/index.md"}}}