{"data":{"mdx":{"id":"ea96ecd2-c55e-5f3e-90cc-1194cf89adb9","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 87,\n  \"pcx-content-type\": \"tutorial\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"manage-logpush-with-curl\"\n  }, \"Manage Logpush with cURL\"), mdx(\"p\", null, \"You can manage your Cloudflare Logpush service from the command line using cURL.\"), mdx(\"p\", null, \"Before getting started, review:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration\"\n  }, \"Logpush API configuration\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://api.cloudflare.com/#logpush-jobs-properties\"\n  }, \"Logpush job object definition\"))), mdx(Aside, {\n    type: \"note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The examples below are for zone-scoped data sets. Account-scoped data sets should use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/accounts/<ACCOUNT_ID>\"), \" instead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/zone/<ZONE_ID>\"), \".\")), mdx(\"h2\", {\n    \"id\": \"step-1---get-ownership-challenge\"\n  }, \"Step 1 - Get ownership challenge\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ curl -s -XPOST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/ownership \\\\\\n-H \\\"X-Auth-Email: <EMAIL>\\\" \\\\ \\n-H \\\"X-Auth-Key: <API_KEY>\\\" \\\\\\n-H \\\"Content-Type: application/json\\\" \\\\ \\n--data '{\\\"destination_conf\\\":\\\"s3://<BUCKET_PATH>?region=us-west-2\\\"}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"parameters\"\n  }, \"Parameters\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"destination_conf\"), \" - See \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration/#destination\"\n  }, \"Destination\"), \" for details.\")), mdx(\"h3\", {\n    \"id\": \"response\"\n  }, \"Response\"), mdx(\"p\", null, \"A challenge file will be written to the destination, and the filename will be in the response (the filename may be expressed as a path if appropriate for your destination). For example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"{\\n  \\\"success\\\": true,\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"filename\\\": \\\"burritobot/logs/ownership-challenge.txt\\\",\\n    \\\"valid\\\": true,\\n    \\\"message\\\": \\\"\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"You will need to provide the token contained in this file when creating a job in the next step.\"), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"When using Sumo Logic, you may find it helpful to have \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://help.sumologic.com/05Search/Live-Tail/About-Live-Tail\"\n  }, \"Live Tail\"), \" open to see the challenge file as soon as it's uploaded.\")), mdx(\"h2\", {\n    \"id\": \"step-2---create-a-job\"\n  }, \"Step 2 - Create a job\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X POST \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs \\\\\\n-d'{\\\"name\\\":\\\"<DOMAIN_NAME>\\\", \\\"destination_conf\\\":\\\"s3://<BUCKET_PATH>?region=us-west-2\\\", \\\"dataset\\\": \\\"http_requests\\\", \\\"logpull_options\\\":\\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\", \\\"ownership_challenge\\\":\\\"00000000000000000000\\\"}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"parameters-1\"\n  }, \"Parameters\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"name\"), \" (optional) - We suggest using your domain name as the job name; the name cannot be changed after the job is created.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"destination_conf\"), \" - Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration/#destination\"\n  }, \"Destination\"), \" for details.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dataset\"), \" - The category of logs you want to receive. Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/log-fields\"\n  }, \"Log fields\"), \" for the full list of supported datasets; this parameter cannot be changed after the job is created.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"logpull_options\"), \" (optional) - Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration/#options\"\n  }, \"Options\"), \".\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Typically includes the desired fields and timestamp format.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Set the timestamp format to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"RFC 3339\"), \" (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"&timestamps=rfc3339\"), \") for:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Google BigQuery usage.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Automated timestamp parsing within Sumo Logic; refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://help.sumologic.com/03Send-Data/Sources/04Reference-Information-for-Sources/Timestamps%2C-Time-Zones%2C-Time-Ranges%2C-and-Date-Formats\"\n  }, \"timestamps from Sumo Logic\"), \" for details.\"))))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"ownership_challenge\"), \" - Challenge token required to prove destination ownership.\")), mdx(\"h3\", {\n    \"id\": \"response-1\"\n  }, \"Response\"), mdx(\"p\", null, \"In the response, you get a newly-created job ID. For example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"id\\\": 146,\\n    \\\"dataset\\\": \\\"http_requests\\\",\\n    \\\"enabled\\\": false,\\n    \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n    \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n    \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n    \\\"last_complete\\\": null,\\n    \\\"last_error\\\": null,\\n    \\\"error_message\\\": null\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Note that you can validate the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \" parameter before including it in your job configuration:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X POST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/validate/origin -d '{\\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\", \\\"dataset\\\": \\\"http_requests\\\"}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-2\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"message\\\": \\\"\\\",\\n    \\\"valid\\\": true\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-3---enable-update-a-job\"\n  }, \"Step 3 - Enable (update) a job\"), mdx(\"p\", null, \"Start by retrieving information about a specific job, using a job ID:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-3\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n \\\"errors\\\": [],\\n \\\"messages\\\": [],\\n \\\"result\\\": {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": false,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": null,\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n },\\n \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Note that by default a job is not enabled (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"enabled\\\": false\"), \").\"), mdx(\"p\", null, \"If you do not remember your job ID, you can retrieve it using your zone ID:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .\\n\")), mdx(\"p\", null, \"Next, to enable the job, send an update request:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X PUT \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 -d'{\\\"enabled\\\":true}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-4\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n \\\"errors\\\": [],\\n \\\"messages\\\": [],\\n \\\"result\\\": {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": true,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": null,\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n },\\n \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Once the job is enabled, you will start receiving logs within a few minutes and then in batches as soon as possible until you disable the job. For zones with very high request volume, it may take several hours before you start receiving logs for the first time.\"), mdx(\"p\", null, \"In addition to modifying \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"enabled\"), \", you can also update the value for \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \". To modify \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"destination_conf\"), \", you will need to request an ownership challenge and provide the associated token with your update request. You can also delete your current job and create a new one.\"), mdx(\"p\", null, \"Once a job has been enabled and has started executing, the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"last_complete\"), \" field will show the time when the last batch of logs was successfully sent to the destination:\"), mdx(\"h3\", {\n    \"id\": \"request-to-get-job-by-id-and-see-last_complete-info\"\n  }, \"Request to get job by ID and see \", mdx(\"strong\", {\n    parentName: \"h3\"\n  }, \"last_complete\"), \" info\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-5\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\\"errors\\\": [],\\n \\\"messages\\\": [],\\n \\\"result\\\": {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": true,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": \\\"2018-08-09T21:26:00Z\\\",\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n },\\n \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-4---delete-a-job\"\n  }, \"Step 4 - Delete a job\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X DELETE \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"p\", null, \"Be careful when deleting a job because this action cannot be reversed.\"), mdx(\"h3\", {\n    \"id\": \"response-6\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {},\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-5---retrieve-your-job\"\n  }, \"Step 5 - Retrieve your job\"), mdx(\"p\", null, \"Retrieve a specific job, using the job ID:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-7\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": [\\n    {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": true,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": null,\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n    }\\n  ],\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Retrieve all jobs for all data sets:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-8\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": [\\n    {\\n      \\\"id\\\": 8029,\\n      \\\"dataset\\\": \\\"spectrum_events\\\",\\n      \\\"enabled\\\": true,\\n      \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n      \\\"logpull_options\\\": \\\"fields=Application,ClientAsn,ClientIP,ColoCode,Event,OriginIP,Status\\\",\\n      \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n      \\\"last_complete\\\": \\\"2019-10-01T00:25:00Z\\\",\\n      \\\"last_error\\\": null,\\n      \\\"error_message\\\": null\\n    },\\n    {\\n      \\\"id\\\": 146,\\n      \\\"dataset\\\": \\\"http_requests\\\",\\n      \\\"enabled\\\": false,\\n      \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n      \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n      \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n      \\\"last_complete\\\": \\\"2019-09-24T21:15:00Z\\\",\\n      \\\"last_error\\\": null,\\n      \\\"error_message\\\": null\\n    }\\n  ]\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-6---updating-logpull_options\"\n  }, \"Step 6 - Updating \", mdx(\"strong\", {\n    parentName: \"h2\"\n  }, \"logpull_options\")), mdx(\"p\", null, \"If you want to add (or remove) fields, change the timestamp format, or enable protection against the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Log4j - CVE-2021-44228\"), \" vulnerability, first retrieve the current \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \" for your zone.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\\\\n    -H 'X-Auth-Key: <API_KEY>' \\\\\\n    -H 'X-Auth-Email: <EMAIL>' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-9\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"errors\\\": [],\\n    \\\"messages\\\": [],\\n    \\\"result\\\": {\\n        \\\"id\\\": 146,\\n        \\\"dataset\\\": \\\"http_requests\\\",\\n        \\\"logstream\\\": true,\\n        \\\"frequency\\\": \\\"high\\\",\\n        \\\"kind\\\": \\\"\\\",\\n        \\\"enabled\\\": true,\\n        \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n        \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n        \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n        \\\"last_complete\\\": \\\"2021-12-14T19:56:49Z\\\",\\n        \\\"last_error\\\": null,\\n        \\\"error_message\\\": null\\n    },\\n    \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Next, edit the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \" as desired and create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" request. The following example enables the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CVE-2021-44228\"), \" redaction option.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X PUT 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\\\\n    -H 'X-Auth-Key: <API_KEY>' \\\\\\n    -H 'X-Auth-Email: <EMAIL>' \\\\\\n    -d '{\\n    \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\\\"\\n}'\\n\")), mdx(\"p\", null, \"Note that at this time, the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CVE-2021-44228\"), \" option is not available through the UI, and updating your Logpush job through the UI will remove this option.\"), mdx(\"h3\", {\n    \"id\": \"response-10\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"errors\\\": [],\\n    \\\"messages\\\": [],\\n    \\\"result\\\": {\\n        \\\"id\\\": 146,\\n        \\\"dataset\\\": \\\"http_requests\\\",\\n        \\\"logstream\\\": true,\\n        \\\"frequency\\\": \\\"high\\\",\\n        \\\"kind\\\": \\\"\\\",\\n        \\\"enabled\\\": true,\\n        \\\"name\\\": null,\\n        \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\\\",\\n        \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n        \\\"last_complete\\\": \\\"2021-12-14T20:02:19Z\\\",\\n        \\\"last_error\\\": null,\\n        \\\"error_message\\\": null\\n    },\\n    \\\"success\\\": true\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"ea96ecd2-c55e-5f3e-90cc-1194cf89adb9","fields":{"slug":"/reference/logpush-api-configuration/examples/example-logpush-curl"},"frontmatter":{"pcx_content_type":"tutorial","title":"","type":null,"order":87,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Manage Logpush with cURL","depth":1}],"tableOfContents":{"items":[{"url":"#manage-logpush-with-curl","title":"Manage Logpush with cURL","items":[{"url":"#step-1---get-ownership-challenge","title":"Step 1 - Get ownership challenge","items":[{"url":"#parameters","title":"Parameters"},{"url":"#response","title":"Response"}]},{"url":"#step-2---create-a-job","title":"Step 2 - Create a job","items":[{"url":"#parameters-1","title":"Parameters"},{"url":"#response-1","title":"Response"},{"url":"#response-2","title":"Response"}]},{"url":"#step-3---enable-update-a-job","title":"Step 3 - Enable (update) a job","items":[{"url":"#response-3","title":"Response"},{"url":"#response-4","title":"Response"},{"url":"#request-to-get-job-by-id-and-see-last_complete-info","title":"Request to get job by ID and see last_complete info"},{"url":"#response-5","title":"Response"}]},{"url":"#step-4---delete-a-job","title":"Step 4 - Delete a job","items":[{"url":"#response-6","title":"Response"}]},{"url":"#step-5---retrieve-your-job","title":"Step 5 - Retrieve your job","items":[{"url":"#response-7","title":"Response"},{"url":"#response-8","title":"Response"}]},{"url":"#step-6---updating-logpull_options","title":"Step 6 - Updating logpull_options","items":[{"url":"#response-9","title":"Response"},{"url":"#response-10","title":"Response"}]}]}]},"parent":{"modifiedTime":"2022-01-27","relativePath":"reference/logpush-api-configuration/examples/example-logpush-curl/index.md"}}}