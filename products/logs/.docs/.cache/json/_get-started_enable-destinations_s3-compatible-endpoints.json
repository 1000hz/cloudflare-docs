{"data":{"mdx":{"id":"e4f91fc3-666d-5359-8483-fa96fc28f7a0","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Enable S3-compatible endpoints\",\n  \"order\": 56,\n  \"pcx-content-type\": \"how-to\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"enable-logpush-to-s3-compatible-endpoints\"\n  }, \"Enable Logpush to S3-compatible endpoints\"), mdx(\"p\", null, \"Cloudflare Logpush supports pushing logs to S3-compatible destinations via the Cloudflare dashboard or via API, including:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.alibabacloud.com/help/doc-detail/64919.htm#title-37m-7gl-xy2\"\n  }, \"Alibaba Cloud OSS\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.backblaze.com/b2/docs/s3_compatible_api.html\"\n  }, \"Backblaze B2\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.digitalocean.com/docs/spaces/\"\n  }, \"Digital Ocean Spaces\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://cloud.ibm.com/apidocs/cos/cos-compatibility\"\n  }, \"IBM Cloud Object Storage\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.jdcloud.com/en/object-storage-service/introduction-2\"\n  }, \"JD Cloud Object Storage Service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.linode.com/products/object-storage/\"\n  }, \"Linode Object Storage\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.cloud.oracle.com/en-us/iaas/Content/Object/Tasks/s3compatibleapi.htm\"\n  }, \"Oracle Cloud Object Storage\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"On-premise \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.ceph.com/en/latest/radosgw/s3/\"\n  }, \"Ceph Object Gateway\"))), mdx(\"p\", null, \"For more information about Logpush and the current production APIs, refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/get-started/\"\n  }, \"Cloudflare Logpush\"), \" documentation.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-the-cloudflare-dashboard\"\n  }, \"Manage via the Cloudflare dashboard\"), mdx(\"p\", null, \"Enable Logpush to an S3-compatible destination via the dashboard.\"), mdx(\"p\", null, \"To enable the Cloudflare Logpush service:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Log in to the Cloudflare dashboard.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the Enterprise domain you want to use with Logpush.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Analytics\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Connect a service\"), \". A modal window opens where you will need to complete several steps.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the dataset you want to push to a storage service.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the data fields to include in your logs. Add or remove fields later by modifying your settings in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"S3-Compatible\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter or select the following destination information:\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"S3 Compatible Bucket Path\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bucket region\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Access Key ID\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Secret Access Key\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Endpoint URL\")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Validate access\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Save and Start Pushing\"), \" to finish enabling Logpush.\"))), mdx(\"p\", null, \"Once connected, Cloudflare lists the S3-compatible destination as a connected service under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \". Edit or remove connected services from here.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-api\"\n  }, \"Manage via API\"), mdx(\"p\", null, \"To set up S3-compatible endpoints:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a job with the appropriate endpoint URL and authentication parameters.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Enable the job to begin pushing logs.\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"Unlike Logpush jobs to Amazon S3, there is no ownership challenge with S3-compatible APIs.\")), mdx(EnableReadPermissions, {\n    mdxType: \"EnableReadPermissions\"\n  }), mdx(\"h3\", {\n    \"id\": \"1-create-a-job\"\n  }, \"1. Create a job\"), mdx(\"p\", null, \"To create a job, make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \" request to the Logpush jobs endpoint with the following fields:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"name\"), \" (optional) - Use your domain name as the job name.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"destination_conf\"), \" - A log destination consisting of an endpoint name, bucket name, bucket path, region, access-key-id, and secret-access-key in the following string format:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"\\\"s3://<BUCKET_NAME>/<BUCKET_PATH>?region=<REGION>&access-key-id=<ACCESS_KEY_ID>&secret-access-key=<SECRET_ACCESS_KEY>&endpoint=<ENDPOINT_URL>\\\"\\n\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<ENDPOINT_URL>\"), \" is the URL without the bucket name or path. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"endpoint=sfo2.digitaloceanspaces.com\"), \".\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dataset\"), \" - The category of logs you want to receive. Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/log-fields\"\n  }, \"Log fields\"), \" for the full list of supported datasets.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"logpull_options\"), \" (optional) - To configure fields, sample rate, and timestamp format, refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/get-started/logpush-configuration-api/understanding-logpush-api#options\"\n  }, \"Logpush API options\"), \".\")), mdx(\"p\", null, \"Example request using cURL:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X POST \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs \\\\\\n-d '{\\\"name\\\":\\\"<DOMAIN_NAME>\\\",\\n\\\"destination_conf\\\":\\\"s3://<BUCKET_NAME>/<BUCKET_PATH>?region=<REGION>&access-key-id=<ACCESS_KEY_ID>&secret-access-key=<SECRET_ACCESS_KEY>&endpoint=<ENDPOINT_URL>\\\", \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\", \\\"dataset\\\": \\\"http_requests\\\"}' | jq .\\n\")), mdx(\"p\", null, \"Response:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"id\\\": 100,\\n    \\\"dataset\\\": \\\"http_requests\\\",\\n    \\\"enabled\\\": false,\\n    \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n    \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n    \\\"destination_conf\\\": \\\"s3://<BUCKET_NAME>/<BUCKET_PATH>?region=<REGION>&access-key-id=<ACCESS_KEY_ID>&secret-access-key=<SECRET_ACCESS_KEY>&endpoint=<ENDPOINT_URL>\\\",\\n    \\\"last_complete\\\": null,\\n    \\\"last_error\\\": null,\\n    \\\"error_message\\\": null\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"2-enable-update-a-job\"\n  }, \"2. Enable (update) a job\"), mdx(\"p\", null, \"To enable a  job, make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" request to the Logpush jobs endpoint. You will use the job ID returned from the previous step in the URL, and send \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{\\\"enabled\\\": true}\"), \" in the request body.\"), mdx(\"p\", null, \"Example request using cURL:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X PUT \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/100 -d'{\\\"enabled\\\":true}' | jq .\\n\")), mdx(\"p\", null, \"Response:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"id\\\": 100,\\n    \\\"dataset\\\": \\\"http_requests\\\",\\n    \\\"enabled\\\": true,\\n    \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n    \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n    \\\"destination_conf\\\": \\\"s3://<BUCKET_NAME>/<BUCKET_PATH>?region=<REGION>&access-key-id=<ACCESS_KEY_ID>&secret-access-key=<SECRET_ACCESS_KEY>&endpoint=<ENDPOINT_URL>\\\",\\n    \\\"last_complete\\\": null,\\n    \\\"last_error\\\": null,\\n    \\\"error_message\\\": null\\n  },\\n  \\\"success\\\": true\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"Enable S3-compatible endpoints","type":null,"updated":null}}},"pageContext":{"id":"e4f91fc3-666d-5359-8483-fa96fc28f7a0","fields":{"slug":"/get-started/enable-destinations/s3-compatible-endpoints"},"frontmatter":{"pcx_content_type":"how-to","title":"Enable S3-compatible endpoints","type":null,"order":56,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Enable Logpush to S3-compatible endpoints","depth":1}],"tableOfContents":{"items":[{"url":"#enable-logpush-to-s3-compatible-endpoints","title":"Enable Logpush to S3-compatible endpoints","items":[{"url":"#manage-via-the-cloudflare-dashboard","title":"Manage via the Cloudflare dashboard"},{"url":"#manage-via-api","title":"Manage via API","items":[{"url":"#1-create-a-job","title":"1. Create a job"},{"url":"#2-enable-update-a-job","title":"2. Enable (update) a job"}]}]}]},"parent":{"modifiedTime":"2022-01-27","relativePath":"get-started/enable-destinations/s3-compatible-endpoints/index.md"}}}