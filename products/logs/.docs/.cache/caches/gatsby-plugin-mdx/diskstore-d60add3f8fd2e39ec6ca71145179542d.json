{"expireTime":9007200898048143000,"key":"gatsby-plugin-mdx-entire-payload-5d97c951025de281e21996bf6472ca27-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import EnableReadPermissions from \"../../../_partials/_enable-read-permissions.md\"","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":83,"offset":83},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Enable Logpush to Amazon S3","position":{"start":{"line":4,"column":3,"offset":87},"end":{"line":4,"column":30,"offset":114},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":85},"end":{"line":4,"column":30,"offset":114},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Logpush supports pushing logs directly to Amazon S3 via the Cloudflare dashboard or via API. Customers that use AWS GovCloud locations should use our ","position":{"start":{"line":6,"column":1,"offset":116},"end":{"line":6,"column":162,"offset":277},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"S3-compatible endpoint","position":{"start":{"line":6,"column":164,"offset":279},"end":{"line":6,"column":186,"offset":301},"indent":[]}}],"position":{"start":{"line":6,"column":162,"offset":277},"end":{"line":6,"column":188,"offset":303},"indent":[]}},{"type":"text","value":" and not the ","position":{"start":{"line":6,"column":188,"offset":303},"end":{"line":6,"column":201,"offset":316},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Amazon S3 endpoint","position":{"start":{"line":6,"column":203,"offset":318},"end":{"line":6,"column":221,"offset":336},"indent":[]}}],"position":{"start":{"line":6,"column":201,"offset":316},"end":{"line":6,"column":223,"offset":338},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":6,"column":223,"offset":338},"end":{"line":6,"column":224,"offset":339},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":116},"end":{"line":6,"column":224,"offset":339},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Manage via the Cloudflare dashboard","position":{"start":{"line":8,"column":4,"offset":344},"end":{"line":8,"column":39,"offset":379},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":341},"end":{"line":8,"column":39,"offset":379},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Enable Logpush to Amazon S3 via the dashboard.","position":{"start":{"line":10,"column":1,"offset":381},"end":{"line":10,"column":47,"offset":427},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":381},"end":{"line":10,"column":47,"offset":427},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To enable the Cloudflare Logpush service:","position":{"start":{"line":12,"column":1,"offset":429},"end":{"line":12,"column":42,"offset":470},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":429},"end":{"line":12,"column":42,"offset":470},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Log in to the Cloudflare dashboard.","position":{"start":{"line":14,"column":4,"offset":475},"end":{"line":14,"column":39,"offset":510},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":475},"end":{"line":14,"column":39,"offset":510},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":472},"end":{"line":15,"column":1,"offset":511},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the Enterprise domain you want to use with Logpush.","position":{"start":{"line":16,"column":4,"offset":515},"end":{"line":16,"column":62,"offset":573},"indent":[]}}],"position":{"start":{"line":16,"column":4,"offset":515},"end":{"line":16,"column":62,"offset":573},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":512},"end":{"line":17,"column":1,"offset":574},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":18,"column":4,"offset":578},"end":{"line":18,"column":10,"offset":584},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Analytics","position":{"start":{"line":18,"column":12,"offset":586},"end":{"line":18,"column":21,"offset":595},"indent":[]}}],"position":{"start":{"line":18,"column":10,"offset":584},"end":{"line":18,"column":23,"offset":597},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":18,"column":23,"offset":597},"end":{"line":18,"column":26,"offset":600},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":18,"column":28,"offset":602},"end":{"line":18,"column":32,"offset":606},"indent":[]}}],"position":{"start":{"line":18,"column":26,"offset":600},"end":{"line":18,"column":34,"offset":608},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":34,"offset":608},"end":{"line":18,"column":35,"offset":609},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":578},"end":{"line":18,"column":35,"offset":609},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":575},"end":{"line":19,"column":1,"offset":610},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":20,"column":4,"offset":614},"end":{"line":20,"column":10,"offset":620},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Connect a service","position":{"start":{"line":20,"column":12,"offset":622},"end":{"line":20,"column":29,"offset":639},"indent":[]}}],"position":{"start":{"line":20,"column":10,"offset":620},"end":{"line":20,"column":31,"offset":641},"indent":[]}},{"type":"text","value":". A modal window opens where you will need to complete several steps.","position":{"start":{"line":20,"column":31,"offset":641},"end":{"line":20,"column":100,"offset":710},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":614},"end":{"line":20,"column":100,"offset":710},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":611},"end":{"line":21,"column":1,"offset":711},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the dataset you want to push to a storage service.","position":{"start":{"line":22,"column":4,"offset":715},"end":{"line":22,"column":61,"offset":772},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":715},"end":{"line":22,"column":61,"offset":772},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":712},"end":{"line":23,"column":1,"offset":773},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the data fields to include in your logs. Add or remove fields later by modifying your settings in ","position":{"start":{"line":24,"column":4,"offset":777},"end":{"line":24,"column":109,"offset":882},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":24,"column":111,"offset":884},"end":{"line":24,"column":115,"offset":888},"indent":[]}}],"position":{"start":{"line":24,"column":109,"offset":882},"end":{"line":24,"column":117,"offset":890},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":24,"column":117,"offset":890},"end":{"line":24,"column":120,"offset":893},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logpush","position":{"start":{"line":24,"column":122,"offset":895},"end":{"line":24,"column":129,"offset":902},"indent":[]}}],"position":{"start":{"line":24,"column":120,"offset":893},"end":{"line":24,"column":131,"offset":904},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":24,"column":131,"offset":904},"end":{"line":24,"column":132,"offset":905},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":777},"end":{"line":24,"column":132,"offset":905},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":774},"end":{"line":25,"column":1,"offset":906},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select ","position":{"start":{"line":26,"column":4,"offset":910},"end":{"line":26,"column":11,"offset":917},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Amazon S3","position":{"start":{"line":26,"column":13,"offset":919},"end":{"line":26,"column":22,"offset":928},"indent":[]}}],"position":{"start":{"line":26,"column":11,"offset":917},"end":{"line":26,"column":24,"offset":930},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":26,"column":24,"offset":930},"end":{"line":26,"column":25,"offset":931},"indent":[]}}],"position":{"start":{"line":26,"column":4,"offset":910},"end":{"line":26,"column":25,"offset":931},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":907},"end":{"line":27,"column":1,"offset":932},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enter or select the following destination information:","position":{"start":{"line":28,"column":4,"offset":936},"end":{"line":28,"column":58,"offset":990},"indent":[]}}],"position":{"start":{"line":28,"column":4,"offset":936},"end":{"line":28,"column":58,"offset":990},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Bucket path","position":{"start":{"line":29,"column":10,"offset":1000},"end":{"line":29,"column":21,"offset":1011},"indent":[]}}],"position":{"start":{"line":29,"column":8,"offset":998},"end":{"line":29,"column":23,"offset":1013},"indent":[]}}],"position":{"start":{"line":29,"column":8,"offset":998},"end":{"line":29,"column":23,"offset":1013},"indent":[]}}],"position":{"start":{"line":29,"column":5,"offset":995},"end":{"line":29,"column":23,"offset":1013},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Daily subfolders","position":{"start":{"line":30,"column":10,"offset":1023},"end":{"line":30,"column":26,"offset":1039},"indent":[]}}],"position":{"start":{"line":30,"column":8,"offset":1021},"end":{"line":30,"column":28,"offset":1041},"indent":[]}}],"position":{"start":{"line":30,"column":8,"offset":1021},"end":{"line":30,"column":28,"offset":1041},"indent":[]}}],"position":{"start":{"line":30,"column":5,"offset":1018},"end":{"line":30,"column":28,"offset":1041},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Bucket region","position":{"start":{"line":31,"column":10,"offset":1051},"end":{"line":31,"column":23,"offset":1064},"indent":[]}}],"position":{"start":{"line":31,"column":8,"offset":1049},"end":{"line":31,"column":25,"offset":1066},"indent":[]}}],"position":{"start":{"line":31,"column":8,"offset":1049},"end":{"line":31,"column":25,"offset":1066},"indent":[]}}],"position":{"start":{"line":31,"column":5,"offset":1046},"end":{"line":31,"column":25,"offset":1066},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Encryption constraint in bucket policy","position":{"start":{"line":32,"column":10,"offset":1076},"end":{"line":32,"column":48,"offset":1114},"indent":[]}}],"position":{"start":{"line":32,"column":8,"offset":1074},"end":{"line":32,"column":50,"offset":1116},"indent":[]}}],"position":{"start":{"line":32,"column":8,"offset":1074},"end":{"line":32,"column":50,"offset":1116},"indent":[]}}],"position":{"start":{"line":32,"column":5,"offset":1071},"end":{"line":32,"column":50,"offset":1116},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For ","position":{"start":{"line":33,"column":8,"offset":1124},"end":{"line":33,"column":12,"offset":1128},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Grant Cloudflare access to upload files to your bucket","position":{"start":{"line":33,"column":14,"offset":1130},"end":{"line":33,"column":68,"offset":1184},"indent":[]}}],"position":{"start":{"line":33,"column":12,"offset":1128},"end":{"line":33,"column":70,"offset":1186},"indent":[]}},{"type":"text","value":", make sure your bucket has a policy (if you did not add it already):","position":{"start":{"line":33,"column":70,"offset":1186},"end":{"line":33,"column":139,"offset":1255},"indent":[]}}],"position":{"start":{"line":33,"column":8,"offset":1124},"end":{"line":33,"column":139,"offset":1255},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Copy the JSON policy, then go to your bucket in the Amazon S3 console and paste the policy in ","position":{"start":{"line":34,"column":11,"offset":1266},"end":{"line":34,"column":105,"offset":1360},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Permissions","position":{"start":{"line":34,"column":107,"offset":1362},"end":{"line":34,"column":118,"offset":1373},"indent":[]}}],"position":{"start":{"line":34,"column":105,"offset":1360},"end":{"line":34,"column":120,"offset":1375},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":34,"column":120,"offset":1375},"end":{"line":34,"column":123,"offset":1378},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Bucket Policy","position":{"start":{"line":34,"column":125,"offset":1380},"end":{"line":34,"column":138,"offset":1393},"indent":[]}}],"position":{"start":{"line":34,"column":123,"offset":1378},"end":{"line":34,"column":140,"offset":1395},"indent":[]}},{"type":"text","value":" and click ","position":{"start":{"line":34,"column":140,"offset":1395},"end":{"line":34,"column":151,"offset":1406},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save","position":{"start":{"line":34,"column":153,"offset":1408},"end":{"line":34,"column":157,"offset":1412},"indent":[]}}],"position":{"start":{"line":34,"column":151,"offset":1406},"end":{"line":34,"column":159,"offset":1414},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":34,"column":159,"offset":1414},"end":{"line":34,"column":160,"offset":1415},"indent":[]}}],"position":{"start":{"line":34,"column":11,"offset":1266},"end":{"line":34,"column":160,"offset":1415},"indent":[]}}],"position":{"start":{"line":34,"column":8,"offset":1263},"end":{"line":34,"column":160,"offset":1415},"indent":[]}}],"position":{"start":{"line":34,"column":8,"offset":1263},"end":{"line":34,"column":160,"offset":1415},"indent":[]}}],"position":{"start":{"line":33,"column":5,"offset":1121},"end":{"line":34,"column":160,"offset":1415},"indent":[5]}}],"position":{"start":{"line":29,"column":5,"offset":995},"end":{"line":34,"column":160,"offset":1415},"indent":[5,5,5,5,5]}}],"position":{"start":{"line":28,"column":1,"offset":933},"end":{"line":35,"column":1,"offset":1416},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":36,"column":4,"offset":1420},"end":{"line":36,"column":10,"offset":1426},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Validate access","position":{"start":{"line":36,"column":12,"offset":1428},"end":{"line":36,"column":27,"offset":1443},"indent":[]}}],"position":{"start":{"line":36,"column":10,"offset":1426},"end":{"line":36,"column":29,"offset":1445},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":36,"column":29,"offset":1445},"end":{"line":36,"column":30,"offset":1446},"indent":[]}}],"position":{"start":{"line":36,"column":4,"offset":1420},"end":{"line":36,"column":30,"offset":1446},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1417},"end":{"line":37,"column":5,"offset":1451},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enter the ","position":{"start":{"line":38,"column":4,"offset":1455},"end":{"line":38,"column":14,"offset":1465},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Ownership token","position":{"start":{"line":38,"column":16,"offset":1467},"end":{"line":38,"column":31,"offset":1482},"indent":[]}}],"position":{"start":{"line":38,"column":14,"offset":1465},"end":{"line":38,"column":33,"offset":1484},"indent":[]}},{"type":"text","value":" (included in a file or log Cloudflare sends to your provider) and click ","position":{"start":{"line":38,"column":33,"offset":1484},"end":{"line":38,"column":106,"offset":1557},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Prove ownership","position":{"start":{"line":38,"column":108,"offset":1559},"end":{"line":38,"column":123,"offset":1574},"indent":[]}}],"position":{"start":{"line":38,"column":106,"offset":1557},"end":{"line":38,"column":125,"offset":1576},"indent":[]}},{"type":"text","value":". To find the ownership token, click the ","position":{"start":{"line":38,"column":125,"offset":1576},"end":{"line":38,"column":166,"offset":1617},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Open","position":{"start":{"line":38,"column":168,"offset":1619},"end":{"line":38,"column":172,"offset":1623},"indent":[]}}],"position":{"start":{"line":38,"column":166,"offset":1617},"end":{"line":38,"column":174,"offset":1625},"indent":[]}},{"type":"text","value":" button in the ","position":{"start":{"line":38,"column":174,"offset":1625},"end":{"line":38,"column":189,"offset":1640},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Overview","position":{"start":{"line":38,"column":191,"offset":1642},"end":{"line":38,"column":199,"offset":1650},"indent":[]}}],"position":{"start":{"line":38,"column":189,"offset":1640},"end":{"line":38,"column":201,"offset":1652},"indent":[]}},{"type":"text","value":" tab of the ownership challenge file.","position":{"start":{"line":38,"column":201,"offset":1652},"end":{"line":38,"column":238,"offset":1689},"indent":[]}}],"position":{"start":{"line":38,"column":4,"offset":1455},"end":{"line":38,"column":238,"offset":1689},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1452},"end":{"line":39,"column":1,"offset":1690},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":40,"column":4,"offset":1694},"end":{"line":40,"column":10,"offset":1700},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save and Start Pushing","position":{"start":{"line":40,"column":12,"offset":1702},"end":{"line":40,"column":34,"offset":1724},"indent":[]}}],"position":{"start":{"line":40,"column":10,"offset":1700},"end":{"line":40,"column":36,"offset":1726},"indent":[]}},{"type":"text","value":" to finish enabling Logpush.","position":{"start":{"line":40,"column":36,"offset":1726},"end":{"line":40,"column":64,"offset":1754},"indent":[]}}],"position":{"start":{"line":40,"column":4,"offset":1694},"end":{"line":40,"column":64,"offset":1754},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1691},"end":{"line":40,"column":64,"offset":1754},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":472},"end":{"line":40,"column":64,"offset":1754},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Once connected, Cloudflare lists Amazon S3 as a connected service under ","position":{"start":{"line":42,"column":1,"offset":1756},"end":{"line":42,"column":73,"offset":1828},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":42,"column":75,"offset":1830},"end":{"line":42,"column":79,"offset":1834},"indent":[]}}],"position":{"start":{"line":42,"column":73,"offset":1828},"end":{"line":42,"column":81,"offset":1836},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":42,"column":81,"offset":1836},"end":{"line":42,"column":84,"offset":1839},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logpush","position":{"start":{"line":42,"column":86,"offset":1841},"end":{"line":42,"column":93,"offset":1848},"indent":[]}}],"position":{"start":{"line":42,"column":84,"offset":1839},"end":{"line":42,"column":95,"offset":1850},"indent":[]}},{"type":"text","value":". Edit or remove connected services from here.","position":{"start":{"line":42,"column":95,"offset":1850},"end":{"line":42,"column":141,"offset":1896},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":1756},"end":{"line":42,"column":141,"offset":1896},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Manage via API","position":{"start":{"line":45,"column":4,"offset":1902},"end":{"line":45,"column":18,"offset":1916},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1899},"end":{"line":45,"column":18,"offset":1916},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare uses Amazon Identity and Access Management (IAM) to gain access to your S3 bucket. The Cloudflare IAM user needs ","position":{"start":{"line":47,"column":1,"offset":1918},"end":{"line":47,"column":125,"offset":2042},"indent":[]}},{"type":"inlineCode","value":"PutObject","position":{"start":{"line":47,"column":125,"offset":2042},"end":{"line":47,"column":136,"offset":2053},"indent":[]}},{"type":"text","value":" permission for the bucket.","position":{"start":{"line":47,"column":136,"offset":2053},"end":{"line":47,"column":163,"offset":2080},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1918},"end":{"line":47,"column":163,"offset":2080},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Logs are written into that bucket as gzipped objects using the S3 Access Control List (ACL)\n","position":{"start":{"line":49,"column":1,"offset":2082},"end":{"line":50,"column":1,"offset":2174},"indent":[1]}},{"type":"inlineCode","value":"Bucket-owner-full-control","position":{"start":{"line":50,"column":1,"offset":2174},"end":{"line":50,"column":28,"offset":2201},"indent":[]}},{"type":"text","value":" permission.","position":{"start":{"line":50,"column":28,"offset":2201},"end":{"line":50,"column":40,"offset":2213},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2082},"end":{"line":50,"column":40,"offset":2213},"indent":[1]}},{"type":"jsx","value":"<EnableReadPermissions/>","position":{"start":{"line":52,"column":1,"offset":2215},"end":{"line":52,"column":25,"offset":2239},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For illustrative purposes, imagine that you want to store logs in the bucket ","position":{"start":{"line":54,"column":1,"offset":2241},"end":{"line":54,"column":78,"offset":2318},"indent":[]}},{"type":"inlineCode","value":"burritobot","position":{"start":{"line":54,"column":78,"offset":2318},"end":{"line":54,"column":90,"offset":2330},"indent":[]}},{"type":"text","value":", in the ","position":{"start":{"line":54,"column":90,"offset":2330},"end":{"line":54,"column":99,"offset":2339},"indent":[]}},{"type":"inlineCode","value":"logs","position":{"start":{"line":54,"column":99,"offset":2339},"end":{"line":54,"column":105,"offset":2345},"indent":[]}},{"type":"text","value":" directory. The S3 URL would then be ","position":{"start":{"line":54,"column":105,"offset":2345},"end":{"line":54,"column":142,"offset":2382},"indent":[]}},{"type":"inlineCode","value":"s3://burritobot/logs","position":{"start":{"line":54,"column":142,"offset":2382},"end":{"line":54,"column":164,"offset":2404},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":54,"column":164,"offset":2404},"end":{"line":54,"column":165,"offset":2405},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2241},"end":{"line":54,"column":165,"offset":2405},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To enable Logpush to Amazon S3:","position":{"start":{"line":56,"column":1,"offset":2407},"end":{"line":56,"column":32,"offset":2438},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2407},"end":{"line":56,"column":32,"offset":2438},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create an S3 bucket. Refer to ","position":{"start":{"line":58,"column":4,"offset":2443},"end":{"line":58,"column":34,"offset":2473},"indent":[]}},{"type":"link","title":null,"url":"https://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html","children":[{"type":"text","value":"instructions from Amazon","position":{"start":{"line":58,"column":35,"offset":2474},"end":{"line":58,"column":59,"offset":2498},"indent":[]}}],"position":{"start":{"line":58,"column":34,"offset":2473},"end":{"line":58,"column":130,"offset":2569},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":58,"column":130,"offset":2569},"end":{"line":58,"column":131,"offset":2570},"indent":[]}}],"position":{"start":{"line":58,"column":4,"offset":2443},"end":{"line":58,"column":131,"offset":2570},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note: Buckets in China regions (","position":{"start":{"line":60,"column":5,"offset":2576},"end":{"line":60,"column":37,"offset":2608},"indent":[]}},{"type":"inlineCode","value":"cn-north-1","position":{"start":{"line":60,"column":37,"offset":2608},"end":{"line":60,"column":49,"offset":2620},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":60,"column":49,"offset":2620},"end":{"line":60,"column":51,"offset":2622},"indent":[]}},{"type":"inlineCode","value":"cn-northwest-1","position":{"start":{"line":60,"column":51,"offset":2622},"end":{"line":60,"column":67,"offset":2638},"indent":[]}},{"type":"text","value":") are currently not supported.","position":{"start":{"line":60,"column":67,"offset":2638},"end":{"line":60,"column":97,"offset":2668},"indent":[]}}],"position":{"start":{"line":60,"column":5,"offset":2576},"end":{"line":60,"column":97,"offset":2668},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2440},"end":{"line":61,"column":1,"offset":2669},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Edit and paste the policy below into ","position":{"start":{"line":62,"column":4,"offset":2673},"end":{"line":62,"column":41,"offset":2710},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"S3","position":{"start":{"line":62,"column":43,"offset":2712},"end":{"line":62,"column":45,"offset":2714},"indent":[]}}],"position":{"start":{"line":62,"column":41,"offset":2710},"end":{"line":62,"column":47,"offset":2716},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":62,"column":47,"offset":2716},"end":{"line":62,"column":50,"offset":2719},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Bucket","position":{"start":{"line":62,"column":52,"offset":2721},"end":{"line":62,"column":58,"offset":2727},"indent":[]}}],"position":{"start":{"line":62,"column":50,"offset":2719},"end":{"line":62,"column":60,"offset":2729},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":62,"column":60,"offset":2729},"end":{"line":62,"column":63,"offset":2732},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Permissions","position":{"start":{"line":62,"column":65,"offset":2734},"end":{"line":62,"column":76,"offset":2745},"indent":[]}}],"position":{"start":{"line":62,"column":63,"offset":2732},"end":{"line":62,"column":78,"offset":2747},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":62,"column":78,"offset":2747},"end":{"line":62,"column":81,"offset":2750},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Bucket Policy","position":{"start":{"line":62,"column":83,"offset":2752},"end":{"line":62,"column":96,"offset":2765},"indent":[]}}],"position":{"start":{"line":62,"column":81,"offset":2750},"end":{"line":62,"column":98,"offset":2767},"indent":[]}},{"type":"text","value":", replacing the ","position":{"start":{"line":62,"column":98,"offset":2767},"end":{"line":62,"column":114,"offset":2783},"indent":[]}},{"type":"inlineCode","value":"Resource","position":{"start":{"line":62,"column":114,"offset":2783},"end":{"line":62,"column":124,"offset":2793},"indent":[]}},{"type":"text","value":" value with your own bucket path:","position":{"start":{"line":62,"column":124,"offset":2793},"end":{"line":62,"column":157,"offset":2826},"indent":[]}}],"position":{"start":{"line":62,"column":4,"offset":2673},"end":{"line":62,"column":157,"offset":2826},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2670},"end":{"line":62,"column":157,"offset":2826},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2440},"end":{"line":62,"column":157,"offset":2826},"indent":[1,1,1,1]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"Id\": \"Policy1506627184792\",\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1506627150918\",\n      \"Action\": [\n        \"s3:PutObject\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:s3:::burritobot/logs/*\",\n      \"Principal\": {\n        \"AWS\": [\n          \"arn:aws:iam::391854517948:user/cloudflare-logpush\"\n        ]\n      }\n    }\n  ]\n}","position":{"start":{"line":64,"column":1,"offset":2828},"end":{"line":84,"column":4,"offset":3213},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"<Aside type=\"note\" header=\"Note\">","position":{"start":{"line":86,"column":1,"offset":3215},"end":{"line":86,"column":34,"offset":3248},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Logpush uses multipart upload for S3. Aborted uploads will result in incomplete files remaining in your bucket. To minimize your storage costs, Amazon recommends configuring a lifecycle rule using the ","position":{"start":{"line":88,"column":1,"offset":3250},"end":{"line":88,"column":202,"offset":3451},"indent":[]}},{"type":"inlineCode","value":"AbortIncompleteMultipartUpload","position":{"start":{"line":88,"column":202,"offset":3451},"end":{"line":88,"column":234,"offset":3483},"indent":[]}},{"type":"text","value":" action. Refer to ","position":{"start":{"line":88,"column":234,"offset":3483},"end":{"line":88,"column":252,"offset":3501},"indent":[]}},{"type":"link","title":null,"url":"https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html#mpu-abort-incomplete-mpu-lifecycle-config","children":[{"type":"text","value":"Uploading and copying objects using multipart upload","position":{"start":{"line":88,"column":253,"offset":3502},"end":{"line":88,"column":305,"offset":3554},"indent":[]}}],"position":{"start":{"line":88,"column":252,"offset":3501},"end":{"line":88,"column":414,"offset":3663},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":88,"column":414,"offset":3663},"end":{"line":88,"column":415,"offset":3664},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":3250},"end":{"line":88,"column":415,"offset":3664},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":90,"column":1,"offset":3666},"end":{"line":90,"column":9,"offset":3674},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Enable Amazon S3\",\"order\":55,\"pcx-content-type\":\"how-to\"}","position":{"start":{"line":92,"column":1,"offset":3676},"end":{"line":92,"column":96,"offset":3771},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":92,"column":96,"offset":3771}}},"scopeImports":["import EnableReadPermissions from \"../../../_partials/_enable-read-permissions.md\"","import * as React from 'react'"],"scopeIdentifiers":["EnableReadPermissions","React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Enable Amazon S3\",\n  \"order\": 55,\n  \"pcx-content-type\": \"how-to\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"enable-logpush-to-amazon-s3\"\n  }, \"Enable Logpush to Amazon S3\"), mdx(\"p\", null, \"Cloudflare Logpush supports pushing logs directly to Amazon S3 via the Cloudflare dashboard or via API. Customers that use AWS GovCloud locations should use our \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"S3-compatible endpoint\"), \" and not the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Amazon S3 endpoint\"), \".\"), mdx(\"h2\", {\n    \"id\": \"manage-via-the-cloudflare-dashboard\"\n  }, \"Manage via the Cloudflare dashboard\"), mdx(\"p\", null, \"Enable Logpush to Amazon S3 via the dashboard.\"), mdx(\"p\", null, \"To enable the Cloudflare Logpush service:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Log in to the Cloudflare dashboard.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the Enterprise domain you want to use with Logpush.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Analytics\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Connect a service\"), \". A modal window opens where you will need to complete several steps.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the dataset you want to push to a storage service.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the data fields to include in your logs. Add or remove fields later by modifying your settings in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Amazon S3\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter or select the following destination information:\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bucket path\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Daily subfolders\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bucket region\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Encryption constraint in bucket policy\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Grant Cloudflare access to upload files to your bucket\"), \", make sure your bucket has a policy (if you did not add it already):\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Copy the JSON policy, then go to your bucket in the Amazon S3 console and paste the policy in \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Permissions\"), \" > \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bucket Policy\"), \" and click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Save\"), \".\"))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Validate access\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ownership token\"), \" (included in a file or log Cloudflare sends to your provider) and click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Prove ownership\"), \". To find the ownership token, click the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Open\"), \" button in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Overview\"), \" tab of the ownership challenge file.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Save and Start Pushing\"), \" to finish enabling Logpush.\"))), mdx(\"p\", null, \"Once connected, Cloudflare lists Amazon S3 as a connected service under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \". Edit or remove connected services from here.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-api\"\n  }, \"Manage via API\"), mdx(\"p\", null, \"Cloudflare uses Amazon Identity and Access Management (IAM) to gain access to your S3 bucket. The Cloudflare IAM user needs \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PutObject\"), \" permission for the bucket.\"), mdx(\"p\", null, \"Logs are written into that bucket as gzipped objects using the S3 Access Control List (ACL)\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Bucket-owner-full-control\"), \" permission.\"), mdx(EnableReadPermissions, {\n    mdxType: \"EnableReadPermissions\"\n  }), mdx(\"p\", null, \"For illustrative purposes, imagine that you want to store logs in the bucket \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"burritobot\"), \", in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logs\"), \" directory. The S3 URL would then be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"s3://burritobot/logs\"), \".\"), mdx(\"p\", null, \"To enable Logpush to Amazon S3:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create an S3 bucket. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html\"\n  }, \"instructions from Amazon\"), \".\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Note: Buckets in China regions (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cn-north-1\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cn-northwest-1\"), \") are currently not supported.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Edit and paste the policy below into \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"S3\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Bucket\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Permissions\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Bucket Policy\"), \", replacing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Resource\"), \" value with your own bucket path:\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"Id\\\": \\\"Policy1506627184792\\\",\\n  \\\"Version\\\": \\\"2012-10-17\\\",\\n  \\\"Statement\\\": [\\n    {\\n      \\\"Sid\\\": \\\"Stmt1506627150918\\\",\\n      \\\"Action\\\": [\\n        \\\"s3:PutObject\\\"\\n      ],\\n      \\\"Effect\\\": \\\"Allow\\\",\\n      \\\"Resource\\\": \\\"arn:aws:s3:::burritobot/logs/*\\\",\\n      \\\"Principal\\\": {\\n        \\\"AWS\\\": [\\n          \\\"arn:aws:iam::391854517948:user/cloudflare-logpush\\\"\\n        ]\\n      }\\n    }\\n  ]\\n}\\n\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"Logpush uses multipart upload for S3. Aborted uploads will result in incomplete files remaining in your bucket. To minimize your storage costs, Amazon recommends configuring a lifecycle rule using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AbortIncompleteMultipartUpload\"), \" action. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html#mpu-abort-incomplete-mpu-lifecycle-config\"\n  }, \"Uploading and copying objects using multipart upload\"), \".\")));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport EnableReadPermissions from \"../../../_partials/_enable-read-permissions.md\"\nexport const _frontmatter = {\n  \"title\": \"Enable Amazon S3\",\n  \"order\": 55,\n  \"pcx-content-type\": \"how-to\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"enable-logpush-to-amazon-s3\"\n    }}>{`Enable Logpush to Amazon S3`}</h1>\n    <p>{`Cloudflare Logpush supports pushing logs directly to Amazon S3 via the Cloudflare dashboard or via API. Customers that use AWS GovCloud locations should use our `}<strong parentName=\"p\">{`S3-compatible endpoint`}</strong>{` and not the `}<strong parentName=\"p\">{`Amazon S3 endpoint`}</strong>{`.`}</p>\n    <h2 {...{\n      \"id\": \"manage-via-the-cloudflare-dashboard\"\n    }}>{`Manage via the Cloudflare dashboard`}</h2>\n    <p>{`Enable Logpush to Amazon S3 via the dashboard.`}</p>\n    <p>{`To enable the Cloudflare Logpush service:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Log in to the Cloudflare dashboard.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the Enterprise domain you want to use with Logpush.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Go to `}<strong parentName=\"p\">{`Analytics`}</strong>{` > `}<strong parentName=\"p\">{`Logs`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<strong parentName=\"p\">{`Connect a service`}</strong>{`. A modal window opens where you will need to complete several steps.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the dataset you want to push to a storage service.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the data fields to include in your logs. Add or remove fields later by modifying your settings in `}<strong parentName=\"p\">{`Logs`}</strong>{` > `}<strong parentName=\"p\">{`Logpush`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select `}<strong parentName=\"p\">{`Amazon S3`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enter or select the following destination information:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Bucket path`}</strong></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Daily subfolders`}</strong></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Bucket region`}</strong></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Encryption constraint in bucket policy`}</strong></li>\n          <li parentName=\"ul\">{`For `}<strong parentName=\"li\">{`Grant Cloudflare access to upload files to your bucket`}</strong>{`, make sure your bucket has a policy (if you did not add it already):`}<ul parentName=\"li\">\n              <li parentName=\"ul\">{`Copy the JSON policy, then go to your bucket in the Amazon S3 console and paste the policy in `}<strong parentName=\"li\">{`Permissions`}</strong>{` > `}<strong parentName=\"li\">{`Bucket Policy`}</strong>{` and click `}<strong parentName=\"li\">{`Save`}</strong>{`.`}</li>\n            </ul></li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<strong parentName=\"p\">{`Validate access`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enter the `}<strong parentName=\"p\">{`Ownership token`}</strong>{` (included in a file or log Cloudflare sends to your provider) and click `}<strong parentName=\"p\">{`Prove ownership`}</strong>{`. To find the ownership token, click the `}<strong parentName=\"p\">{`Open`}</strong>{` button in the `}<strong parentName=\"p\">{`Overview`}</strong>{` tab of the ownership challenge file.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<strong parentName=\"p\">{`Save and Start Pushing`}</strong>{` to finish enabling Logpush.`}</p>\n      </li>\n    </ol>\n    <p>{`Once connected, Cloudflare lists Amazon S3 as a connected service under `}<strong parentName=\"p\">{`Logs`}</strong>{` > `}<strong parentName=\"p\">{`Logpush`}</strong>{`. Edit or remove connected services from here.`}</p>\n    <h2 {...{\n      \"id\": \"manage-via-api\"\n    }}>{`Manage via API`}</h2>\n    <p>{`Cloudflare uses Amazon Identity and Access Management (IAM) to gain access to your S3 bucket. The Cloudflare IAM user needs `}<inlineCode parentName=\"p\">{`PutObject`}</inlineCode>{` permission for the bucket.`}</p>\n    <p>{`Logs are written into that bucket as gzipped objects using the S3 Access Control List (ACL)\n`}<inlineCode parentName=\"p\">{`Bucket-owner-full-control`}</inlineCode>{` permission.`}</p>\n    <EnableReadPermissions mdxType=\"EnableReadPermissions\" />\n    <p>{`For illustrative purposes, imagine that you want to store logs in the bucket `}<inlineCode parentName=\"p\">{`burritobot`}</inlineCode>{`, in the `}<inlineCode parentName=\"p\">{`logs`}</inlineCode>{` directory. The S3 URL would then be `}<inlineCode parentName=\"p\">{`s3://burritobot/logs`}</inlineCode>{`.`}</p>\n    <p>{`To enable Logpush to Amazon S3:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create an S3 bucket. Refer to `}<a parentName=\"p\" {...{\n            \"href\": \"https://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html\"\n          }}>{`instructions from Amazon`}</a>{`.`}</p>\n        <p parentName=\"li\">{`Note: Buckets in China regions (`}<inlineCode parentName=\"p\">{`cn-north-1`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`cn-northwest-1`}</inlineCode>{`) are currently not supported.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Edit and paste the policy below into `}<strong parentName=\"p\">{`S3`}</strong>{` > `}<strong parentName=\"p\">{`Bucket`}</strong>{` > `}<strong parentName=\"p\">{`Permissions`}</strong>{` > `}<strong parentName=\"p\">{`Bucket Policy`}</strong>{`, replacing the `}<inlineCode parentName=\"p\">{`Resource`}</inlineCode>{` value with your own bucket path:`}</p>\n      </li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"Id\": \"Policy1506627184792\",\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1506627150918\",\n      \"Action\": [\n        \"s3:PutObject\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:s3:::burritobot/logs/*\",\n      \"Principal\": {\n        \"AWS\": [\n          \"arn:aws:iam::391854517948:user/cloudflare-logpush\"\n        ]\n      }\n    }\n  ]\n}\n`}</code></pre>\n    <Aside type=\"note\" header=\"Note\" mdxType=\"Aside\">\n      <p>{`Logpush uses multipart upload for S3. Aborted uploads will result in incomplete files remaining in your bucket. To minimize your storage costs, Amazon recommends configuring a lifecycle rule using the `}<inlineCode parentName=\"p\">{`AbortIncompleteMultipartUpload`}</inlineCode>{` action. Refer to `}<a parentName=\"p\" {...{\n          \"href\": \"https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html#mpu-abort-incomplete-mpu-lifecycle-config\"\n        }}>{`Uploading and copying objects using multipart upload`}</a>{`.`}</p>\n    </Aside>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}