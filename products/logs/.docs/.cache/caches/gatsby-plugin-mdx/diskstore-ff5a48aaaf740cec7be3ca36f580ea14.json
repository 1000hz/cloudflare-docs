{"expireTime":9007200898048143000,"key":"gatsby-plugin-mdx-entire-payload-a41355ca64810c2d1d594593f435fa2c-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import EnableReadPermissions from \"../../../_partials/_enable-read-permissions.md\"","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":83,"offset":83},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Enable Logpush to Google Cloud Storage","position":{"start":{"line":4,"column":3,"offset":87},"end":{"line":4,"column":41,"offset":125},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":85},"end":{"line":4,"column":41,"offset":125},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Logpush supports pushing logs directly to Google Cloud Storage (GCS) via the Cloudflare dashboard or via API.","position":{"start":{"line":6,"column":1,"offset":127},"end":{"line":6,"column":121,"offset":247},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":127},"end":{"line":6,"column":121,"offset":247},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Manage via the Cloudflare dashboard","position":{"start":{"line":8,"column":4,"offset":252},"end":{"line":8,"column":39,"offset":287},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":249},"end":{"line":8,"column":39,"offset":287},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Enable Logpush to Google Cloud Storage via the dashboard.","position":{"start":{"line":10,"column":1,"offset":289},"end":{"line":10,"column":58,"offset":346},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":289},"end":{"line":10,"column":58,"offset":346},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To enable the Cloudflare Logpush service:","position":{"start":{"line":12,"column":1,"offset":348},"end":{"line":12,"column":42,"offset":389},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":348},"end":{"line":12,"column":42,"offset":389},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Log in to the Cloudflare dashboard.","position":{"start":{"line":14,"column":4,"offset":394},"end":{"line":14,"column":39,"offset":429},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":394},"end":{"line":14,"column":39,"offset":429},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":391},"end":{"line":15,"column":1,"offset":430},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the Enterprise domain you want to use with Logpush.","position":{"start":{"line":16,"column":4,"offset":434},"end":{"line":16,"column":62,"offset":492},"indent":[]}}],"position":{"start":{"line":16,"column":4,"offset":434},"end":{"line":16,"column":62,"offset":492},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":431},"end":{"line":17,"column":1,"offset":493},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":18,"column":4,"offset":497},"end":{"line":18,"column":10,"offset":503},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Analytics","position":{"start":{"line":18,"column":12,"offset":505},"end":{"line":18,"column":21,"offset":514},"indent":[]}}],"position":{"start":{"line":18,"column":10,"offset":503},"end":{"line":18,"column":23,"offset":516},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":18,"column":23,"offset":516},"end":{"line":18,"column":26,"offset":519},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":18,"column":28,"offset":521},"end":{"line":18,"column":32,"offset":525},"indent":[]}}],"position":{"start":{"line":18,"column":26,"offset":519},"end":{"line":18,"column":34,"offset":527},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":34,"offset":527},"end":{"line":18,"column":35,"offset":528},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":497},"end":{"line":18,"column":35,"offset":528},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":494},"end":{"line":19,"column":1,"offset":529},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":20,"column":4,"offset":533},"end":{"line":20,"column":10,"offset":539},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Connect a service","position":{"start":{"line":20,"column":12,"offset":541},"end":{"line":20,"column":29,"offset":558},"indent":[]}}],"position":{"start":{"line":20,"column":10,"offset":539},"end":{"line":20,"column":31,"offset":560},"indent":[]}},{"type":"text","value":". A modal window opens where you will need to complete several steps.","position":{"start":{"line":20,"column":31,"offset":560},"end":{"line":20,"column":100,"offset":629},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":533},"end":{"line":20,"column":100,"offset":629},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":530},"end":{"line":21,"column":1,"offset":630},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the dataset you want to push to a storage service.","position":{"start":{"line":22,"column":4,"offset":634},"end":{"line":22,"column":61,"offset":691},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":634},"end":{"line":22,"column":61,"offset":691},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":631},"end":{"line":23,"column":1,"offset":692},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the data fields to include in your logs. Add or remove fields later by modifying your settings in ","position":{"start":{"line":24,"column":4,"offset":696},"end":{"line":24,"column":109,"offset":801},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":24,"column":111,"offset":803},"end":{"line":24,"column":115,"offset":807},"indent":[]}}],"position":{"start":{"line":24,"column":109,"offset":801},"end":{"line":24,"column":117,"offset":809},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":24,"column":117,"offset":809},"end":{"line":24,"column":120,"offset":812},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logpush","position":{"start":{"line":24,"column":122,"offset":814},"end":{"line":24,"column":129,"offset":821},"indent":[]}}],"position":{"start":{"line":24,"column":120,"offset":812},"end":{"line":24,"column":131,"offset":823},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":24,"column":131,"offset":823},"end":{"line":24,"column":132,"offset":824},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":696},"end":{"line":24,"column":132,"offset":824},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":693},"end":{"line":25,"column":1,"offset":825},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select ","position":{"start":{"line":26,"column":4,"offset":829},"end":{"line":26,"column":11,"offset":836},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Google Cloud Storage","position":{"start":{"line":26,"column":13,"offset":838},"end":{"line":26,"column":33,"offset":858},"indent":[]}}],"position":{"start":{"line":26,"column":11,"offset":836},"end":{"line":26,"column":35,"offset":860},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":26,"column":35,"offset":860},"end":{"line":26,"column":36,"offset":861},"indent":[]}}],"position":{"start":{"line":26,"column":4,"offset":829},"end":{"line":26,"column":36,"offset":861},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":826},"end":{"line":27,"column":1,"offset":862},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enter or select the following destination information:","position":{"start":{"line":28,"column":4,"offset":866},"end":{"line":28,"column":58,"offset":920},"indent":[]}}],"position":{"start":{"line":28,"column":4,"offset":866},"end":{"line":28,"column":58,"offset":920},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Bucket path","position":{"start":{"line":29,"column":10,"offset":930},"end":{"line":29,"column":21,"offset":941},"indent":[]}}],"position":{"start":{"line":29,"column":8,"offset":928},"end":{"line":29,"column":23,"offset":943},"indent":[]}}],"position":{"start":{"line":29,"column":8,"offset":928},"end":{"line":29,"column":23,"offset":943},"indent":[]}}],"position":{"start":{"line":29,"column":5,"offset":925},"end":{"line":29,"column":23,"offset":943},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Daily subfolders","position":{"start":{"line":30,"column":10,"offset":953},"end":{"line":30,"column":26,"offset":969},"indent":[]}}],"position":{"start":{"line":30,"column":8,"offset":951},"end":{"line":30,"column":28,"offset":971},"indent":[]}}],"position":{"start":{"line":30,"column":8,"offset":951},"end":{"line":30,"column":28,"offset":971},"indent":[]}}],"position":{"start":{"line":30,"column":5,"offset":948},"end":{"line":30,"column":28,"offset":971},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For ","position":{"start":{"line":31,"column":8,"offset":979},"end":{"line":31,"column":12,"offset":983},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Grant Cloudflare access to upload files to your bucket","position":{"start":{"line":31,"column":14,"offset":985},"end":{"line":31,"column":68,"offset":1039},"indent":[]}}],"position":{"start":{"line":31,"column":12,"offset":983},"end":{"line":31,"column":70,"offset":1041},"indent":[]}},{"type":"text","value":", make sure your bucket has added Cloudflare's IAM as a user (if you did not add it already).","position":{"start":{"line":31,"column":70,"offset":1041},"end":{"line":31,"column":163,"offset":1134},"indent":[]}}],"position":{"start":{"line":31,"column":8,"offset":979},"end":{"line":31,"column":163,"offset":1134},"indent":[]}}],"position":{"start":{"line":31,"column":5,"offset":976},"end":{"line":31,"column":163,"offset":1134},"indent":[]}}],"position":{"start":{"line":29,"column":5,"offset":925},"end":{"line":31,"column":163,"offset":1134},"indent":[5,5]}}],"position":{"start":{"line":28,"column":1,"offset":863},"end":{"line":32,"column":1,"offset":1135},"indent":[1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":33,"column":4,"offset":1139},"end":{"line":33,"column":10,"offset":1145},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Validate access","position":{"start":{"line":33,"column":12,"offset":1147},"end":{"line":33,"column":27,"offset":1162},"indent":[]}}],"position":{"start":{"line":33,"column":10,"offset":1145},"end":{"line":33,"column":29,"offset":1164},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":33,"column":29,"offset":1164},"end":{"line":33,"column":30,"offset":1165},"indent":[]}}],"position":{"start":{"line":33,"column":4,"offset":1139},"end":{"line":33,"column":30,"offset":1165},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1136},"end":{"line":34,"column":5,"offset":1170},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enter the ","position":{"start":{"line":35,"column":4,"offset":1174},"end":{"line":35,"column":14,"offset":1184},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Ownership token","position":{"start":{"line":35,"column":16,"offset":1186},"end":{"line":35,"column":31,"offset":1201},"indent":[]}}],"position":{"start":{"line":35,"column":14,"offset":1184},"end":{"line":35,"column":33,"offset":1203},"indent":[]}},{"type":"text","value":" (included in a file or log Cloudflare sends to your provider) and click ","position":{"start":{"line":35,"column":33,"offset":1203},"end":{"line":35,"column":106,"offset":1276},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Prove ownership","position":{"start":{"line":35,"column":108,"offset":1278},"end":{"line":35,"column":123,"offset":1293},"indent":[]}}],"position":{"start":{"line":35,"column":106,"offset":1276},"end":{"line":35,"column":125,"offset":1295},"indent":[]}},{"type":"text","value":". To find the ownership token, click the ","position":{"start":{"line":35,"column":125,"offset":1295},"end":{"line":35,"column":166,"offset":1336},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Open","position":{"start":{"line":35,"column":168,"offset":1338},"end":{"line":35,"column":172,"offset":1342},"indent":[]}}],"position":{"start":{"line":35,"column":166,"offset":1336},"end":{"line":35,"column":174,"offset":1344},"indent":[]}},{"type":"text","value":" button in the ","position":{"start":{"line":35,"column":174,"offset":1344},"end":{"line":35,"column":189,"offset":1359},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Overview","position":{"start":{"line":35,"column":191,"offset":1361},"end":{"line":35,"column":199,"offset":1369},"indent":[]}}],"position":{"start":{"line":35,"column":189,"offset":1359},"end":{"line":35,"column":201,"offset":1371},"indent":[]}},{"type":"text","value":" tab of the ownership challenge file.","position":{"start":{"line":35,"column":201,"offset":1371},"end":{"line":35,"column":238,"offset":1408},"indent":[]}}],"position":{"start":{"line":35,"column":4,"offset":1174},"end":{"line":35,"column":238,"offset":1408},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1171},"end":{"line":36,"column":1,"offset":1409},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":37,"column":4,"offset":1413},"end":{"line":37,"column":10,"offset":1419},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save and Start Pushing","position":{"start":{"line":37,"column":12,"offset":1421},"end":{"line":37,"column":34,"offset":1443},"indent":[]}}],"position":{"start":{"line":37,"column":10,"offset":1419},"end":{"line":37,"column":36,"offset":1445},"indent":[]}},{"type":"text","value":" to finish enabling Logpush.","position":{"start":{"line":37,"column":36,"offset":1445},"end":{"line":37,"column":64,"offset":1473},"indent":[]}}],"position":{"start":{"line":37,"column":4,"offset":1413},"end":{"line":37,"column":64,"offset":1473},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1410},"end":{"line":37,"column":64,"offset":1473},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":391},"end":{"line":37,"column":64,"offset":1473},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Once connected, Cloudflare lists Google Cloud Storage as a connected service under ","position":{"start":{"line":39,"column":1,"offset":1475},"end":{"line":39,"column":84,"offset":1558},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":39,"column":86,"offset":1560},"end":{"line":39,"column":90,"offset":1564},"indent":[]}}],"position":{"start":{"line":39,"column":84,"offset":1558},"end":{"line":39,"column":92,"offset":1566},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":39,"column":92,"offset":1566},"end":{"line":39,"column":95,"offset":1569},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logpush","position":{"start":{"line":39,"column":97,"offset":1571},"end":{"line":39,"column":104,"offset":1578},"indent":[]}}],"position":{"start":{"line":39,"column":95,"offset":1569},"end":{"line":39,"column":106,"offset":1580},"indent":[]}},{"type":"text","value":". Edit or remove connected services from here.","position":{"start":{"line":39,"column":106,"offset":1580},"end":{"line":39,"column":152,"offset":1626},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1475},"end":{"line":39,"column":152,"offset":1626},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Manage via API","position":{"start":{"line":41,"column":4,"offset":1631},"end":{"line":41,"column":18,"offset":1645},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1628},"end":{"line":41,"column":18,"offset":1645},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare uses Google Cloud Identity and Access Management (IAM) to gain access to your bucket. The Cloudflare IAM service account needs admin permission for the bucket.","position":{"start":{"line":43,"column":1,"offset":1647},"end":{"line":43,"column":171,"offset":1817},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1647},"end":{"line":43,"column":171,"offset":1817},"indent":[]}},{"type":"jsx","value":"<EnableReadPermissions/>","position":{"start":{"line":45,"column":1,"offset":1819},"end":{"line":45,"column":25,"offset":1843},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To enable Logpush to GCS:","position":{"start":{"line":47,"column":1,"offset":1845},"end":{"line":47,"column":26,"offset":1870},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1845},"end":{"line":47,"column":26,"offset":1870},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a GCS bucket. Refer to ","position":{"start":{"line":49,"column":4,"offset":1875},"end":{"line":49,"column":34,"offset":1905},"indent":[]}},{"type":"link","title":null,"url":"https://cloud.google.com/storage/docs/creating-buckets#storage-create-bucket-console","children":[{"type":"text","value":"instructions from GCS","position":{"start":{"line":49,"column":35,"offset":1906},"end":{"line":49,"column":56,"offset":1927},"indent":[]}}],"position":{"start":{"line":49,"column":34,"offset":1905},"end":{"line":49,"column":143,"offset":2014},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":49,"column":143,"offset":2014},"end":{"line":49,"column":144,"offset":2015},"indent":[]}}],"position":{"start":{"line":49,"column":4,"offset":1875},"end":{"line":49,"column":144,"offset":2015},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1872},"end":{"line":50,"column":1,"offset":2016},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In ","position":{"start":{"line":51,"column":4,"offset":2020},"end":{"line":51,"column":7,"offset":2023},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Storage","position":{"start":{"line":51,"column":9,"offset":2025},"end":{"line":51,"column":16,"offset":2032},"indent":[]}}],"position":{"start":{"line":51,"column":7,"offset":2023},"end":{"line":51,"column":18,"offset":2034},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":51,"column":18,"offset":2034},"end":{"line":51,"column":21,"offset":2037},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Browser","position":{"start":{"line":51,"column":23,"offset":2039},"end":{"line":51,"column":30,"offset":2046},"indent":[]}}],"position":{"start":{"line":51,"column":21,"offset":2037},"end":{"line":51,"column":32,"offset":2048},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":51,"column":32,"offset":2048},"end":{"line":51,"column":35,"offset":2051},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Bucket","position":{"start":{"line":51,"column":37,"offset":2053},"end":{"line":51,"column":43,"offset":2059},"indent":[]}}],"position":{"start":{"line":51,"column":35,"offset":2051},"end":{"line":51,"column":45,"offset":2061},"indent":[]}},{"type":"text","value":" > ","position":{"start":{"line":51,"column":45,"offset":2061},"end":{"line":51,"column":48,"offset":2064},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Permissions","position":{"start":{"line":51,"column":50,"offset":2066},"end":{"line":51,"column":61,"offset":2077},"indent":[]}}],"position":{"start":{"line":51,"column":48,"offset":2064},"end":{"line":51,"column":63,"offset":2079},"indent":[]}},{"type":"text","value":", add the member ","position":{"start":{"line":51,"column":63,"offset":2079},"end":{"line":51,"column":80,"offset":2096},"indent":[]}},{"type":"inlineCode","value":"logpush@cloudflare-data.iam.gserviceaccount.com","position":{"start":{"line":51,"column":80,"offset":2096},"end":{"line":51,"column":129,"offset":2145},"indent":[]}},{"type":"text","value":" with ","position":{"start":{"line":51,"column":129,"offset":2145},"end":{"line":51,"column":135,"offset":2151},"indent":[]}},{"type":"inlineCode","value":"Storage Object Admin","position":{"start":{"line":51,"column":135,"offset":2151},"end":{"line":51,"column":157,"offset":2173},"indent":[]}},{"type":"text","value":" permission.","position":{"start":{"line":51,"column":157,"offset":2173},"end":{"line":51,"column":169,"offset":2185},"indent":[]}}],"position":{"start":{"line":51,"column":4,"offset":2020},"end":{"line":51,"column":169,"offset":2185},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2017},"end":{"line":51,"column":169,"offset":2185},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1872},"end":{"line":51,"column":169,"offset":2185},"indent":[1,1]}},{"type":"jsx","value":"<Aside type=\"note\" header=\"Note\">","position":{"start":{"line":53,"column":1,"offset":2187},"end":{"line":53,"column":34,"offset":2220},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Logpush will not work if there is a retention policy on your bucket because this policy prevents overwrites. If you are using the policy to enforce deletion, you can use a lifecycle rule instead. Refer to ","position":{"start":{"line":55,"column":1,"offset":2222},"end":{"line":55,"column":206,"offset":2427},"indent":[]}},{"type":"link","title":null,"url":"https://cloud.google.com/storage/docs/lifecycle","children":[{"type":"text","value":"object lifecycle management from GCS","position":{"start":{"line":55,"column":207,"offset":2428},"end":{"line":55,"column":243,"offset":2464},"indent":[]}}],"position":{"start":{"line":55,"column":206,"offset":2427},"end":{"line":55,"column":293,"offset":2514},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":55,"column":293,"offset":2514},"end":{"line":55,"column":294,"offset":2515},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":2222},"end":{"line":55,"column":294,"offset":2515},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":56,"column":1,"offset":2516},"end":{"line":56,"column":9,"offset":2524},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Enable Google Cloud Storage\",\"order\":60,\"pcx-content-type\":\"how-to\"}","position":{"start":{"line":59,"column":1,"offset":2527},"end":{"line":59,"column":107,"offset":2633},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":59,"column":107,"offset":2633}}},"scopeImports":["import EnableReadPermissions from \"../../../_partials/_enable-read-permissions.md\"","import * as React from 'react'"],"scopeIdentifiers":["EnableReadPermissions","React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Enable Google Cloud Storage\",\n  \"order\": 60,\n  \"pcx-content-type\": \"how-to\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"enable-logpush-to-google-cloud-storage\"\n  }, \"Enable Logpush to Google Cloud Storage\"), mdx(\"p\", null, \"Cloudflare Logpush supports pushing logs directly to Google Cloud Storage (GCS) via the Cloudflare dashboard or via API.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-the-cloudflare-dashboard\"\n  }, \"Manage via the Cloudflare dashboard\"), mdx(\"p\", null, \"Enable Logpush to Google Cloud Storage via the dashboard.\"), mdx(\"p\", null, \"To enable the Cloudflare Logpush service:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Log in to the Cloudflare dashboard.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the Enterprise domain you want to use with Logpush.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Analytics\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Connect a service\"), \". A modal window opens where you will need to complete several steps.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the dataset you want to push to a storage service.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select the data fields to include in your logs. Add or remove fields later by modifying your settings in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Google Cloud Storage\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter or select the following destination information:\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bucket path\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Daily subfolders\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Grant Cloudflare access to upload files to your bucket\"), \", make sure your bucket has added Cloudflare's IAM as a user (if you did not add it already).\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Validate access\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Enter the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ownership token\"), \" (included in a file or log Cloudflare sends to your provider) and click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Prove ownership\"), \". To find the ownership token, click the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Open\"), \" button in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Overview\"), \" tab of the ownership challenge file.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Save and Start Pushing\"), \" to finish enabling Logpush.\"))), mdx(\"p\", null, \"Once connected, Cloudflare lists Google Cloud Storage as a connected service under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logpush\"), \". Edit or remove connected services from here.\"), mdx(\"h2\", {\n    \"id\": \"manage-via-api\"\n  }, \"Manage via API\"), mdx(\"p\", null, \"Cloudflare uses Google Cloud Identity and Access Management (IAM) to gain access to your bucket. The Cloudflare IAM service account needs admin permission for the bucket.\"), mdx(EnableReadPermissions, {\n    mdxType: \"EnableReadPermissions\"\n  }), mdx(\"p\", null, \"To enable Logpush to GCS:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a GCS bucket. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/storage/docs/creating-buckets#storage-create-bucket-console\"\n  }, \"instructions from GCS\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"In \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Storage\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Browser\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Bucket\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Permissions\"), \", add the member \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logpush@cloudflare-data.iam.gserviceaccount.com\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Storage Object Admin\"), \" permission.\"))), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"Logpush will not work if there is a retention policy on your bucket because this policy prevents overwrites. If you are using the policy to enforce deletion, you can use a lifecycle rule instead. Refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/storage/docs/lifecycle\"\n  }, \"object lifecycle management from GCS\"), \".\")));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport EnableReadPermissions from \"../../../_partials/_enable-read-permissions.md\"\nexport const _frontmatter = {\n  \"title\": \"Enable Google Cloud Storage\",\n  \"order\": 60,\n  \"pcx-content-type\": \"how-to\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"enable-logpush-to-google-cloud-storage\"\n    }}>{`Enable Logpush to Google Cloud Storage`}</h1>\n    <p>{`Cloudflare Logpush supports pushing logs directly to Google Cloud Storage (GCS) via the Cloudflare dashboard or via API.`}</p>\n    <h2 {...{\n      \"id\": \"manage-via-the-cloudflare-dashboard\"\n    }}>{`Manage via the Cloudflare dashboard`}</h2>\n    <p>{`Enable Logpush to Google Cloud Storage via the dashboard.`}</p>\n    <p>{`To enable the Cloudflare Logpush service:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Log in to the Cloudflare dashboard.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the Enterprise domain you want to use with Logpush.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Go to `}<strong parentName=\"p\">{`Analytics`}</strong>{` > `}<strong parentName=\"p\">{`Logs`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<strong parentName=\"p\">{`Connect a service`}</strong>{`. A modal window opens where you will need to complete several steps.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the dataset you want to push to a storage service.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the data fields to include in your logs. Add or remove fields later by modifying your settings in `}<strong parentName=\"p\">{`Logs`}</strong>{` > `}<strong parentName=\"p\">{`Logpush`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select `}<strong parentName=\"p\">{`Google Cloud Storage`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enter or select the following destination information:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Bucket path`}</strong></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Daily subfolders`}</strong></li>\n          <li parentName=\"ul\">{`For `}<strong parentName=\"li\">{`Grant Cloudflare access to upload files to your bucket`}</strong>{`, make sure your bucket has added Cloudflare's IAM as a user (if you did not add it already).`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<strong parentName=\"p\">{`Validate access`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enter the `}<strong parentName=\"p\">{`Ownership token`}</strong>{` (included in a file or log Cloudflare sends to your provider) and click `}<strong parentName=\"p\">{`Prove ownership`}</strong>{`. To find the ownership token, click the `}<strong parentName=\"p\">{`Open`}</strong>{` button in the `}<strong parentName=\"p\">{`Overview`}</strong>{` tab of the ownership challenge file.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<strong parentName=\"p\">{`Save and Start Pushing`}</strong>{` to finish enabling Logpush.`}</p>\n      </li>\n    </ol>\n    <p>{`Once connected, Cloudflare lists Google Cloud Storage as a connected service under `}<strong parentName=\"p\">{`Logs`}</strong>{` > `}<strong parentName=\"p\">{`Logpush`}</strong>{`. Edit or remove connected services from here.`}</p>\n    <h2 {...{\n      \"id\": \"manage-via-api\"\n    }}>{`Manage via API`}</h2>\n    <p>{`Cloudflare uses Google Cloud Identity and Access Management (IAM) to gain access to your bucket. The Cloudflare IAM service account needs admin permission for the bucket.`}</p>\n    <EnableReadPermissions mdxType=\"EnableReadPermissions\" />\n    <p>{`To enable Logpush to GCS:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a GCS bucket. Refer to `}<a parentName=\"p\" {...{\n            \"href\": \"https://cloud.google.com/storage/docs/creating-buckets#storage-create-bucket-console\"\n          }}>{`instructions from GCS`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`In `}<strong parentName=\"p\">{`Storage`}</strong>{` > `}<strong parentName=\"p\">{`Browser`}</strong>{` > `}<strong parentName=\"p\">{`Bucket`}</strong>{` > `}<strong parentName=\"p\">{`Permissions`}</strong>{`, add the member `}<inlineCode parentName=\"p\">{`logpush@cloudflare-data.iam.gserviceaccount.com`}</inlineCode>{` with `}<inlineCode parentName=\"p\">{`Storage Object Admin`}</inlineCode>{` permission.`}</p>\n      </li>\n    </ol>\n    <Aside type=\"note\" header=\"Note\" mdxType=\"Aside\">\n      <p>{`Logpush will not work if there is a retention policy on your bucket because this policy prevents overwrites. If you are using the policy to enforce deletion, you can use a lifecycle rule instead. Refer to `}<a parentName=\"p\" {...{\n          \"href\": \"https://cloud.google.com/storage/docs/lifecycle\"\n        }}>{`object lifecycle management from GCS`}</a>{`.`}</p>\n    </Aside>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}