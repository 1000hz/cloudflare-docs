{"expireTime":9007200898048142000,"key":"gatsby-plugin-mdx-entire-payload-b621dab584ceb7c302a35fba104b1550-","val":{"mdast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Enabling log retention","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":25,"offset":25},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":25,"offset":25},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default, your HTTP request logs are not retained. When using the Logpull API for the first time, you will need to enable retention. You can also turn off retention at any time. Note that after retention is turned off, previously saved logs will be available until the retention period expires (refer to ","position":{"start":{"line":4,"column":1,"offset":27},"end":{"line":4,"column":307,"offset":333},"indent":[]}},{"type":"link","title":null,"url":"/logpull/understanding-the-basics/#data-retention-period","children":[{"type":"text","value":"Data retention period","position":{"start":{"line":4,"column":308,"offset":334},"end":{"line":4,"column":329,"offset":355},"indent":[]}}],"position":{"start":{"line":4,"column":307,"offset":333},"end":{"line":4,"column":388,"offset":414},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":4,"column":388,"offset":414},"end":{"line":4,"column":390,"offset":416},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":27},"end":{"line":4,"column":390,"offset":416},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Endpoints","position":{"start":{"line":6,"column":4,"offset":421},"end":{"line":6,"column":13,"offset":430},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":418},"end":{"line":6,"column":13,"offset":430},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There are two endpoints for managing log retention:","position":{"start":{"line":8,"column":1,"offset":432},"end":{"line":8,"column":52,"offset":483},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":432},"end":{"line":8,"column":52,"offset":483},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"GET /logs/control/retention/flag","position":{"start":{"line":10,"column":3,"offset":487},"end":{"line":10,"column":37,"offset":521},"indent":[]}},{"type":"text","value":" - returns whether retention is on","position":{"start":{"line":10,"column":37,"offset":521},"end":{"line":10,"column":71,"offset":555},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":487},"end":{"line":10,"column":71,"offset":555},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":485},"end":{"line":10,"column":71,"offset":555},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"POST /logs/control/retention/flag","position":{"start":{"line":11,"column":3,"offset":558},"end":{"line":11,"column":38,"offset":593},"indent":[]}},{"type":"text","value":" - turns retention on or off","position":{"start":{"line":11,"column":38,"offset":593},"end":{"line":11,"column":66,"offset":621},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":558},"end":{"line":11,"column":66,"offset":621},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":556},"end":{"line":11,"column":66,"offset":621},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":485},"end":{"line":11,"column":66,"offset":621},"indent":[1]}},{"type":"jsx","value":"<Aside type=\"note\" header=\"Note\">","position":{"start":{"line":13,"column":1,"offset":623},"end":{"line":13,"column":34,"offset":656},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To make a ","position":{"start":{"line":15,"column":1,"offset":658},"end":{"line":15,"column":11,"offset":668},"indent":[]}},{"type":"inlineCode","value":"POST","position":{"start":{"line":15,"column":11,"offset":668},"end":{"line":15,"column":17,"offset":674},"indent":[]}},{"type":"text","value":" call, you must have a Cloudflare account role with ","position":{"start":{"line":15,"column":17,"offset":674},"end":{"line":15,"column":69,"offset":726},"indent":[]}},{"type":"inlineCode","value":"edit","position":{"start":{"line":15,"column":69,"offset":726},"end":{"line":15,"column":75,"offset":732},"indent":[]}},{"type":"text","value":" permissions, such as Super Administrator, Administrator, or Log Share.","position":{"start":{"line":15,"column":75,"offset":732},"end":{"line":15,"column":146,"offset":803},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":658},"end":{"line":15,"column":146,"offset":803},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":16,"column":1,"offset":804},"end":{"line":16,"column":9,"offset":812},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Example API requests using cURL","position":{"start":{"line":18,"column":4,"offset":817},"end":{"line":18,"column":35,"offset":848},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":814},"end":{"line":18,"column":35,"offset":848},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check whether log retention is turned on:","position":{"start":{"line":20,"column":5,"offset":854},"end":{"line":20,"column":46,"offset":895},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":850},"end":{"line":20,"column":46,"offset":895},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -H \"X-Auth-Email: <EMAIL>\" -H \"X-Auth-Key: <API_KEY>\" GET \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/control/retention/flag\" | jq .","position":{"start":{"line":22,"column":1,"offset":897},"end":{"line":24,"column":4,"offset":1064},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Response:","position":{"start":{"line":26,"column":6,"offset":1071},"end":{"line":26,"column":15,"offset":1080},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1066},"end":{"line":26,"column":15,"offset":1080},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"flag\": false\n  },\n  \"success\": true\n}","position":{"start":{"line":28,"column":1,"offset":1082},"end":{"line":37,"column":4,"offset":1186},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Turn on log retention:","position":{"start":{"line":39,"column":5,"offset":1192},"end":{"line":39,"column":27,"offset":1214},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1188},"end":{"line":39,"column":27,"offset":1214},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -H \"X-Auth-Email: <EMAIL>\" -H \"X-Auth-Key: <API_KEY>\" POST \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/control/retention/flag\" -d'{\"flag\":true}' | jq .","position":{"start":{"line":41,"column":1,"offset":1216},"end":{"line":43,"column":4,"offset":1402},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Parameters","position":{"start":{"line":45,"column":6,"offset":1409},"end":{"line":45,"column":16,"offset":1419},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1404},"end":{"line":45,"column":16,"offset":1419},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"flag","position":{"start":{"line":46,"column":4,"offset":1423},"end":{"line":46,"column":8,"offset":1427},"indent":[]}}],"position":{"start":{"line":46,"column":3,"offset":1422},"end":{"line":46,"column":9,"offset":1428},"indent":[]}},{"type":"text","value":" - can be either ","position":{"start":{"line":46,"column":9,"offset":1428},"end":{"line":46,"column":26,"offset":1445},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":46,"column":26,"offset":1445},"end":{"line":46,"column":32,"offset":1451},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":46,"column":32,"offset":1451},"end":{"line":46,"column":36,"offset":1455},"indent":[]}},{"type":"inlineCode","value":"false","position":{"start":{"line":46,"column":36,"offset":1455},"end":{"line":46,"column":43,"offset":1462},"indent":[]}}],"position":{"start":{"line":46,"column":3,"offset":1422},"end":{"line":46,"column":43,"offset":1462},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1420},"end":{"line":46,"column":43,"offset":1462},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1420},"end":{"line":46,"column":43,"offset":1462},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Response:","position":{"start":{"line":48,"column":6,"offset":1469},"end":{"line":48,"column":15,"offset":1478},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1464},"end":{"line":48,"column":15,"offset":1478},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"flag\": true\n  },\n  \"success\": true\n}","position":{"start":{"line":50,"column":1,"offset":1480},"end":{"line":59,"column":4,"offset":1583},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Audit","position":{"start":{"line":61,"column":4,"offset":1588},"end":{"line":61,"column":9,"offset":1593},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":1585},"end":{"line":61,"column":9,"offset":1593},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Turning log retention on or off is recorded in ","position":{"start":{"line":63,"column":1,"offset":1595},"end":{"line":63,"column":48,"offset":1642},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Cloudflare Audit Logs","position":{"start":{"line":63,"column":50,"offset":1644},"end":{"line":63,"column":71,"offset":1665},"indent":[]}}],"position":{"start":{"line":63,"column":48,"offset":1642},"end":{"line":63,"column":73,"offset":1667},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":63,"column":73,"offset":1667},"end":{"line":63,"column":74,"offset":1668},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":1595},"end":{"line":63,"column":74,"offset":1668},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":12,\"pcx-content-type\":\"interim\"}","position":{"start":{"line":65,"column":1,"offset":1670},"end":{"line":65,"column":70,"offset":1739},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":65,"column":70,"offset":1739}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 12,\n  \"pcx-content-type\": \"interim\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"enabling-log-retention\"\n  }, \"Enabling log retention\"), mdx(\"p\", null, \"By default, your HTTP request logs are not retained. When using the Logpull API for the first time, you will need to enable retention. You can also turn off retention at any time. Note that after retention is turned off, previously saved logs will be available until the retention period expires (refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/logpull/understanding-the-basics/#data-retention-period\"\n  }, \"Data retention period\"), \").\"), mdx(\"h2\", {\n    \"id\": \"endpoints\"\n  }, \"Endpoints\"), mdx(\"p\", null, \"There are two endpoints for managing log retention:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /logs/control/retention/flag\"), \" - returns whether retention is on\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"POST /logs/control/retention/flag\"), \" - turns retention on or off\")), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"To make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \" call, you must have a Cloudflare account role with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"edit\"), \" permissions, such as Super Administrator, Administrator, or Log Share.\")), mdx(\"h2\", {\n    \"id\": \"example-api-requests-using-curl\"\n  }, \"Example API requests using cURL\"), mdx(\"h3\", {\n    \"id\": \"check-whether-log-retention-is-turned-on\"\n  }, \"Check whether log retention is turned on:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -H \\\"X-Auth-Email: <EMAIL>\\\" -H \\\"X-Auth-Key: <API_KEY>\\\" GET \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/control/retention/flag\\\" | jq .\\n\")), mdx(\"h4\", {\n    \"id\": \"response\"\n  }, \"Response:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"flag\\\": false\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"turn-on-log-retention\"\n  }, \"Turn on log retention:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -H \\\"X-Auth-Email: <EMAIL>\\\" -H \\\"X-Auth-Key: <API_KEY>\\\" POST \\\"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/control/retention/flag\\\" -d'{\\\"flag\\\":true}' | jq .\\n\")), mdx(\"h4\", {\n    \"id\": \"parameters\"\n  }, \"Parameters\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"flag\"), \" - can be either \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"false\"))), mdx(\"h4\", {\n    \"id\": \"response-1\"\n  }, \"Response:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"flag\\\": true\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"audit\"\n  }, \"Audit\"), mdx(\"p\", null, \"Turning log retention on or off is recorded in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Cloudflare Audit Logs\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"order\": 12,\n  \"pcx-content-type\": \"interim\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"enabling-log-retention\"\n    }}>{`Enabling log retention`}</h1>\n    <p>{`By default, your HTTP request logs are not retained. When using the Logpull API for the first time, you will need to enable retention. You can also turn off retention at any time. Note that after retention is turned off, previously saved logs will be available until the retention period expires (refer to `}<a parentName=\"p\" {...{\n        \"href\": \"/logpull/understanding-the-basics/#data-retention-period\"\n      }}>{`Data retention period`}</a>{`).`}</p>\n    <h2 {...{\n      \"id\": \"endpoints\"\n    }}>{`Endpoints`}</h2>\n    <p>{`There are two endpoints for managing log retention:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`GET /logs/control/retention/flag`}</inlineCode>{` - returns whether retention is on`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`POST /logs/control/retention/flag`}</inlineCode>{` - turns retention on or off`}</li>\n    </ul>\n    <Aside type=\"note\" header=\"Note\" mdxType=\"Aside\">\n      <p>{`To make a `}<inlineCode parentName=\"p\">{`POST`}</inlineCode>{` call, you must have a Cloudflare account role with `}<inlineCode parentName=\"p\">{`edit`}</inlineCode>{` permissions, such as Super Administrator, Administrator, or Log Share.`}</p>\n    </Aside>\n    <h2 {...{\n      \"id\": \"example-api-requests-using-curl\"\n    }}>{`Example API requests using cURL`}</h2>\n    <h3 {...{\n      \"id\": \"check-whether-log-retention-is-turned-on\"\n    }}>{`Check whether log retention is turned on:`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -H \"X-Auth-Email: <EMAIL>\" -H \"X-Auth-Key: <API_KEY>\" GET \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/control/retention/flag\" | jq .\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"response\"\n    }}>{`Response:`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"flag\": false\n  },\n  \"success\": true\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"turn-on-log-retention\"\n    }}>{`Turn on log retention:`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -H \"X-Auth-Email: <EMAIL>\" -H \"X-Auth-Key: <API_KEY>\" POST \"https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logs/control/retention/flag\" -d'{\"flag\":true}' | jq .\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"parameters\"\n    }}>{`Parameters`}</h4>\n    <ul>\n      <li parentName=\"ul\"><em parentName=\"li\">{`flag`}</em>{` - can be either `}<inlineCode parentName=\"li\">{`true`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`false`}</inlineCode></li>\n    </ul>\n    <h4 {...{\n      \"id\": \"response-1\"\n    }}>{`Response:`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"flag\": true\n  },\n  \"success\": true\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"audit\"\n    }}>{`Audit`}</h2>\n    <p>{`Turning log retention on or off is recorded in `}<strong parentName=\"p\">{`Cloudflare Audit Logs`}</strong>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}