{"expireTime":9007200898048141000,"key":"gatsby-plugin-mdx-entire-payload-f2cf3663fec174b4d44b145fb50da239-","val":{"mdast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Manage Logpush with cURL","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":27,"offset":27},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":27,"offset":27},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can manage your Cloudflare Logpush service from the command line using cURL.","position":{"start":{"line":4,"column":1,"offset":29},"end":{"line":4,"column":81,"offset":109},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":29},"end":{"line":4,"column":81,"offset":109},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Before getting started, review:","position":{"start":{"line":6,"column":1,"offset":111},"end":{"line":6,"column":32,"offset":142},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":111},"end":{"line":6,"column":32,"offset":142},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/reference/logpush-api-configuration","children":[{"type":"text","value":"Logpush API configuration","position":{"start":{"line":8,"column":4,"offset":147},"end":{"line":8,"column":29,"offset":172},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":146},"end":{"line":8,"column":68,"offset":211},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":146},"end":{"line":8,"column":68,"offset":211},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":144},"end":{"line":8,"column":68,"offset":211},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#logpush-jobs-properties","children":[{"type":"text","value":"Logpush job object definition","position":{"start":{"line":9,"column":4,"offset":215},"end":{"line":9,"column":33,"offset":244},"indent":[]}}],"position":{"start":{"line":9,"column":3,"offset":214},"end":{"line":9,"column":87,"offset":298},"indent":[]}}],"position":{"start":{"line":9,"column":3,"offset":214},"end":{"line":9,"column":87,"offset":298},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":212},"end":{"line":9,"column":87,"offset":298},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":144},"end":{"line":9,"column":87,"offset":298},"indent":[1]}},{"type":"jsx","value":"<Aside type=\"note\">","position":{"start":{"line":11,"column":1,"offset":300},"end":{"line":11,"column":20,"offset":319},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The examples below are for zone-scoped data sets. Account-scoped data sets should use ","position":{"start":{"line":13,"column":1,"offset":321},"end":{"line":13,"column":87,"offset":407},"indent":[]}},{"type":"inlineCode","value":"/accounts/<ACCOUNT_ID>","position":{"start":{"line":13,"column":87,"offset":407},"end":{"line":13,"column":111,"offset":431},"indent":[]}},{"type":"text","value":" instead of ","position":{"start":{"line":13,"column":111,"offset":431},"end":{"line":13,"column":123,"offset":443},"indent":[]}},{"type":"inlineCode","value":"/zone/<ZONE_ID>","position":{"start":{"line":13,"column":123,"offset":443},"end":{"line":13,"column":140,"offset":460},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":13,"column":140,"offset":460},"end":{"line":13,"column":141,"offset":461},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":321},"end":{"line":13,"column":141,"offset":461},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":15,"column":1,"offset":463},"end":{"line":15,"column":9,"offset":471},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 1 - Get ownership challenge","position":{"start":{"line":17,"column":4,"offset":476},"end":{"line":17,"column":36,"offset":508},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":473},"end":{"line":17,"column":36,"offset":508},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"$ curl -s -XPOST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/ownership \\\n-H \"X-Auth-Email: <EMAIL>\" \\ \n-H \"X-Auth-Key: <API_KEY>\" \\\n-H \"Content-Type: application/json\" \\ \n--data '{\"destination_conf\":\"s3://<BUCKET_PATH>?region=us-west-2\"}' | jq .","position":{"start":{"line":19,"column":1,"offset":510},"end":{"line":25,"column":4,"offset":784},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Parameters","position":{"start":{"line":27,"column":5,"offset":790},"end":{"line":27,"column":15,"offset":800},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":786},"end":{"line":27,"column":15,"offset":800},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"destination_conf","position":{"start":{"line":28,"column":5,"offset":805},"end":{"line":28,"column":21,"offset":821},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":803},"end":{"line":28,"column":23,"offset":823},"indent":[]}},{"type":"text","value":" - See ","position":{"start":{"line":28,"column":23,"offset":823},"end":{"line":28,"column":30,"offset":830},"indent":[]}},{"type":"link","title":null,"url":"/reference/logpush-api-configuration/#destination","children":[{"type":"text","value":"Destination","position":{"start":{"line":28,"column":31,"offset":831},"end":{"line":28,"column":42,"offset":842},"indent":[]}}],"position":{"start":{"line":28,"column":30,"offset":830},"end":{"line":28,"column":94,"offset":894},"indent":[]}},{"type":"text","value":" for details.","position":{"start":{"line":28,"column":94,"offset":894},"end":{"line":28,"column":107,"offset":907},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":803},"end":{"line":28,"column":107,"offset":907},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":801},"end":{"line":28,"column":107,"offset":907},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":801},"end":{"line":28,"column":107,"offset":907},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":30,"column":5,"offset":913},"end":{"line":30,"column":13,"offset":921},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":909},"end":{"line":30,"column":13,"offset":921},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A challenge file will be written to the destination, and the filename will be in the response (the filename may be expressed as a path if appropriate for your destination). For example:","position":{"start":{"line":32,"column":1,"offset":923},"end":{"line":32,"column":186,"offset":1108},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":923},"end":{"line":32,"column":186,"offset":1108},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"filename\": \"burritobot/logs/ownership-challenge.txt\",\n    \"valid\": true,\n    \"message\": \"\"\n  }\n}","position":{"start":{"line":34,"column":1,"offset":1110},"end":{"line":45,"column":4,"offset":1292},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You will need to provide the token contained in this file when creating a job in the next step.","position":{"start":{"line":47,"column":1,"offset":1294},"end":{"line":47,"column":96,"offset":1389},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1294},"end":{"line":47,"column":96,"offset":1389},"indent":[]}},{"type":"jsx","value":"<Aside type=\"note\" header=\"Note\">","position":{"start":{"line":49,"column":1,"offset":1391},"end":{"line":49,"column":34,"offset":1424},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When using Sumo Logic, you may find it helpful to have ","position":{"start":{"line":51,"column":1,"offset":1426},"end":{"line":51,"column":56,"offset":1481},"indent":[]}},{"type":"link","title":null,"url":"https://help.sumologic.com/05Search/Live-Tail/About-Live-Tail","children":[{"type":"text","value":"Live Tail","position":{"start":{"line":51,"column":57,"offset":1482},"end":{"line":51,"column":66,"offset":1491},"indent":[]}}],"position":{"start":{"line":51,"column":56,"offset":1481},"end":{"line":51,"column":130,"offset":1555},"indent":[]}},{"type":"text","value":" open to see the challenge file as soon as it's uploaded.","position":{"start":{"line":51,"column":130,"offset":1555},"end":{"line":51,"column":187,"offset":1612},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1426},"end":{"line":51,"column":187,"offset":1612},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":52,"column":1,"offset":1613},"end":{"line":52,"column":9,"offset":1621},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 2 - Create a job","position":{"start":{"line":54,"column":4,"offset":1626},"end":{"line":54,"column":25,"offset":1647},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":1623},"end":{"line":54,"column":25,"offset":1647},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X POST \\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs \\\n-d'{\"name\":\"<DOMAIN_NAME>\", \"destination_conf\":\"s3://<BUCKET_PATH>?region=us-west-2\", \"dataset\": \"http_requests\", \"logpull_options\":\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\", \"ownership_challenge\":\"00000000000000000000\"}' | jq .","position":{"start":{"line":56,"column":1,"offset":1649},"end":{"line":60,"column":4,"offset":2104},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Parameters","position":{"start":{"line":62,"column":5,"offset":2110},"end":{"line":62,"column":15,"offset":2120},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2106},"end":{"line":62,"column":15,"offset":2120},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"name","position":{"start":{"line":64,"column":5,"offset":2126},"end":{"line":64,"column":9,"offset":2130},"indent":[]}}],"position":{"start":{"line":64,"column":3,"offset":2124},"end":{"line":64,"column":11,"offset":2132},"indent":[]}},{"type":"text","value":" (optional) - We suggest using your domain name as the job name; the name cannot be changed after the job is created.","position":{"start":{"line":64,"column":11,"offset":2132},"end":{"line":64,"column":128,"offset":2249},"indent":[]}}],"position":{"start":{"line":64,"column":3,"offset":2124},"end":{"line":64,"column":128,"offset":2249},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2122},"end":{"line":64,"column":128,"offset":2249},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"destination_conf","position":{"start":{"line":65,"column":5,"offset":2254},"end":{"line":65,"column":21,"offset":2270},"indent":[]}}],"position":{"start":{"line":65,"column":3,"offset":2252},"end":{"line":65,"column":23,"offset":2272},"indent":[]}},{"type":"text","value":" - Refer to ","position":{"start":{"line":65,"column":23,"offset":2272},"end":{"line":65,"column":35,"offset":2284},"indent":[]}},{"type":"link","title":null,"url":"/reference/logpush-api-configuration/#destination","children":[{"type":"text","value":"Destination","position":{"start":{"line":65,"column":36,"offset":2285},"end":{"line":65,"column":47,"offset":2296},"indent":[]}}],"position":{"start":{"line":65,"column":35,"offset":2284},"end":{"line":65,"column":99,"offset":2348},"indent":[]}},{"type":"text","value":" for details.","position":{"start":{"line":65,"column":99,"offset":2348},"end":{"line":65,"column":112,"offset":2361},"indent":[]}}],"position":{"start":{"line":65,"column":3,"offset":2252},"end":{"line":65,"column":112,"offset":2361},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2250},"end":{"line":65,"column":112,"offset":2361},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"dataset","position":{"start":{"line":66,"column":5,"offset":2366},"end":{"line":66,"column":12,"offset":2373},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":2364},"end":{"line":66,"column":14,"offset":2375},"indent":[]}},{"type":"text","value":" - The category of logs you want to receive. Refer to ","position":{"start":{"line":66,"column":14,"offset":2375},"end":{"line":66,"column":68,"offset":2429},"indent":[]}},{"type":"link","title":null,"url":"/reference/log-fields","children":[{"type":"text","value":"Log fields","position":{"start":{"line":66,"column":69,"offset":2430},"end":{"line":66,"column":79,"offset":2440},"indent":[]}}],"position":{"start":{"line":66,"column":68,"offset":2429},"end":{"line":66,"column":103,"offset":2464},"indent":[]}},{"type":"text","value":" for the full list of supported datasets; this parameter cannot be changed after the job is created.","position":{"start":{"line":66,"column":103,"offset":2464},"end":{"line":66,"column":203,"offset":2564},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":2364},"end":{"line":66,"column":203,"offset":2564},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":2362},"end":{"line":66,"column":203,"offset":2564},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"logpull_options","position":{"start":{"line":67,"column":5,"offset":2569},"end":{"line":67,"column":20,"offset":2584},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":2567},"end":{"line":67,"column":22,"offset":2586},"indent":[]}},{"type":"text","value":" (optional) - Refer to ","position":{"start":{"line":67,"column":22,"offset":2586},"end":{"line":67,"column":45,"offset":2609},"indent":[]}},{"type":"link","title":null,"url":"/reference/logpush-api-configuration/#options","children":[{"type":"text","value":"Options","position":{"start":{"line":67,"column":46,"offset":2610},"end":{"line":67,"column":53,"offset":2617},"indent":[]}}],"position":{"start":{"line":67,"column":45,"offset":2609},"end":{"line":67,"column":101,"offset":2665},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":67,"column":101,"offset":2665},"end":{"line":67,"column":102,"offset":2666},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":2567},"end":{"line":67,"column":102,"offset":2666},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Typically includes the desired fields and timestamp format.","position":{"start":{"line":68,"column":7,"offset":2673},"end":{"line":68,"column":66,"offset":2732},"indent":[]}}],"position":{"start":{"line":68,"column":7,"offset":2673},"end":{"line":68,"column":66,"offset":2732},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":2669},"end":{"line":68,"column":66,"offset":2732},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Set the timestamp format to ","position":{"start":{"line":69,"column":7,"offset":2739},"end":{"line":69,"column":35,"offset":2767},"indent":[]}},{"type":"inlineCode","value":"RFC 3339","position":{"start":{"line":69,"column":35,"offset":2767},"end":{"line":69,"column":45,"offset":2777},"indent":[]}},{"type":"text","value":" (","position":{"start":{"line":69,"column":45,"offset":2777},"end":{"line":69,"column":47,"offset":2779},"indent":[]}},{"type":"inlineCode","value":"&timestamps=rfc3339","position":{"start":{"line":69,"column":47,"offset":2779},"end":{"line":69,"column":68,"offset":2800},"indent":[]}},{"type":"text","value":") for:","position":{"start":{"line":69,"column":68,"offset":2800},"end":{"line":69,"column":74,"offset":2806},"indent":[]}}],"position":{"start":{"line":69,"column":7,"offset":2739},"end":{"line":69,"column":74,"offset":2806},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Google BigQuery usage.","position":{"start":{"line":70,"column":9,"offset":2815},"end":{"line":70,"column":31,"offset":2837},"indent":[]}}],"position":{"start":{"line":70,"column":9,"offset":2815},"end":{"line":70,"column":31,"offset":2837},"indent":[]}}],"position":{"start":{"line":70,"column":7,"offset":2813},"end":{"line":70,"column":31,"offset":2837},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Automated timestamp parsing within Sumo Logic; refer to ","position":{"start":{"line":71,"column":9,"offset":2846},"end":{"line":71,"column":65,"offset":2902},"indent":[]}},{"type":"link","title":null,"url":"https://help.sumologic.com/03Send-Data/Sources/04Reference-Information-for-Sources/Timestamps%2C-Time-Zones%2C-Time-Ranges%2C-and-Date-Formats","children":[{"type":"text","value":"timestamps from Sumo Logic","position":{"start":{"line":71,"column":66,"offset":2903},"end":{"line":71,"column":92,"offset":2929},"indent":[]}}],"position":{"start":{"line":71,"column":65,"offset":2902},"end":{"line":71,"column":237,"offset":3074},"indent":[]}},{"type":"text","value":" for details.","position":{"start":{"line":71,"column":237,"offset":3074},"end":{"line":71,"column":250,"offset":3087},"indent":[]}}],"position":{"start":{"line":71,"column":9,"offset":2846},"end":{"line":71,"column":250,"offset":3087},"indent":[]}}],"position":{"start":{"line":71,"column":7,"offset":2844},"end":{"line":71,"column":250,"offset":3087},"indent":[]}}],"position":{"start":{"line":70,"column":7,"offset":2813},"end":{"line":71,"column":250,"offset":3087},"indent":[7]}}],"position":{"start":{"line":69,"column":3,"offset":2735},"end":{"line":71,"column":250,"offset":3087},"indent":[3,3]}}],"position":{"start":{"line":68,"column":3,"offset":2669},"end":{"line":71,"column":250,"offset":3087},"indent":[3,3,3]}}],"position":{"start":{"line":67,"column":1,"offset":2565},"end":{"line":71,"column":250,"offset":3087},"indent":[1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"ownership_challenge","position":{"start":{"line":72,"column":5,"offset":3092},"end":{"line":72,"column":24,"offset":3111},"indent":[]}}],"position":{"start":{"line":72,"column":3,"offset":3090},"end":{"line":72,"column":26,"offset":3113},"indent":[]}},{"type":"text","value":" - Challenge token required to prove destination ownership.","position":{"start":{"line":72,"column":26,"offset":3113},"end":{"line":72,"column":85,"offset":3172},"indent":[]}}],"position":{"start":{"line":72,"column":3,"offset":3090},"end":{"line":72,"column":85,"offset":3172},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":3088},"end":{"line":72,"column":85,"offset":3172},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2122},"end":{"line":72,"column":85,"offset":3172},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":74,"column":5,"offset":3178},"end":{"line":74,"column":13,"offset":3186},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":3174},"end":{"line":74,"column":13,"offset":3186},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the response, you get a newly-created job ID. For example:","position":{"start":{"line":76,"column":1,"offset":3188},"end":{"line":76,"column":62,"offset":3249},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":3188},"end":{"line":76,"column":62,"offset":3249},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": 146,\n    \"dataset\": \"http_requests\",\n    \"enabled\": false,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": null,\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}","position":{"start":{"line":78,"column":1,"offset":3251},"end":{"line":95,"column":4,"offset":3770},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that you can validate the ","position":{"start":{"line":97,"column":1,"offset":3772},"end":{"line":97,"column":32,"offset":3803},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logpull_options","position":{"start":{"line":97,"column":34,"offset":3805},"end":{"line":97,"column":49,"offset":3820},"indent":[]}}],"position":{"start":{"line":97,"column":32,"offset":3803},"end":{"line":97,"column":51,"offset":3822},"indent":[]}},{"type":"text","value":" parameter before including it in your job configuration:","position":{"start":{"line":97,"column":51,"offset":3822},"end":{"line":97,"column":108,"offset":3879},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":3772},"end":{"line":97,"column":108,"offset":3879},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X POST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/validate/origin -d '{\"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\", \"dataset\": \"http_requests\"}' | jq .","position":{"start":{"line":99,"column":1,"offset":3881},"end":{"line":101,"column":4,"offset":4217},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":103,"column":5,"offset":4223},"end":{"line":103,"column":13,"offset":4231},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":4219},"end":{"line":103,"column":13,"offset":4231},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"message\": \"\",\n    \"valid\": true\n  },\n  \"success\": true\n}","position":{"start":{"line":105,"column":1,"offset":4233},"end":{"line":115,"column":4,"offset":4356},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 3 - Enable (update) a job","position":{"start":{"line":117,"column":4,"offset":4361},"end":{"line":117,"column":34,"offset":4391},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":4358},"end":{"line":117,"column":34,"offset":4391},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Start by retrieving information about a specific job, using a job ID:","position":{"start":{"line":119,"column":1,"offset":4393},"end":{"line":119,"column":70,"offset":4462},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":4393},"end":{"line":119,"column":70,"offset":4462},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X GET \\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .","position":{"start":{"line":121,"column":1,"offset":4464},"end":{"line":124,"column":4,"offset":4569},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":126,"column":5,"offset":4575},"end":{"line":126,"column":13,"offset":4583},"indent":[]}}],"position":{"start":{"line":126,"column":1,"offset":4571},"end":{"line":126,"column":13,"offset":4583},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n \"errors\": [],\n \"messages\": [],\n \"result\": {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": false,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": null,\n     \"last_error\": null,\n     \"error_message\": null\n },\n \"success\": true\n}","position":{"start":{"line":128,"column":1,"offset":4585},"end":{"line":145,"column":4,"offset":5108},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that by default a job is not enabled (","position":{"start":{"line":147,"column":1,"offset":5110},"end":{"line":147,"column":44,"offset":5153},"indent":[]}},{"type":"inlineCode","value":"\"enabled\": false","position":{"start":{"line":147,"column":44,"offset":5153},"end":{"line":147,"column":62,"offset":5171},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":147,"column":62,"offset":5171},"end":{"line":147,"column":64,"offset":5173},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":5110},"end":{"line":147,"column":64,"offset":5173},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you do not remember your job ID, you can retrieve it using your zone ID:","position":{"start":{"line":149,"column":1,"offset":5175},"end":{"line":149,"column":76,"offset":5250},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":5175},"end":{"line":149,"column":76,"offset":5250},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X GET \\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .","position":{"start":{"line":151,"column":1,"offset":5252},"end":{"line":154,"column":4,"offset":5353},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Next, to enable the job, send an update request:","position":{"start":{"line":156,"column":1,"offset":5355},"end":{"line":156,"column":49,"offset":5403},"indent":[]}}],"position":{"start":{"line":156,"column":1,"offset":5355},"end":{"line":156,"column":49,"offset":5403},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X PUT \\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 -d'{\"enabled\":true}' | jq .","position":{"start":{"line":158,"column":1,"offset":5405},"end":{"line":161,"column":4,"offset":5531},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":163,"column":5,"offset":5537},"end":{"line":163,"column":13,"offset":5545},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":5533},"end":{"line":163,"column":13,"offset":5545},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n \"errors\": [],\n \"messages\": [],\n \"result\": {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": true,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": null,\n     \"last_error\": null,\n     \"error_message\": null\n },\n \"success\": true\n}","position":{"start":{"line":165,"column":1,"offset":5547},"end":{"line":182,"column":4,"offset":6069},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Once the job is enabled, you will start receiving logs within a few minutes and then in batches as soon as possible until you disable the job. For zones with very high request volume, it may take several hours before you start receiving logs for the first time.","position":{"start":{"line":184,"column":1,"offset":6071},"end":{"line":184,"column":262,"offset":6332},"indent":[]}}],"position":{"start":{"line":184,"column":1,"offset":6071},"end":{"line":184,"column":262,"offset":6332},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In addition to modifying ","position":{"start":{"line":186,"column":1,"offset":6334},"end":{"line":186,"column":26,"offset":6359},"indent":[]}},{"type":"inlineCode","value":"enabled","position":{"start":{"line":186,"column":26,"offset":6359},"end":{"line":186,"column":35,"offset":6368},"indent":[]}},{"type":"text","value":", you can also update the value for ","position":{"start":{"line":186,"column":35,"offset":6368},"end":{"line":186,"column":71,"offset":6404},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logpull_options","position":{"start":{"line":186,"column":73,"offset":6406},"end":{"line":186,"column":88,"offset":6421},"indent":[]}}],"position":{"start":{"line":186,"column":71,"offset":6404},"end":{"line":186,"column":90,"offset":6423},"indent":[]}},{"type":"text","value":". To modify ","position":{"start":{"line":186,"column":90,"offset":6423},"end":{"line":186,"column":102,"offset":6435},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"destination_conf","position":{"start":{"line":186,"column":104,"offset":6437},"end":{"line":186,"column":120,"offset":6453},"indent":[]}}],"position":{"start":{"line":186,"column":102,"offset":6435},"end":{"line":186,"column":122,"offset":6455},"indent":[]}},{"type":"text","value":", you will need to request an ownership challenge and provide the associated token with your update request. You can also delete your current job and create a new one.","position":{"start":{"line":186,"column":122,"offset":6455},"end":{"line":186,"column":289,"offset":6622},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":6334},"end":{"line":186,"column":289,"offset":6622},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Once a job has been enabled and has started executing, the ","position":{"start":{"line":188,"column":1,"offset":6624},"end":{"line":188,"column":60,"offset":6683},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"last_complete","position":{"start":{"line":188,"column":62,"offset":6685},"end":{"line":188,"column":75,"offset":6698},"indent":[]}}],"position":{"start":{"line":188,"column":60,"offset":6683},"end":{"line":188,"column":77,"offset":6700},"indent":[]}},{"type":"text","value":" field will show the time when the last batch of logs was successfully sent to the destination:","position":{"start":{"line":188,"column":77,"offset":6700},"end":{"line":188,"column":172,"offset":6795},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":6624},"end":{"line":188,"column":172,"offset":6795},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Request to get job by ID and see ","position":{"start":{"line":190,"column":5,"offset":6801},"end":{"line":190,"column":38,"offset":6834},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"last_complete","position":{"start":{"line":190,"column":40,"offset":6836},"end":{"line":190,"column":53,"offset":6849},"indent":[]}}],"position":{"start":{"line":190,"column":38,"offset":6834},"end":{"line":190,"column":55,"offset":6851},"indent":[]}},{"type":"text","value":" info","position":{"start":{"line":190,"column":55,"offset":6851},"end":{"line":190,"column":60,"offset":6856},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":6797},"end":{"line":190,"column":60,"offset":6856},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X GET \\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .","position":{"start":{"line":192,"column":1,"offset":6858},"end":{"line":195,"column":4,"offset":6963},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":197,"column":5,"offset":6969},"end":{"line":197,"column":13,"offset":6977},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":6965},"end":{"line":197,"column":13,"offset":6977},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\"errors\": [],\n \"messages\": [],\n \"result\": {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": true,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": \"2018-08-09T21:26:00Z\",\n     \"last_error\": null,\n     \"error_message\": null\n },\n \"success\": true\n}","position":{"start":{"line":199,"column":1,"offset":6979},"end":{"line":215,"column":4,"offset":7517},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 4 - Delete a job","position":{"start":{"line":217,"column":4,"offset":7522},"end":{"line":217,"column":25,"offset":7543},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":7519},"end":{"line":217,"column":25,"offset":7543},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X DELETE \\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .","position":{"start":{"line":219,"column":1,"offset":7545},"end":{"line":222,"column":4,"offset":7653},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Be careful when deleting a job because this action cannot be reversed.","position":{"start":{"line":224,"column":1,"offset":7655},"end":{"line":224,"column":71,"offset":7725},"indent":[]}}],"position":{"start":{"line":224,"column":1,"offset":7655},"end":{"line":224,"column":71,"offset":7725},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":226,"column":5,"offset":7731},"end":{"line":226,"column":13,"offset":7739},"indent":[]}}],"position":{"start":{"line":226,"column":1,"offset":7727},"end":{"line":226,"column":13,"offset":7739},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {},\n  \"success\": true\n}","position":{"start":{"line":228,"column":1,"offset":7741},"end":{"line":235,"column":4,"offset":7824},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 5 - Retrieve your job","position":{"start":{"line":237,"column":4,"offset":7829},"end":{"line":237,"column":30,"offset":7855},"indent":[]}}],"position":{"start":{"line":237,"column":1,"offset":7826},"end":{"line":237,"column":30,"offset":7855},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Retrieve a specific job, using the job ID:","position":{"start":{"line":239,"column":1,"offset":7857},"end":{"line":239,"column":43,"offset":7899},"indent":[]}}],"position":{"start":{"line":239,"column":1,"offset":7857},"end":{"line":239,"column":43,"offset":7899},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .","position":{"start":{"line":241,"column":1,"offset":7901},"end":{"line":243,"column":4,"offset":8004},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":245,"column":5,"offset":8010},"end":{"line":245,"column":13,"offset":8018},"indent":[]}}],"position":{"start":{"line":245,"column":1,"offset":8006},"end":{"line":245,"column":13,"offset":8018},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": true,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": null,\n     \"last_error\": null,\n     \"error_message\": null\n    }\n  ],\n  \"success\": true\n}","position":{"start":{"line":247,"column":1,"offset":8020},"end":{"line":266,"column":4,"offset":8559},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Retrieve all jobs for all data sets:","position":{"start":{"line":268,"column":1,"offset":8561},"end":{"line":268,"column":37,"offset":8597},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":8561},"end":{"line":268,"column":37,"offset":8597},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .","position":{"start":{"line":270,"column":1,"offset":8599},"end":{"line":272,"column":4,"offset":8698},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":274,"column":5,"offset":8704},"end":{"line":274,"column":13,"offset":8712},"indent":[]}}],"position":{"start":{"line":274,"column":1,"offset":8700},"end":{"line":274,"column":13,"offset":8712},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n      \"id\": 8029,\n      \"dataset\": \"spectrum_events\",\n      \"enabled\": true,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"logpull_options\": \"fields=Application,ClientAsn,ClientIP,ColoCode,Event,OriginIP,Status\",\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": \"2019-10-01T00:25:00Z\",\n      \"last_error\": null,\n      \"error_message\": null\n    },\n    {\n      \"id\": 146,\n      \"dataset\": \"http_requests\",\n      \"enabled\": false,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": \"2019-09-24T21:15:00Z\",\n      \"last_error\": null,\n      \"error_message\": null\n    }\n  ]\n}","position":{"start":{"line":276,"column":1,"offset":8714},"end":{"line":305,"column":4,"offset":9646},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 6 - Updating ","position":{"start":{"line":307,"column":4,"offset":9651},"end":{"line":307,"column":22,"offset":9669},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logpull_options","position":{"start":{"line":307,"column":24,"offset":9671},"end":{"line":307,"column":39,"offset":9686},"indent":[]}}],"position":{"start":{"line":307,"column":22,"offset":9669},"end":{"line":307,"column":41,"offset":9688},"indent":[]}}],"position":{"start":{"line":307,"column":1,"offset":9648},"end":{"line":307,"column":41,"offset":9688},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you want to add (or remove) fields, change the timestamp format, or enable protection against the ","position":{"start":{"line":309,"column":1,"offset":9690},"end":{"line":309,"column":102,"offset":9791},"indent":[]}},{"type":"inlineCode","value":"Log4j - CVE-2021-44228","position":{"start":{"line":309,"column":102,"offset":9791},"end":{"line":309,"column":126,"offset":9815},"indent":[]}},{"type":"text","value":" vulnerability, first retrieve the current ","position":{"start":{"line":309,"column":126,"offset":9815},"end":{"line":309,"column":169,"offset":9858},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logpull_options","position":{"start":{"line":309,"column":171,"offset":9860},"end":{"line":309,"column":186,"offset":9875},"indent":[]}}],"position":{"start":{"line":309,"column":169,"offset":9858},"end":{"line":309,"column":188,"offset":9877},"indent":[]}},{"type":"text","value":" for your zone.","position":{"start":{"line":309,"column":188,"offset":9877},"end":{"line":309,"column":203,"offset":9892},"indent":[]}}],"position":{"start":{"line":309,"column":1,"offset":9690},"end":{"line":309,"column":203,"offset":9892},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X GET 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\n    -H 'X-Auth-Key: <API_KEY>' \\\n    -H 'X-Auth-Email: <EMAIL>' | jq .","position":{"start":{"line":311,"column":1,"offset":9894},"end":{"line":315,"column":4,"offset":10070},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":317,"column":5,"offset":10076},"end":{"line":317,"column":13,"offset":10084},"indent":[]}}],"position":{"start":{"line":317,"column":1,"offset":10072},"end":{"line":317,"column":14,"offset":10085},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n        \"id\": 146,\n        \"dataset\": \"http_requests\",\n        \"logstream\": true,\n        \"frequency\": \"high\",\n        \"kind\": \"\",\n        \"enabled\": true,\n        \"name\": \"<DOMAIN_NAME>\",\n        \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n        \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n        \"last_complete\": \"2021-12-14T19:56:49Z\",\n        \"last_error\": null,\n        \"error_message\": null\n    },\n    \"success\": true\n}","position":{"start":{"line":319,"column":1,"offset":10087},"end":{"line":339,"column":4,"offset":10745},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Next, edit the ","position":{"start":{"line":341,"column":1,"offset":10747},"end":{"line":341,"column":16,"offset":10762},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logpull_options","position":{"start":{"line":341,"column":18,"offset":10764},"end":{"line":341,"column":33,"offset":10779},"indent":[]}}],"position":{"start":{"line":341,"column":16,"offset":10762},"end":{"line":341,"column":35,"offset":10781},"indent":[]}},{"type":"text","value":" as desired and create a ","position":{"start":{"line":341,"column":35,"offset":10781},"end":{"line":341,"column":60,"offset":10806},"indent":[]}},{"type":"inlineCode","value":"PUT","position":{"start":{"line":341,"column":60,"offset":10806},"end":{"line":341,"column":65,"offset":10811},"indent":[]}},{"type":"text","value":" request. The following example enables the ","position":{"start":{"line":341,"column":65,"offset":10811},"end":{"line":341,"column":109,"offset":10855},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"CVE-2021-44228","position":{"start":{"line":341,"column":111,"offset":10857},"end":{"line":341,"column":125,"offset":10871},"indent":[]}}],"position":{"start":{"line":341,"column":109,"offset":10855},"end":{"line":341,"column":127,"offset":10873},"indent":[]}},{"type":"text","value":" redaction option.","position":{"start":{"line":341,"column":127,"offset":10873},"end":{"line":341,"column":145,"offset":10891},"indent":[]}}],"position":{"start":{"line":341,"column":1,"offset":10747},"end":{"line":341,"column":145,"offset":10891},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -s -X PUT 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\n    -H 'X-Auth-Key: <API_KEY>' \\\n    -H 'X-Auth-Email: <EMAIL>' \\\n    -d '{\n    \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\"\n}'","position":{"start":{"line":343,"column":1,"offset":10893},"end":{"line":350,"column":4,"offset":11291},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that at this time, the ","position":{"start":{"line":352,"column":1,"offset":11295},"end":{"line":352,"column":29,"offset":11323},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"CVE-2021-44228","position":{"start":{"line":352,"column":31,"offset":11325},"end":{"line":352,"column":45,"offset":11339},"indent":[]}}],"position":{"start":{"line":352,"column":29,"offset":11323},"end":{"line":352,"column":47,"offset":11341},"indent":[]}},{"type":"text","value":" option is not available through the UI, and updating your Logpush job through the UI will remove this option.","position":{"start":{"line":352,"column":47,"offset":11341},"end":{"line":352,"column":157,"offset":11451},"indent":[]}}],"position":{"start":{"line":352,"column":1,"offset":11295},"end":{"line":352,"column":157,"offset":11451},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Response","position":{"start":{"line":354,"column":5,"offset":11457},"end":{"line":354,"column":13,"offset":11465},"indent":[]}}],"position":{"start":{"line":354,"column":1,"offset":11453},"end":{"line":354,"column":14,"offset":11466},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n        \"id\": 146,\n        \"dataset\": \"http_requests\",\n        \"logstream\": true,\n        \"frequency\": \"high\",\n        \"kind\": \"\",\n        \"enabled\": true,\n        \"name\": null,\n        \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\",\n        \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n        \"last_complete\": \"2021-12-14T20:02:19Z\",\n        \"last_error\": null,\n        \"error_message\": null\n    },\n    \"success\": true\n}","position":{"start":{"line":356,"column":1,"offset":11468},"end":{"line":376,"column":4,"offset":12135},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":87,\"pcx-content-type\":\"tutorial\"}","position":{"start":{"line":379,"column":1,"offset":12138},"end":{"line":379,"column":71,"offset":12208},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":379,"column":71,"offset":12208}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"order\": 87,\n  \"pcx-content-type\": \"tutorial\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"manage-logpush-with-curl\"\n  }, \"Manage Logpush with cURL\"), mdx(\"p\", null, \"You can manage your Cloudflare Logpush service from the command line using cURL.\"), mdx(\"p\", null, \"Before getting started, review:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration\"\n  }, \"Logpush API configuration\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://api.cloudflare.com/#logpush-jobs-properties\"\n  }, \"Logpush job object definition\"))), mdx(Aside, {\n    type: \"note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"The examples below are for zone-scoped data sets. Account-scoped data sets should use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/accounts/<ACCOUNT_ID>\"), \" instead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/zone/<ZONE_ID>\"), \".\")), mdx(\"h2\", {\n    \"id\": \"step-1---get-ownership-challenge\"\n  }, \"Step 1 - Get ownership challenge\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ curl -s -XPOST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/ownership \\\\\\n-H \\\"X-Auth-Email: <EMAIL>\\\" \\\\ \\n-H \\\"X-Auth-Key: <API_KEY>\\\" \\\\\\n-H \\\"Content-Type: application/json\\\" \\\\ \\n--data '{\\\"destination_conf\\\":\\\"s3://<BUCKET_PATH>?region=us-west-2\\\"}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"parameters\"\n  }, \"Parameters\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"destination_conf\"), \" - See \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration/#destination\"\n  }, \"Destination\"), \" for details.\")), mdx(\"h3\", {\n    \"id\": \"response\"\n  }, \"Response\"), mdx(\"p\", null, \"A challenge file will be written to the destination, and the filename will be in the response (the filename may be expressed as a path if appropriate for your destination). For example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"{\\n  \\\"success\\\": true,\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"filename\\\": \\\"burritobot/logs/ownership-challenge.txt\\\",\\n    \\\"valid\\\": true,\\n    \\\"message\\\": \\\"\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"You will need to provide the token contained in this file when creating a job in the next step.\"), mdx(Aside, {\n    type: \"note\",\n    header: \"Note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"When using Sumo Logic, you may find it helpful to have \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://help.sumologic.com/05Search/Live-Tail/About-Live-Tail\"\n  }, \"Live Tail\"), \" open to see the challenge file as soon as it's uploaded.\")), mdx(\"h2\", {\n    \"id\": \"step-2---create-a-job\"\n  }, \"Step 2 - Create a job\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X POST \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs \\\\\\n-d'{\\\"name\\\":\\\"<DOMAIN_NAME>\\\", \\\"destination_conf\\\":\\\"s3://<BUCKET_PATH>?region=us-west-2\\\", \\\"dataset\\\": \\\"http_requests\\\", \\\"logpull_options\\\":\\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\", \\\"ownership_challenge\\\":\\\"00000000000000000000\\\"}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"parameters-1\"\n  }, \"Parameters\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"name\"), \" (optional) - We suggest using your domain name as the job name; the name cannot be changed after the job is created.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"destination_conf\"), \" - Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration/#destination\"\n  }, \"Destination\"), \" for details.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dataset\"), \" - The category of logs you want to receive. Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/log-fields\"\n  }, \"Log fields\"), \" for the full list of supported datasets; this parameter cannot be changed after the job is created.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"logpull_options\"), \" (optional) - Refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/reference/logpush-api-configuration/#options\"\n  }, \"Options\"), \".\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Typically includes the desired fields and timestamp format.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Set the timestamp format to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"RFC 3339\"), \" (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"&timestamps=rfc3339\"), \") for:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Google BigQuery usage.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Automated timestamp parsing within Sumo Logic; refer to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://help.sumologic.com/03Send-Data/Sources/04Reference-Information-for-Sources/Timestamps%2C-Time-Zones%2C-Time-Ranges%2C-and-Date-Formats\"\n  }, \"timestamps from Sumo Logic\"), \" for details.\"))))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"ownership_challenge\"), \" - Challenge token required to prove destination ownership.\")), mdx(\"h3\", {\n    \"id\": \"response-1\"\n  }, \"Response\"), mdx(\"p\", null, \"In the response, you get a newly-created job ID. For example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"id\\\": 146,\\n    \\\"dataset\\\": \\\"http_requests\\\",\\n    \\\"enabled\\\": false,\\n    \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n    \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n    \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n    \\\"last_complete\\\": null,\\n    \\\"last_error\\\": null,\\n    \\\"error_message\\\": null\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Note that you can validate the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \" parameter before including it in your job configuration:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X POST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/validate/origin -d '{\\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\", \\\"dataset\\\": \\\"http_requests\\\"}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-2\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {\\n    \\\"message\\\": \\\"\\\",\\n    \\\"valid\\\": true\\n  },\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-3---enable-update-a-job\"\n  }, \"Step 3 - Enable (update) a job\"), mdx(\"p\", null, \"Start by retrieving information about a specific job, using a job ID:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-3\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n \\\"errors\\\": [],\\n \\\"messages\\\": [],\\n \\\"result\\\": {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": false,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": null,\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n },\\n \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Note that by default a job is not enabled (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"enabled\\\": false\"), \").\"), mdx(\"p\", null, \"If you do not remember your job ID, you can retrieve it using your zone ID:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .\\n\")), mdx(\"p\", null, \"Next, to enable the job, send an update request:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X PUT \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 -d'{\\\"enabled\\\":true}' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-4\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n \\\"errors\\\": [],\\n \\\"messages\\\": [],\\n \\\"result\\\": {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": true,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": null,\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n },\\n \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Once the job is enabled, you will start receiving logs within a few minutes and then in batches as soon as possible until you disable the job. For zones with very high request volume, it may take several hours before you start receiving logs for the first time.\"), mdx(\"p\", null, \"In addition to modifying \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"enabled\"), \", you can also update the value for \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \". To modify \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"destination_conf\"), \", you will need to request an ownership challenge and provide the associated token with your update request. You can also delete your current job and create a new one.\"), mdx(\"p\", null, \"Once a job has been enabled and has started executing, the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"last_complete\"), \" field will show the time when the last batch of logs was successfully sent to the destination:\"), mdx(\"h3\", {\n    \"id\": \"request-to-get-job-by-id-and-see-last_complete-info\"\n  }, \"Request to get job by ID and see \", mdx(\"strong\", {\n    parentName: \"h3\"\n  }, \"last_complete\"), \" info\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-5\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\\"errors\\\": [],\\n \\\"messages\\\": [],\\n \\\"result\\\": {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": true,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": \\\"2018-08-09T21:26:00Z\\\",\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n },\\n \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-4---delete-a-job\"\n  }, \"Step 4 - Delete a job\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X DELETE \\\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"p\", null, \"Be careful when deleting a job because this action cannot be reversed.\"), mdx(\"h3\", {\n    \"id\": \"response-6\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": {},\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-5---retrieve-your-job\"\n  }, \"Step 5 - Retrieve your job\"), mdx(\"p\", null, \"Retrieve a specific job, using the job ID:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-7\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": [\\n    {\\n     \\\"id\\\": 146,\\n     \\\"dataset\\\": \\\"http_requests\\\",\\n     \\\"enabled\\\": true,\\n     \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n     \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n     \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n     \\\"last_complete\\\": null,\\n     \\\"last_error\\\": null,\\n     \\\"error_message\\\": null\\n    }\\n  ],\\n  \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Retrieve all jobs for all data sets:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-8\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"errors\\\": [],\\n  \\\"messages\\\": [],\\n  \\\"result\\\": [\\n    {\\n      \\\"id\\\": 8029,\\n      \\\"dataset\\\": \\\"spectrum_events\\\",\\n      \\\"enabled\\\": true,\\n      \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n      \\\"logpull_options\\\": \\\"fields=Application,ClientAsn,ClientIP,ColoCode,Event,OriginIP,Status\\\",\\n      \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n      \\\"last_complete\\\": \\\"2019-10-01T00:25:00Z\\\",\\n      \\\"last_error\\\": null,\\n      \\\"error_message\\\": null\\n    },\\n    {\\n      \\\"id\\\": 146,\\n      \\\"dataset\\\": \\\"http_requests\\\",\\n      \\\"enabled\\\": false,\\n      \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n      \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n      \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n      \\\"last_complete\\\": \\\"2019-09-24T21:15:00Z\\\",\\n      \\\"last_error\\\": null,\\n      \\\"error_message\\\": null\\n    }\\n  ]\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"step-6---updating-logpull_options\"\n  }, \"Step 6 - Updating \", mdx(\"strong\", {\n    parentName: \"h2\"\n  }, \"logpull_options\")), mdx(\"p\", null, \"If you want to add (or remove) fields, change the timestamp format, or enable protection against the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Log4j - CVE-2021-44228\"), \" vulnerability, first retrieve the current \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \" for your zone.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X GET 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\\\\n    -H 'X-Auth-Key: <API_KEY>' \\\\\\n    -H 'X-Auth-Email: <EMAIL>' | jq .\\n\")), mdx(\"h3\", {\n    \"id\": \"response-9\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"errors\\\": [],\\n    \\\"messages\\\": [],\\n    \\\"result\\\": {\\n        \\\"id\\\": 146,\\n        \\\"dataset\\\": \\\"http_requests\\\",\\n        \\\"logstream\\\": true,\\n        \\\"frequency\\\": \\\"high\\\",\\n        \\\"kind\\\": \\\"\\\",\\n        \\\"enabled\\\": true,\\n        \\\"name\\\": \\\"<DOMAIN_NAME>\\\",\\n        \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\\\",\\n        \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n        \\\"last_complete\\\": \\\"2021-12-14T19:56:49Z\\\",\\n        \\\"last_error\\\": null,\\n        \\\"error_message\\\": null\\n    },\\n    \\\"success\\\": true\\n}\\n\")), mdx(\"p\", null, \"Next, edit the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"logpull_options\"), \" as desired and create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" request. The following example enables the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CVE-2021-44228\"), \" redaction option.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -s -X PUT 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\\\\n    -H 'X-Auth-Key: <API_KEY>' \\\\\\n    -H 'X-Auth-Email: <EMAIL>' \\\\\\n    -d '{\\n    \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\\\"\\n}'\\n\")), mdx(\"p\", null, \"Note that at this time, the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CVE-2021-44228\"), \" option is not available through the UI, and updating your Logpush job through the UI will remove this option.\"), mdx(\"h3\", {\n    \"id\": \"response-10\"\n  }, \"Response\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"errors\\\": [],\\n    \\\"messages\\\": [],\\n    \\\"result\\\": {\\n        \\\"id\\\": 146,\\n        \\\"dataset\\\": \\\"http_requests\\\",\\n        \\\"logstream\\\": true,\\n        \\\"frequency\\\": \\\"high\\\",\\n        \\\"kind\\\": \\\"\\\",\\n        \\\"enabled\\\": true,\\n        \\\"name\\\": null,\\n        \\\"logpull_options\\\": \\\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\\\",\\n        \\\"destination_conf\\\": \\\"s3://<BUCKET_PATH>?region=us-west-2\\\",\\n        \\\"last_complete\\\": \\\"2021-12-14T20:02:19Z\\\",\\n        \\\"last_error\\\": null,\\n        \\\"error_message\\\": null\\n    },\\n    \\\"success\\\": true\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"order\": 87,\n  \"pcx-content-type\": \"tutorial\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Aside = makeShortcode(\"Aside\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"manage-logpush-with-curl\"\n    }}>{`Manage Logpush with cURL`}</h1>\n    <p>{`You can manage your Cloudflare Logpush service from the command line using cURL.`}</p>\n    <p>{`Before getting started, review:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/reference/logpush-api-configuration\"\n        }}>{`Logpush API configuration`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://api.cloudflare.com/#logpush-jobs-properties\"\n        }}>{`Logpush job object definition`}</a></li>\n    </ul>\n    <Aside type=\"note\" mdxType=\"Aside\">\n      <p>{`The examples below are for zone-scoped data sets. Account-scoped data sets should use `}<inlineCode parentName=\"p\">{`/accounts/<ACCOUNT_ID>`}</inlineCode>{` instead of `}<inlineCode parentName=\"p\">{`/zone/<ZONE_ID>`}</inlineCode>{`.`}</p>\n    </Aside>\n    <h2 {...{\n      \"id\": \"step-1---get-ownership-challenge\"\n    }}>{`Step 1 - Get ownership challenge`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ curl -s -XPOST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/ownership \\\\\n-H \"X-Auth-Email: <EMAIL>\" \\\\ \n-H \"X-Auth-Key: <API_KEY>\" \\\\\n-H \"Content-Type: application/json\" \\\\ \n--data '{\"destination_conf\":\"s3://<BUCKET_PATH>?region=us-west-2\"}' | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"parameters\"\n    }}>{`Parameters`}</h3>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`destination_conf`}</strong>{` - See `}<a parentName=\"li\" {...{\n          \"href\": \"/reference/logpush-api-configuration/#destination\"\n        }}>{`Destination`}</a>{` for details.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"response\"\n    }}>{`Response`}</h3>\n    <p>{`A challenge file will be written to the destination, and the filename will be in the response (the filename may be expressed as a path if appropriate for your destination). For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"filename\": \"burritobot/logs/ownership-challenge.txt\",\n    \"valid\": true,\n    \"message\": \"\"\n  }\n}\n`}</code></pre>\n    <p>{`You will need to provide the token contained in this file when creating a job in the next step.`}</p>\n    <Aside type=\"note\" header=\"Note\" mdxType=\"Aside\">\n      <p>{`When using Sumo Logic, you may find it helpful to have `}<a parentName=\"p\" {...{\n          \"href\": \"https://help.sumologic.com/05Search/Live-Tail/About-Live-Tail\"\n        }}>{`Live Tail`}</a>{` open to see the challenge file as soon as it's uploaded.`}</p>\n    </Aside>\n    <h2 {...{\n      \"id\": \"step-2---create-a-job\"\n    }}>{`Step 2 - Create a job`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X POST \\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs \\\\\n-d'{\"name\":\"<DOMAIN_NAME>\", \"destination_conf\":\"s3://<BUCKET_PATH>?region=us-west-2\", \"dataset\": \"http_requests\", \"logpull_options\":\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\", \"ownership_challenge\":\"00000000000000000000\"}' | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"parameters-1\"\n    }}>{`Parameters`}</h3>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`name`}</strong>{` (optional) - We suggest using your domain name as the job name; the name cannot be changed after the job is created.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`destination_conf`}</strong>{` - Refer to `}<a parentName=\"li\" {...{\n          \"href\": \"/reference/logpush-api-configuration/#destination\"\n        }}>{`Destination`}</a>{` for details.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`dataset`}</strong>{` - The category of logs you want to receive. Refer to `}<a parentName=\"li\" {...{\n          \"href\": \"/reference/log-fields\"\n        }}>{`Log fields`}</a>{` for the full list of supported datasets; this parameter cannot be changed after the job is created.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`logpull_options`}</strong>{` (optional) - Refer to `}<a parentName=\"li\" {...{\n          \"href\": \"/reference/logpush-api-configuration/#options\"\n        }}>{`Options`}</a>{`.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Typically includes the desired fields and timestamp format.`}</li>\n          <li parentName=\"ul\">{`Set the timestamp format to `}<inlineCode parentName=\"li\">{`RFC 3339`}</inlineCode>{` (`}<inlineCode parentName=\"li\">{`&timestamps=rfc3339`}</inlineCode>{`) for:`}<ul parentName=\"li\">\n              <li parentName=\"ul\">{`Google BigQuery usage.`}</li>\n              <li parentName=\"ul\">{`Automated timestamp parsing within Sumo Logic; refer to `}<a parentName=\"li\" {...{\n                  \"href\": \"https://help.sumologic.com/03Send-Data/Sources/04Reference-Information-for-Sources/Timestamps%2C-Time-Zones%2C-Time-Ranges%2C-and-Date-Formats\"\n                }}>{`timestamps from Sumo Logic`}</a>{` for details.`}</li>\n            </ul></li>\n        </ul></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`ownership_challenge`}</strong>{` - Challenge token required to prove destination ownership.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"response-1\"\n    }}>{`Response`}</h3>\n    <p>{`In the response, you get a newly-created job ID. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": 146,\n    \"dataset\": \"http_requests\",\n    \"enabled\": false,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": null,\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\n`}</code></pre>\n    <p>{`Note that you can validate the `}<strong parentName=\"p\">{`logpull_options`}</strong>{` parameter before including it in your job configuration:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X POST https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/validate/origin -d '{\"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\", \"dataset\": \"http_requests\"}' | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-2\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"message\": \"\",\n    \"valid\": true\n  },\n  \"success\": true\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-3---enable-update-a-job\"\n    }}>{`Step 3 - Enable (update) a job`}</h2>\n    <p>{`Start by retrieving information about a specific job, using a job ID:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X GET \\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-3\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n \"errors\": [],\n \"messages\": [],\n \"result\": {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": false,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": null,\n     \"last_error\": null,\n     \"error_message\": null\n },\n \"success\": true\n}\n`}</code></pre>\n    <p>{`Note that by default a job is not enabled (`}<inlineCode parentName=\"p\">{`\"enabled\": false`}</inlineCode>{`).`}</p>\n    <p>{`If you do not remember your job ID, you can retrieve it using your zone ID:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X GET \\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .\n`}</code></pre>\n    <p>{`Next, to enable the job, send an update request:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X PUT \\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 -d'{\"enabled\":true}' | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-4\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n \"errors\": [],\n \"messages\": [],\n \"result\": {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": true,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": null,\n     \"last_error\": null,\n     \"error_message\": null\n },\n \"success\": true\n}\n`}</code></pre>\n    <p>{`Once the job is enabled, you will start receiving logs within a few minutes and then in batches as soon as possible until you disable the job. For zones with very high request volume, it may take several hours before you start receiving logs for the first time.`}</p>\n    <p>{`In addition to modifying `}<inlineCode parentName=\"p\">{`enabled`}</inlineCode>{`, you can also update the value for `}<strong parentName=\"p\">{`logpull_options`}</strong>{`. To modify `}<strong parentName=\"p\">{`destination_conf`}</strong>{`, you will need to request an ownership challenge and provide the associated token with your update request. You can also delete your current job and create a new one.`}</p>\n    <p>{`Once a job has been enabled and has started executing, the `}<strong parentName=\"p\">{`last_complete`}</strong>{` field will show the time when the last batch of logs was successfully sent to the destination:`}</p>\n    <h3 {...{\n      \"id\": \"request-to-get-job-by-id-and-see-last_complete-info\"\n    }}>{`Request to get job by ID and see `}<strong parentName=\"h3\">{`last_complete`}</strong>{` info`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X GET \\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-5\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\"errors\": [],\n \"messages\": [],\n \"result\": {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": true,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": \"2018-08-09T21:26:00Z\",\n     \"last_error\": null,\n     \"error_message\": null\n },\n \"success\": true\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-4---delete-a-job\"\n    }}>{`Step 4 - Delete a job`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X DELETE \\\\\nhttps://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\n`}</code></pre>\n    <p>{`Be careful when deleting a job because this action cannot be reversed.`}</p>\n    <h3 {...{\n      \"id\": \"response-6\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {},\n  \"success\": true\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-5---retrieve-your-job\"\n    }}>{`Step 5 - Retrieve your job`}</h2>\n    <p>{`Retrieve a specific job, using the job ID:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/146 | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-7\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n     \"id\": 146,\n     \"dataset\": \"http_requests\",\n     \"enabled\": true,\n     \"name\": \"<DOMAIN_NAME>\",\n     \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n     \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n     \"last_complete\": null,\n     \"last_error\": null,\n     \"error_message\": null\n    }\n  ],\n  \"success\": true\n}\n`}</code></pre>\n    <p>{`Retrieve all jobs for all data sets:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X GET https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-8\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n      \"id\": 8029,\n      \"dataset\": \"spectrum_events\",\n      \"enabled\": true,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"logpull_options\": \"fields=Application,ClientAsn,ClientIP,ColoCode,Event,OriginIP,Status\",\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": \"2019-10-01T00:25:00Z\",\n      \"last_error\": null,\n      \"error_message\": null\n    },\n    {\n      \"id\": 146,\n      \"dataset\": \"http_requests\",\n      \"enabled\": false,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": \"2019-09-24T21:15:00Z\",\n      \"last_error\": null,\n      \"error_message\": null\n    }\n  ]\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-6---updating-logpull_options\"\n    }}>{`Step 6 - Updating `}<strong parentName=\"h2\">{`logpull_options`}</strong></h2>\n    <p>{`If you want to add (or remove) fields, change the timestamp format, or enable protection against the `}<inlineCode parentName=\"p\">{`Log4j - CVE-2021-44228`}</inlineCode>{` vulnerability, first retrieve the current `}<strong parentName=\"p\">{`logpull_options`}</strong>{` for your zone.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X GET 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\\\n    -H 'X-Auth-Key: <API_KEY>' \\\\\n    -H 'X-Auth-Email: <EMAIL>' | jq .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"response-9\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n        \"id\": 146,\n        \"dataset\": \"http_requests\",\n        \"logstream\": true,\n        \"frequency\": \"high\",\n        \"kind\": \"\",\n        \"enabled\": true,\n        \"name\": \"<DOMAIN_NAME>\",\n        \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n        \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n        \"last_complete\": \"2021-12-14T19:56:49Z\",\n        \"last_error\": null,\n        \"error_message\": null\n    },\n    \"success\": true\n}\n`}</code></pre>\n    <p>{`Next, edit the `}<strong parentName=\"p\">{`logpull_options`}</strong>{` as desired and create a `}<inlineCode parentName=\"p\">{`PUT`}</inlineCode>{` request. The following example enables the `}<strong parentName=\"p\">{`CVE-2021-44228`}</strong>{` redaction option.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -s -X PUT 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs/<JOB_ID>' \\\\\n    -H 'X-Auth-Key: <API_KEY>' \\\\\n    -H 'X-Auth-Email: <EMAIL>' \\\\\n    -d '{\n    \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\"\n}'\n`}</code></pre>\n    <p>{`Note that at this time, the `}<strong parentName=\"p\">{`CVE-2021-44228`}</strong>{` option is not available through the UI, and updating your Logpush job through the UI will remove this option.`}</p>\n    <h3 {...{\n      \"id\": \"response-10\"\n    }}>{`Response`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n        \"id\": 146,\n        \"dataset\": \"http_requests\",\n        \"logstream\": true,\n        \"frequency\": \"high\",\n        \"kind\": \"\",\n        \"enabled\": true,\n        \"name\": null,\n        \"logpull_options\": \"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339&CVE-2021-44228=true\",\n        \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n        \"last_complete\": \"2021-12-14T20:02:19Z\",\n        \"last_error\": null,\n        \"error_message\": null\n    },\n    \"success\": true\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}