{"data":{"mdx":{"id":"7d1a7628-7e1b-5f07-9cd1-b023b404cfb9","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"pcx-content-type\": \"configuration\",\n  \"order\": 3\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Example = makeShortcode(\"Example\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"url-rewrite-examples\"\n  }, \"URL rewrite examples\"), mdx(\"p\", null, \"The following examples illustrate how to perform URL rewrites with Transform Rules:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#rewrite-path-of-welcome-page-for-visitors-in-specific-countries\"\n  }, \"Rewrite path of welcome page for visitors in specific countries\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#rewrite-url-query-string-of-blog-visitors\"\n  }, \"Rewrite URL query string of blog visitors\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#rewrite-path-of-archived-blog-posts\"\n  }, \"Rewrite path of archived blog posts\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#rewrite-path-of-moved-section-of-a-website\"\n  }, \"Rewrite path of moved section of a website\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#rewrite-path-with-several-url-segments-to-a-different-url-segment\"\n  }, \"Rewrite path with several URL segments to a different URL segment\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#rewrite-blog-archive-urls-to-support-a-new-url-format\"\n  }, \"Rewrite blog archive URLs to support a new URL format\"))), mdx(\"h3\", {\n    \"id\": \"rewrite-path-of-welcome-page-for-visitors-in-specific-countries\"\n  }, \"Rewrite path of welcome page for visitors in specific countries\"), mdx(\"p\", null, \"To have a welcome page in two languages, create two URL Rewrite Rules with a static rewrite of the path component:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"URL Rewrite Rule #1\")), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"http.request.uri.path == \\\"/welcome.html\\\" && ip.geoip.country == \\\"GB\\\"\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Static\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"/welcome-gb.html\\n\"))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"URL Rewrite Rule #2\")), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"http.request.uri.path == \\\"/welcome.html\\\" && ip.geoip.country == \\\"PT\\\"\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Static\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"/welcome-pt.html\\n\"))), mdx(\"h3\", {\n    \"id\": \"rewrite-url-query-string-of-blog-visitors\"\n  }, \"Rewrite URL query string of blog visitors\"), mdx(\"p\", null, \"To rewrite a request to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/blog\"), \" path to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/blog?sort-by=date\"), \", create a URL Rewrite Rule with the following settings:\"), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"http.request.uri.path == \\\"/blog\\\"\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Query\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Static\"), \": \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"sort-by=date\\n\"))), mdx(\"p\", null, \"Additionally, set the path rewrite action of the same rule to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Preserve\"), \" so that the URL path does not change.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"778px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/4a09fc1435ca4417efc8268f5c6eae2c/20982/use-case-blog.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"86.1271676300578%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKUlEQVQ4y51TUU7DMAzN+TgXd+AocAUOwAcUPpAAVdpEk7RJY8fJeG4ZGhPTwp7cqD9+frafzTh6a63zzg6DHfBriXnXBkNEIYQJXwz6zPOckpTyZ2QpbqJPnxBTzCalFGMMMSZKSGRmUNTTEFEKkco5GxHZXQQIMd+SjnBC9q8WUBki2yd0CLRgxmnCiC5TrpUh4MJkjNo6G+OcRcCCGaKLUmtTcikF7thstggQYXPIb01mUmhNRQbXP2SjlPeel4GX/c5qY+VE5JyDu91CseigxvoqG4m4CDh0tQcaPhN7nxgQ4CpQH4bFzlcimHw5A1lj5dRvRYUupTA/djns8/gYctYtMOtLyQd66ePWsznrQbw48q7r+r5/fOreX59v79+urh9u7j6+AAVF6S3S8MkkAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Rule configuration for query rewrite in the blog example\",\n    \"title\": \"Rule configuration for query rewrite in the blog example\",\n    \"src\": \"/static/4a09fc1435ca4417efc8268f5c6eae2c/20982/use-case-blog.png\",\n    \"srcSet\": [\"/static/4a09fc1435ca4417efc8268f5c6eae2c/8f77f/use-case-blog.png 346w\", \"/static/4a09fc1435ca4417efc8268f5c6eae2c/e185b/use-case-blog.png 691w\", \"/static/4a09fc1435ca4417efc8268f5c6eae2c/20982/use-case-blog.png 778w\"],\n    \"sizes\": \"(max-width: 778px) 100vw, 778px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"h3\", {\n    \"id\": \"rewrite-path-of-archived-blog-posts\"\n  }, \"Rewrite path of archived blog posts\"), mdx(\"p\", null, \"To rewrite all requests to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/news/2012/...\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/archive/news/2012/...\"), \" you must add a reference to the content of the original URL. Create a new URL Rewrite Rule and define a dynamic URL path rewrite using an expression:\"), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"starts_with(http.request.uri.path, \\\"/news/2012/\\\")\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Dynamic\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"concat(\\\"/archive\\\", http.request.uri.path)\\n\"))), mdx(\"p\", null, \"The filter uses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"starts_with()\"), \" function all paths starting with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/news/2012/\"), \". The dynamic path rewrite uses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"concat()\"), \" function to concatenate a prefix to the original URL path of the HTTP request.\"), mdx(\"h3\", {\n    \"id\": \"rewrite-path-of-moved-section-of-a-website\"\n  }, \"Rewrite path of moved section of a website\"), mdx(\"p\", null, \"To rewrite everything under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/blog/<x>\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/marketing/<x>\"), \" you must modify the first component of the path (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/blog/\"), \"). Create a URL Rewrite Rule and use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"regex_replace()\"), \" function for this purpose:\"), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"starts_with(http.request.uri.path, \\\"/blog/\\\")\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Dynamic\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"regex_replace(http.request.uri.path, \\\"^/blog/\\\", \\\"/marketing/\\\")\\n\"))), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"regex_replace()\"), \" function matches the path component on a regular expression (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"^/blog/\"), \") and then provides a replacement for that match (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/marketing/\"), \").\"), mdx(\"h3\", {\n    \"id\": \"rewrite-path-with-several-url-segments-to-a-different-url-segment\"\n  }, \"Rewrite path with several URL segments to a different URL segment\"), mdx(\"p\", null, \"To rewrite paths like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/images/<folder1>/<folder2>/<filename>\"), \" \\u2014 where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<folder1>\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<folder2>\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<filename>\"), \" can vary \\u2014 to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/img/<filename>\"), \", create a URL Rewrite Rule with a dynamic rewrite of the path component:\"), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"http.request.uri.path ~ \\\"^/images/[^/]+/[^/]+/[^/]+$\\\"\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Dynamic\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"regex_replace(http.request.uri.path, \\\"^/images/[^/]+/[^/]+/(.+)$\\\", \\\"/img/${1}\\\")\\n\"))), mdx(\"p\", null, \"For example, this rule would rewrite the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/images/nature/animals/tiger.png\"), \" path to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/img/tiger.png\"), \".\"), mdx(\"h3\", {\n    \"id\": \"rewrite-blog-archive-urls-to-support-a-new-url-format\"\n  }, \"Rewrite blog archive URLs to support a new URL format\"), mdx(\"p\", null, \"To rewrite the URLs of a blog archive that follow the URL format \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/posts/<YYYY>-<MM>-<DD>-<title>\"), \" to the new format \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/posts/<YYYY>/<MM>/<DD>/<title>\"), \", create the following URL Rewrite Rule:\"), mdx(Example, {\n    mdxType: \"Example\"\n  }, mdx(\"p\", null, \"Text in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Expression Editor\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"http.request.uri.path ~ \\\"^/posts/[0-9]+-[0-9]+-[0-9]+-.*\\\"\\n\")), mdx(\"p\", null, \"Text after \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rewrite to...\"), \" > \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Dynamic\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-txt\"\n  }, \"regex_replace(http.request.uri.path, \\\"^/posts/([0-9]+)-([0-9]+)-([0-9]+)-(.*)$\\\", \\\"/posts/${1}/${2}/${3}/${4}\\\")\\n\"))), mdx(\"p\", null, \"The function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"regex_replace()\"), \" also allows you to extract parts of the URL using regular expressions' capture groups. Create capture groups by putting part of the regular expression in parentheses. Then, reference a capture group using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"${<num>}\"), \" in the replacement string, where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<num>\"), \" is the number of the capture group.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"7d1a7628-7e1b-5f07-9cd1-b023b404cfb9","fields":{"slug":"/transform/url-rewrite/examples"},"frontmatter":{"pcx_content_type":"configuration","title":"","type":null,"order":3,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"URL rewrite examples","depth":1}],"tableOfContents":{"items":[{"url":"#url-rewrite-examples","title":"URL rewrite examples","items":[{"items":[{"url":"#rewrite-path-of-welcome-page-for-visitors-in-specific-countries","title":"Rewrite path of welcome page for visitors in specific countries"},{"url":"#rewrite-url-query-string-of-blog-visitors","title":"Rewrite URL query string of blog visitors"},{"url":"#rewrite-path-of-archived-blog-posts","title":"Rewrite path of archived blog posts"},{"url":"#rewrite-path-of-moved-section-of-a-website","title":"Rewrite path of moved section of a website"},{"url":"#rewrite-path-with-several-url-segments-to-a-different-url-segment","title":"Rewrite path with several URL segments to a different URL segment"},{"url":"#rewrite-blog-archive-urls-to-support-a-new-url-format","title":"Rewrite blog archive URLs to support a new URL format"}]}]}]},"parent":{"modifiedTime":"2022-01-26","relativePath":"transform/url-rewrite/examples.md"}}}