{"data":{"mdx":{"id":"efe4a20a-f53e-5fb6-86a4-156da3ac543d","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"pcx-content-type\": \"how-to\",\n  \"order\": 23\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"deploy-rulesets-via-api\"\n  }, \"Deploy rulesets via API\"), mdx(\"p\", null, \"Use the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/rulesets-api\"\n  }, \"Rulesets API\"), \" to deploy and configure rulesets at the account level or at the zone level.\"), mdx(\"h2\", {\n    \"id\": \"deploying-managed-rulesets\"\n  }, \"Deploying Managed Rulesets\"), mdx(\"p\", null, \"You can deploy WAF Managed Rulesets to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http_request_firewall_managed\"), \" phase, both at the account level and at the zone level.\"), mdx(\"p\", null, \"Other Managed Rulesets, like DDoS Managed Rulesets, must be deployed to a different phase. Check the specific Managed Ruleset documentation for details.\"), mdx(\"p\", null, \"You can define overrides to customize the behavior of the rules included in a Managed Ruleset.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" There are a few requirements when deploying WAF Managed Rulesets to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http_request_firewall_managed\"), \" phase at the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"zone\"), \" level:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"The zone-level phase can only have two \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"execute\"), \" rules deploying Managed Rulesets: one rule for deploying the OWASP Managed Ruleset and another rule for deploying the Cloudflare Managed Rules.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"You must set the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"expression\"), \" field to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \" in these two rules, which means that they apply to all zone requests.\"))), mdx(\"p\", null, \"To learn more about deploying Managed Rulesets and configuring overrides using the Rulesets API, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/managed-rulesets\"\n  }, \"Work with Managed Rulesets\"), \".\"), mdx(Aside, {\n    type: \"warning\",\n    header: \"Important\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"Currently, each Managed Ruleset will execute \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"at most once per request\"), \". Configuring a second rule that executes the same Managed Ruleset will have no effect.\"), mdx(\"p\", null, \"For example, consider two account-level rules with different expressions that execute the same Managed Ruleset. If the two rules match for the same request, the Managed Ruleset will not be executed for the second rule.\"), mdx(\"p\", null, \"As another example, consider an account-level rule that executes a Managed Ruleset and a zone-level rule that executes the same Managed Ruleset. If both rules match for the same request, the Managed Ruleset is only executed when the account-level rule is evaluated.\"), mdx(\"p\", null, \" This behavior will change in the future so that you can execute each Managed Ruleset multiple times per request.\")), mdx(\"h2\", {\n    \"id\": \"deploying-custom-rulesets\"\n  }, \"Deploying custom rulesets\"), mdx(\"p\", null, \"You can create custom rulesets in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http_request_firewall_custom\"), \" phase at the account level. After creating a custom ruleset, you can deploy it to a phase at the account level by adding a rule to the phase entry point that executes the custom ruleset.\"), mdx(Aside, {\n    type: \"warning\",\n    header: \"Important\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"Currently, you can only deploy custom rulesets to a phase at the account level.\")), mdx(\"p\", null, \"To learn more about creating and deploying custom rulesets using the Rulesets API, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developers.cloudflare.com/ruleset-engine/custom-rulesets\"\n  }, \"Work with custom rulesets\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"efe4a20a-f53e-5fb6-86a4-156da3ac543d","fields":{"slug":"/managed-rulesets/deploy-api"},"frontmatter":{"pcx_content_type":"how-to","title":"","type":null,"order":23,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Deploy rulesets via API","depth":1}],"tableOfContents":{"items":[{"url":"#deploy-rulesets-via-api","title":"Deploy rulesets via API","items":[{"url":"#deploying-managed-rulesets","title":"Deploying Managed Rulesets"},{"url":"#deploying-custom-rulesets","title":"Deploying custom rulesets"}]}]},"parent":{"modifiedTime":"2022-01-25","relativePath":"managed-rulesets/deploy-api.md"}}}