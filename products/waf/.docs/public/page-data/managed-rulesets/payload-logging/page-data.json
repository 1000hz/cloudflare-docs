{"componentChunkName":"component---src-components-mdx-custom-renderer-js","path":"/managed-rulesets/payload-logging","result":{"data":{"mdx":{"id":"4a75d8b5-74ea-5cf5-bb30-d8a2e0fd7c91","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"pcx-content-type\": \"concept\",\n  \"order\": 25\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Aside = makeShortcode(\"Aside\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"log-the-payload-of-matched-rules\"\n  }, \"Log the payload of matched rules\"), mdx(Aside, {\n    type: \"note\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"This feature is only available for customers on an Enterprise plan.\")), mdx(\"p\", null, \"The WAF allows you to log the request information that triggered a specific rule of a Managed Ruleset. This information is known as the payload. Payload logging is especially useful when diagnosing the behavior of WAF rules. Since the values that triggered a rule may contain sensitive data, they are encrypted with a customer-provided public key so that only you can examine them later.\"), mdx(\"p\", null, \"Each Managed Ruleset has its own payload logging configuration. To enable the feature, configure a public key to encrypt the logged payload by doing one of the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Generate a key pair directly in the dashboard (Cloudflare will \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"only\"), \" save the generated public key)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enter your own public key\")), mdx(\"p\", null, \"Once enabled, the WAF saves the payload of any rule matches for the Managed Ruleset configured with payload logging, encrypting the payload with your public key.\"), mdx(\"p\", null, \"To view the content of the payload in clear text, do one of the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"In the Firewall Analytics page (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Firewall\"), \" > \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Overview\"), \"), enter your private key to decrypt the payload of a log entry directly in the browser. See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/payload-logging/view\"\n  }, \"View the payload content in the dashboard\"), \".\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Decrypt the payload in the command line using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"matched-data-cli\"), \" tool. See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/managed-rulesets/payload-logging/command-line/decrypt-payload\"\n  }, \"Decrypt the payload content in the command line\"), \".\"))), mdx(Aside, {\n    type: \"warning\",\n    header: \"Important\",\n    mdxType: \"Aside\"\n  }, mdx(\"p\", null, \"All Cloudflare logs are encrypted at rest. Encrypting the payload content adds a second layer of encryption for the matched values that triggered a WAF rule.\"), mdx(\"p\", null, \"Make sure you store your private key safely. If you lose the private key, configure payload logging with a new public key. The payload of new requests will be encrypted with the new public key.\"), mdx(\"p\", null, \"Cloudflare cannot decrypt encrypted payloads, since this operation requires your private key. Cloudflare staff will never ask for the private key.\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"demo":null,"difficulty":null,"summary":null,"tags":null,"title":"","type":null,"updated":null}}},"pageContext":{"id":"4a75d8b5-74ea-5cf5-bb30-d8a2e0fd7c91","fields":{"slug":"/managed-rulesets/payload-logging"},"frontmatter":{"pcx_content_type":"concept","title":"","type":null,"order":25,"hidden":null,"hideChildren":null,"breadcrumbs":null},"headings":[{"value":"Log the payload of matched rules","depth":1}],"tableOfContents":{"items":[{"url":"#log-the-payload-of-matched-rules","title":"Log the payload of matched rules"}]},"parent":{"modifiedTime":"2022-01-25","relativePath":"managed-rulesets/payload-logging/index.md"}}},"staticQueryHashes":["2814688963","32046230","338033027","598566803","811020565"]}